(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+8Ar":function(e,t,n){"use strict";var r=n("+aGp"),a=/^ms-/;e.exports=function(e){return r(e).replace(a,"-ms-")}},"+Cau":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var r=n("MVZn"),a=n.n(r),o=n("rVSK"),i=n.n(o),c=n("zkrS"),s=function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return e&&window.parent.postMessage(i()({event:e,payload:t}),n)},n=function(n){if(n.source!==window&&!n.origin.includes("qiyukf")&&n.data&&"string"==typeof n.data)try{var r=JSON.parse(n.data),a=r.event,o=r.payload,i=void 0===o?{}:o;e[a]&&e[a](t,{type:a,payload:i,event:n})}catch(e){console.warn("[receive] error message data",e,n)}};return window.addEventListener("message",n),{send:t,clear:function(){return window.removeEventListener("message",n)}}},l={"message:get:preview-state":function(e){var t=u(),n=t.state,r=t.project;e("message:data:preview-state",a()({},n.model.current,{isHighlight:Boolean(r&&r._highlight)}))},"message:set:preview-state":function(e,t){var n=t.payload,r=n.isHighlight,o=n.screenCid,i=u(),s=i.state.model,l=s.current,d=s.screens,p=i.project,f=i.dispatch;if(p&&void 0!==r&&r!==p._highlight&&(f({type:"projects:update-local",payload:a()({},p,{_highlight:r})}),c.a.MB.currentProject._highlight=r),l.screenCid&&void 0!==o&&o!==l.screenCid){if(!d.find(function(e){return e.cid===o}))return console.warn("[message:set:preview-state] invalid screenCid");f({type:"entry:sync-runner:set-screen",payload:{cid:o}})}},"message:get:screen-list":function(e){var t=c.a.MB.webpackInterface.store.getState().model,n=t.current;e("message:data:screen-list",t.screens.filter(function(e){return e.project_cid===n.projectCid}).map(function(e){return{cid:e.cid,name:e.name,position:e.position,parent_cid:e.parent_cid,project_cid:e.project_cid}}))},"message:get:notification-state":function(e){var t=(c.a.MB.notification&&c.a.MB.notification.store&&c.a.MB.notification.store.getState()||{}).notifications;e("message:data:notification-state",{unreadCount:t?t.notifications.unreadNum:0})},"message:get:notification-list":function(e){var t=(c.a.MB.notification&&c.a.MB.notification.store&&c.a.MB.notification.store.getState()||{}).notifications;e("message:data:notification-list",t?t.notifications.notifications:[])}},u=function(){var e=c.a.MB.webpackInterface.store,t=e.getState,n=e.dispatch,r=t(),a=r.model.current.projectCid;return{getState:t,dispatch:n,state:r,project:a&&r.model.projects.find(function(e){return e.cid===a})}}},"+aGp":function(e,t,n){"use strict";var r=/([A-Z])/g;e.exports=function(e){return e.replace(r,"-$1").toLowerCase()}},"+c4W":function(e,t,n){var r=n("711d"),a=n("4/ic"),o=n("9ggG"),i=n("9Nap");e.exports=function(e){return o(e)?r(i(e)):a(e)}},"/5+U":function(e,t,n){"use strict";n.d(t,"h",function(){return c}),n.d(t,"j",function(){return s}),n.d(t,"o",function(){return d}),n.d(t,"k",function(){return p}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return h}),n.d(t,"e",function(){return m}),n.d(t,"l",function(){return v}),n.d(t,"g",function(){return g}),n.d(t,"n",function(){return y}),n.d(t,"d",function(){return b}),n.d(t,"i",function(){return w}),n.d(t,"f",function(){return E}),n.d(t,"m",function(){return S}),n.d(t,"c",function(){return C});var r=n("rVSK"),a=n.n(r),o=n("8fIB"),i=n.n(o);function c(e){var t,n;return function(){return function(e,t){if(!e||e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}(n,arguments)||(t=e.apply(null,arguments),n=arguments),t}}var s=function(e){return function(t){return t&&t.preventDefault(),t&&t.stopPropagation(),e&&e(t)}},l={"&amp;":"&","&lt;":"<","&gt;":">"},u=function(e){return l[e]||e},d=function(e){return e&&e.replace(/(&amp;|&lt;|&gt;)/g,u)},p=function(e,t,n){return Math.min(Math.max(e,t),n)},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Number(parseFloat((1/t*e).toFixed(2)))+n},h=function(e){var t=e.image,n=e.adjust;t.naturalWidth>=t.naturalHeight?t.style.maxWidth=n+"px":t.style.maxHeight=n+"px"},m=function(e){var t=e.url,n=e.name,r=e.type,a=document.createElement("a"),o=function(e){if(e)return e.replace(/\s|<|>|《|》|:|：|？|\?|\\|\/|"|”|\||\./g,"_")}(n)||"未命名",i="".concat(encodeURIComponent(o));r?a.href="".concat(t,"?attname=").concat(i,".").concat(r):(a.setAttribute("download",i),a.href="".concat(t)),a.click()},v=function(e){return Number(e.toFixed(2))},g=function(e){var t=e.width,n=e.height,r=e.left,a=e.top,o=e.rotate,i=void 0===o?0:o;if(0===i)return[a,r,t,n];var c=MB.atan2(t,n),s=c-i,l=s-2*c,u=s+180,d=l+180,p=r+t/2,f=a+n/2,h=MB.hypotenuse(t/2,n/2),m=1/0,v=1/0,g=-1/0,y=-1/0;return[s,l,u,d].forEach(function(e){var t=Math.round(p+h*MB.cos(e)),n=Math.round(f+h*MB.sin(e));t<m&&(m=t),n<v&&(v=n),t>g&&(g=t),n>y&&(y=n)}),[v,m,g-m,y-v]},y=function(e){return new i.a(function(t){return setTimeout(t,e)})},b=function(){return console.error("下载失败")},w=function(e){var t="".concat(e).charCodeAt(0);return t>=19968&&t<=40869},E=function(){try{var e=MB.localStorageDelegate.getItem("user_pick_color");return JSON.parse(e||"[]")}catch(e){return[]}},S=function(e){var t=E();return t.includes(e)?{history:t,focusColor:e}:(t.unshift(e),t.length>40&&t.pop(),MB.localStorageDelegate.setItem("user_pick_color",a()(t)),{history:t,focusColor:null})},C=function(e){var t=E(),n=t.indexOf(e);return t.splice(n,1),MB.localStorageDelegate.setItem("user_pick_color",a()(t)),t}},"/9aa":function(e,t){e.exports=function(){return!1}},"/MKq":function(e,t){function n(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void a(e)}n.done?r(i):Promise.resolve(i).then(c,s)}function c(e){i("next",e)}function s(e){i("throw",e)}c()})}}var r=/[^\x09\x0A\x0D\x20-\xFF\x85\xA0-\uD7FF\uE000-\uFDCF\uFDE0-\uFFFD]/gm,a=function(){var e=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.join("").replace(/<br>/g,"<br/>").replace(/&nbsp;/g," ").replace(r,""));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.prepareHTMLString=a;var o=function(){var e=n(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","<style>".concat(i).concat(t.join(""),"</style>").replace(/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,"").replace(/#iefix&/g,"").replace(r,""));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.prepareCSSString=o;var i='\ninput[type="radio"] { -webkit-appearance: radio; -moz-appearance: radio; }\ninput[type="checkbox"] { -webkit-appearance: checkbox; -moz-appearance: checkbox; }\ninput[type="radio"], input[type="checkbox"] { box-sizing: border-box; max-width: 20px; max-height: 20px; }\ninput { -webkit-appearance: textfield; -moz-appearance: textfield; }\nselect { -webkit-appearance: menulist; -moz-appearance: menulist; }\n';t.prepareSVGString=function(e){var t=e.domString,n=e.width,r=e.height;return'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'.concat(n,'" height="').concat(r,'">\n<switch>\n  <foreignObject width="').concat(n,'" height="').concat(r,'">\n    <body xmlns="http://www.w3.org/1999/xhtml" style="font-size:16px">').concat(t,'</body>\n  </foreignObject>\n  <text font-size="24">\n    <tspan x="').concat(n/2,'" y="').concat(r/2,'" text-anchor="middle">Feature not supported</tspan>\n  </text>\n</switch>\n</svg>')},t.prepareImageElement=function(e){var t=e.svgDataUrl,n=e.width,r=e.height;return new Promise(function(e,a){var o=document.createElement("img");o.addEventListener("error",a),o.addEventListener("load",function(){return e(o)}),o.crossOrigin="anonymous",o.width=n,o.height=r,o.src=t})},t.prepareCanvasElement=function(e){var t=e.imageElement,n=e.width,r=e.height;return new Promise(function(e){var a=document.createElement("canvas");a.width=n,a.height=r,setTimeout(function(){a.getContext("2d").drawImage(t,0,0),e(a)},0)})}},"/N2d":function(e,t,n){"use strict";n("9Kre"),n("rVSK");var r=n("o0o1"),a=n.n(r),o=n("yXPU"),i=n.n(o),c=n("q1tI"),s=n.n(c),l=n("KAy6"),u=n.n(l),d=n("t5S/"),p=n("87hQ"),f=(n("4euM"),n("zkrS")),h={cid:"default",name:"".concat(f.a.I18N.default," ").concat(f.a.I18N.state)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return"prev"!==e?"".concat(e,"+").concat(t):"prev"},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.cid,a=t.cid,o=e.width*n,i=e.height*n,c=[],s=function(e,t){t&&(t=x(t,o,i)),t&&c.push({link:e,toId:m(e.target_cid||r,e.targetstate_cid||"default"),relativeStyle:y(t,o,i)})},l=0,u=function(e){return e.cwidgets().reduce(function(t,r){return"pg"===r.name?(c.push({link:e,globalGestureIndex:l}),l++,t):S(t||E(),w(r,n))},null)};f.a.SpineModel.Link.select(function(e){if(e.state_cid){var t=f.a.SpineModel.Screen.find(e.state_cid),o=t&&f.a.SpineModel.Template.find(t.project_cid),i=o&&u(e);o&&i&&f.a.SpineModel.Panel.findAllByAttribute("template_cid",o.cid).filter(function(e){return e.screen_cid===r&&e.screenstate_cid===a}).forEach(function(t){var r=w(t,n),a={x:i.min.x+r.min.x,y:i.min.y+r.min.y},o={x:a.x+Math.min(i.max.x-i.min.x,r.max.x-r.min.x),y:a.y+Math.min(i.max.y-i.min.y,r.max.y-r.min.y)};s(e,{min:a,max:o})})}else if(e.screen_cid===r&&e.sourcestate_cid===a){var c=u(e);c&&s(e,c)}return!1});var d=[],p=f.a.SpineModel.Widget.findAllByAttribute("screen_cid",r),v=f.a.SpineModel.Widgetstate.findAllByAttribute("screenstate_cid",a);return p.forEach(function(e){if("sticky"===e.name){e=v.find(function(t){return t.widget_cid===e.cid})||e;var t=w(e,n),r=t.min,a=t.max;d.push({widget:e,relativeTop:C((r.y+e.slt*n)/i,0,1),relativeLeft:C((a.x+e.slw*n)/o,0,1),backgroundColor:e.bg||"#fffbba",contentStyle:{textAlign:e.ha||"left",fontSize:"".concat(e.fs||12,"px"),lineHeight:"".concat(e.lh||20,"px"),color:e.tc||"rgba(39,54,78,0.8)"}})}}),d.sort(function(e,t){return e.widget.slt-t.widget.slt}),{id:m(r,a),screenCid:r,screenStateCid:a,screenName:e.name,screenStateName:t.name,canvasZoom:n,canvasWidth:o,canvasHeight:i,linkDataList:c,noteDataList:d}},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e.cid,a=t.cid,o=e.width*n,i=e.height*n;return{screenCid:r,screenStateCid:a,screenName:e.name,screenStateName:t.name,canvasZoom:n,canvasWidth:o,canvasHeight:i}},y=function(e,t,n){var r=e.min,a=e.max;return{top:r.y/n,left:r.x/t,width:(a.x-r.x)/t,height:(a.y-r.y)/n}},b=Math.PI/180,w=function(e,t){var n=(e.width||0)*t,r=(e.height||0)*t,a=(e.left||0)*t,o=(e.top||0)*t;if(e.ro){var i=e.ro*b,c=Math.sin(i),s=Math.cos(i),l=n*s+r*-c,u=n*c+r*s;a+=.5*(n-l),o+=.5*(r-u),n=l,r=u}return{min:{x:a,y:o},max:{x:a+n,y:o+r}}},E=function(){return{min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}}},S=function(e,t){var n=e.min,r=e.max;return n.x=Math.min(n.x,t.min.x),n.y=Math.min(n.y,t.min.y),r.x=Math.max(r.x,t.max.x),r.y=Math.max(r.y,t.max.y),e},C=function(e,t,n){return Math.min(Math.max(e,t),n)},x=function(e,t,n){var r=e.min,a=e.max;return r.x=C(r.x,0,t),r.y=C(r.y,0,n),a.x=C(a.x,0,t),a.y=C(a.y,0,n),r.x!==a.x&&r.y!==a.y?e:null},_=n("lwsE"),k=n.n(_),M=n("7W2i"),T=n.n(M),N=n("W8MJ"),O=n.n(N),j=n("a1gu"),I=n.n(j),R=n("Nsbk"),L=n.n(R),D=n("lSNA"),A=n.n(D),P=n("17x9"),B=n.n(P),U=n("9DAG"),F=n("IB8Z"),z=n("2qqa"),W=n("gCaL"),q=function(e){function t(){return k()(this,t),I()(this,L()(t).apply(this,arguments))}return O()(t,[{key:"render",value:function(){var e=this.props,t=e.screen,n=e.state_cid,r=e.isSnapshot,a=Object(F.a)(Widget.irecords),o=Object(z.b)(t,n,a),i=Object(W.a)(o,t.cid).widgetTreeData;return s.a.createElement(U.a,{widgetTreeData:i,isSnapshot:r})}}]),T()(t,e),t}(c.PureComponent);A()(q,"propTypes",{screen:B.a.object,state_cid:B.a.string,isSnapshot:B.a.bool}),n.d(t,"e",function(){return V}),n.d(t,"c",function(){return X}),n.d(t,"b",function(){return Z}),n.d(t,"d",function(){return K}),n.d(t,"a",function(){return v}),n.d(t,!1,function(){return g});Object(p.setFetchOption)({method:"GET",cache:"default",mode:"no-cors",credentials:"same-origin"});var H=function(e){var t=e.canvasData.canvasZoom,n=e.screen,r=e.screenState,a=[],o=f.a.Global.$("body"),i=o.data("scale"),c=n.hh,l=n.fh,d=r?r.cid:"default";o.data("scale",100),n.hh=0,n.fh=0,n.lsave(!1);var p="background-color: ".concat(n.bg(),";"),h=n.bgimage?"background-image: url(".concat(n.getRealBgImage(),"); background-size: 100% auto;"):"",m="canvas ".concat(n.cp().device," ").concat(n.cp().model," ").concat(n.orient()),v="width: ".concat(n.width,"px; height: ").concat(n.height,"px; transform: scale(").concat(t,"); transform-origin: top left; position: relative; z-index: 1; ").concat(p).concat(h);return a.push('<div class="'.concat(m,'" style="').concat(v,'">')),a.push(u.a.renderToString(s.a.createElement(q,{screen:n,state_cid:d,isSnapshot:!0}))),a.push("</div>"),o.data("scale",i),n.hh=c,n.fh=l,n.lsave(!1),a},V=function(){var e=i()(a.a.mark(function e(t){var n,r,o,i,c,s,l,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.canvasData,r=t.screen,o=t.screenState,n.canvasZoom,i=n.canvasWidth,c=n.canvasHeight,s=H({canvasData:n,screen:r,screenState:o}),e.next=5,Object(d.createSnapshotFromHTMLSourceList)({htmlSourceList:s,width:i,height:c});case 5:return l=e.sent,l.svgString,l.imageElement,u=l.canvasElement,e.abrupt("return",u);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),X=function(e){var t=e.screenCid,n=e.screenStateCid,r=e.canvasZoom,a=G(t,n,r),o=a.canvasData;return{canvasData:o,htmlString:function(e){var t=e.canvasData,n=e.screen,r=e.screenState;return H({canvasData:t,screen:n,screenState:r}).join("")}({canvasData:o,screen:a.screen,screenState:a.screenState})}},Z=function(){var e=i()(a.a.mark(function e(t){var n,r,o,i,c,s,l,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.screenCid,r=t.screenStateCid,o=t.canvasZoom,i=G(n,r,o),c=i.canvasData,s=i.screen,l=i.screenState,e.next=4,V({canvasData:c,screen:s,screenState:l});case 4:return u=e.sent,e.abrupt("return",{canvasData:c,canvasElement:u});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=f.a.SpineModel.Screen.all().find(function(t){return t.cid===e}),a=f.a.SpineModel.Screenstate.all().find(function(e){return e.cid===t});return{canvasData:g(r,a,n),screen:r,screenState:a}},K=function(e,t){return Number((128/Math.max(e,t)).toFixed(2))}},"/OM1":function(e,t,n){e.exports={scroll_bar_container:"ADUwX5JJyFih8zxwAzh8H"}},"/Q2I":function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n("lwsE"),a=n.n(r),o=n("7W2i"),i=n.n(o),c=n("W8MJ"),s=n.n(c),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("cJHP"),y=n.n(g),b=n("q1tI"),w=n.n(b),E=n("17x9"),S=n.n(E),C=n("i8i4"),x=n("Y+p1"),_=n.n(x),k=n("i6OX"),M=(n("NYM8"),[]),T=y()(document.createElement("div"),{className:"modal-portal"}),N=function(e){return e.stopPropagation()},O=function(e){function t(){var e,n,r;a()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return u()(r,(n=r=u()(this,(e=p()(t)).call.apply(e,[this].concat(i))),v()(v()(v()(v()(v()(v()(h()(h()(r)),"onOpen",function(){M.unshift(h()(h()(r))),setTimeout(function(){return r.portal.classList.add("is-open")},50),r.focusOnConfirmBtn(),r.reassignPosiY()}),"onClose",function(){var e=M.indexOf(h()(h()(r)));setTimeout(function(){return M.splice(e,1)}),setTimeout(function(){return r.portal.classList.remove("is-open")},50),setTimeout(function(){return Object(C.render)(w.a.createElement("div",null),r.portal)},500)}),"focusOnConfirmBtn",function(){return setTimeout(function(){var e=r.portal.querySelector("footer .confirm-btn");e&&e.focus()},50)}),"listenToKey",function(e){var t=e.key,n=e.target,a=r.props,o=a.isOpen,i=a.canCloseOnEsc,c=a.onClose,s=a.canConfirmOnEnter,l=a.onConfirm,u=a.isOnConfirmDisabled;"Escape"===t&&!n.matches("input, textarea, [type=select]")&&o&&i&&c&&h()(h()(r))===M[0]&&c(),"Enter"===t&&!n.matches("textarea")&&o&&s&&l&&!u&&h()(h()(r))===M[0]&&l()}),"reassignPosiY",function(){return setTimeout(function(){var e=r.props.type,t=r.portal.querySelector(".modal-mask > div");if(t&&"alert"!==e){var n=window.innerHeight,a=t.offsetHeight,o=n<=a||(n-a)/2<.2*n?"add":"remove";t.classList[o]("is-posi-centered")}},50)}),"renderRealModal",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.props,t=e.type,n=e.title,a=e.className,o=e.maskClassName,i=e.children,c=e.onClose,s=e.canCloseOnClickMask,l=e.onConfirm,u=e.confirmText,d=e.isOnConfirmDisabled,p=e.onCancel,f=e.cancelText,h=e.isOnCancelDisabled,m=e.onDone,v=e.doneText,g=e.isOnDoneDisabled,y="alert"===t||p||l||m,b=w.a.createElement("div",{className:"modal-mask ".concat(o," ").concat(s?"can-close":""),onClick:s?c:null},w.a.createElement("div",{className:"".concat(t,"-modal ").concat(a),onClick:N},w.a.createElement("header",null,n,c&&w.a.createElement("button",{className:"close-btn",onClick:c},w.a.createElement(k.b,{name:"times"}))),w.a.createElement("div",{className:"content"},i),y&&w.a.createElement("footer",null,p&&w.a.createElement("button",{className:"cancel-btn",onClick:p,disabled:h},f),l&&w.a.createElement("button",{className:"confirm-btn",onClick:l,disabled:d},u),m&&w.a.createElement("button",{className:"done-btn",onClick:m,disabled:g},v))));Object(C.render)(b,r.portal)}),n))}return s()(t,[{key:"render",value:function(){return null}},{key:"componentDidMount",value:function(){var e=this.props,t=e.isOpen,n=e.portalClassName;y()(this,{portal:T.cloneNode()}),document.body.appendChild(this.portal),this.portal.className+=" ".concat(n),window.addEventListener("resize",this.reassignPosiY),document.addEventListener("keydown",this.listenToKey),t&&(this.renderRealModal(),this.onOpen())}},{key:"componentWillReceiveProps",value:function(e){_()(this.props,e)||this.renderRealModal(e);var t=e.isOpen,n=this.props.isOpen;!n&&t?this.onOpen():n&&!t&&this.onClose()}},{key:"componentWillUnmount",value:function(){Object(C.unmountComponentAtNode)(this.portal),this.portal&&this.portal.remove(),document.removeEventListener("keydown",this.listenToKey),window.removeEventListener("resize",this.reassignPosiY)}}]),i()(t,e),t}(b.PureComponent);v()(v()(O,"propTypes",{isOpen:S.a.bool,type:S.a.oneOf(["alert","functional","display"]),title:S.a.any,className:S.a.string,maskClassName:S.a.string,portalClassName:S.a.string,children:S.a.any,onClose:S.a.func,onCloseText:S.a.string,canCloseOnClickMask:S.a.bool,canCloseOnEsc:S.a.bool,canConfirmOnEnter:S.a.bool,onConfirm:S.a.func,confirmText:S.a.string,isOnConfirmDisabled:S.a.bool,onCancel:S.a.func,isOnCancelDisabled:S.a.bool,cancelText:S.a.string,onDone:S.a.func,isOnDoneDisabled:S.a.bool,doneText:S.a.string}),"defaultProps",{isOpen:!1,type:"functional",className:"",maskClassName:"",portalClassName:"",onClose:function(){return null},canCloseOnClickMask:!0,canCloseOnEsc:!0,canConfirmOnEnter:!0,onCloseText:I18N.close,confirmText:I18N.confirm,isOnConfirmDisabled:!1,cancelText:I18N.cancel,isOnCancelDisabled:!1,doneText:I18N.done,isOnDoneDisabled:!1})},"/TnQ":function(e,t,n){"use strict";var r=n("fvjX").compose;t.__esModule=!0,t.composeWithDevTools=function(){if(0!==arguments.length)return"object"==typeof arguments[0]?r:r.apply(null,arguments)},t.devToolsEnhancer=function(){return function(e){return e}}},"/h46":function(e,t,n){n("cHUd")("Map")},"0/XF":function(e,t,n){"use strict";n.d(t,"a",function(){return x});var r=n("lwsE"),a=n.n(r),o=n("7W2i"),i=n.n(o),c=n("W8MJ"),s=n.n(c),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),E=n("i6OX"),S=n("nc5A"),C=n.n(S),x=function(e){function t(){var e,n,r;a()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return u()(r,(n=r=u()(this,(e=p()(t)).call.apply(e,[this].concat(i))),v()(v()(h()(h()(r)),"handleChange",function(e){r.props.onChange(e.target.value)}),"handleClear",function(e){e.preventDefault(),r.props.onChange("")}),n))}return s()(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.placeholder;return w.a.createElement("div",{type:"search",className:C.a.search},w.a.createElement(E.b,{type:"dora",name:"scale",className:"search-icon"}),w.a.createElement("input",{type:"text",value:t,placeholder:n,onChange:this.handleChange}),t.length>0&&w.a.createElement(E.b,{type:"dora",name:"times_fc",className:"clear-icon",onClick:this.handleClear}))}}]),i()(t,e),t}(b.PureComponent);x.propTypes={value:y.a.string,placeholder:y.a.string,onChange:y.a.func}},"0JQy":function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+r+"|"+a+")"+"?",l="[\\ufe0e\\ufe0f]?"+s+("(?:\\u200d(?:"+[o,i,c].join("|")+")[\\ufe0e\\ufe0f]?"+s+")*"),u="(?:"+[o+r+"?",r,i,c,n].join("|")+")",d=RegExp(a+"(?="+a+")|"+u+l,"g");e.exports=function(e){return e.match(d)||[]}},"0L8M":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("pVnL"),a=n.n(r),o=n("q1tI"),i=n.n(o),c=n("i8i4"),s=n.n(c),l=n("6x+O");function u(e,t){var n=Object(l.b)();s.a.render(i.a.createElement(e,a()({},t,{onClose:function(){return setTimeout(function(){s.a.unmountComponentAtNode(n),document.body.removeChild(n)})}})),n)}},"0ZTe":function(e,t,n){var r=n("wy8a"),a=n("quyA"),o=n("Em2t"),i=n("dt0z");e.exports=function(e){return function(t){t=i(t);var n=a(t)?o(t):void 0,c=n?n[0]:t.charAt(0),s=n?r(n,1).join(""):t.slice(1);return c[e]()+s}}},"0k54":function(e,t,n){"use strict";n.d(t,"g",function(){return l}),n.d(t,"a",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"e",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"f",function(){return h}),n.d(t,"b",function(){return g});var r=n("RIqP"),a=n.n(r),o=n("MVZn"),i=n.n(o),c=n("l0oT"),s=n("DdHt"),l=function e(t,n,r){var o=i()({},n);if(0===t.length)r(o);else{var c=t.shift(),s=o.children.findIndex(function(e){return e.cid===c}),l=o.children[s].widget.z;o.children=a()(o.children),o.children[s]=e(t,o.children[s],r),o.children[s].widget.z!==l&&o.children.sort(function(e,t){var n=e.widget,r=t.widget;return n.z-r.z||n.timestamp-r.timestamp})}return o},u=function e(t,n){for(var r=0;r<n.children.length;r++){var a=n.children[r];if(a.cid===t)return a;var o=e(t,a);if(o)return o}},d=function e(t){var n=[],r=t.type,o=t.widget,i=t.children;return"group"===r?i.forEach(function(t){return n.push.apply(n,a()(e(t)))}):n.push(o),n},p=function e(t){var n=[],r=t.type,o=t.widget,i=t.children;return n.push(o),"group"===r&&i.forEach(function(t){return n.push.apply(n,a()(e(t)))}),n},f=function e(t,n){var r=[],o=n[t];return o&&r.push(o),o&&o.gid&&r.push.apply(r,a()(e(o.gid,n))),r},h=function(e){return"group"===e.type?v(e):m(e.widget)},m=function(e){return{minX:e.l(),minY:e.t(),maxX:e.r(),maxY:e.b()}},v=function e(t){var n=1/0,r=1/0,a=-1/0,o=-1/0;if("group"===t.type)t.children.forEach(function(t){var i=e(t);n=Math.min(n,i.minX),r=Math.min(r,i.minY),a=Math.max(a,i.maxX),o=Math.max(o,i.maxY)});else{var i=t.widget.rect();n=i.left,r=i.top,a=i.right,o=i.bottom}return{minX:n,minY:r,maxX:a,maxY:o}},g=function(e,t){if(e.every(function(e){return e.gid})){var n,r,a=u(e[0].gid,t),o=a.widget.ro,i=a.children.map(function(e){return e.widget}),l=Object(s.h)(i),d=l.left,p=l.top,f=l.bottom,h=l.right,m={},v=e.map(function(e){return m[e.cid]=e.dup(),e.cid}),g=i.map(function(e){return v.includes(e.cid)?m[e.cid]:e.dup()}),y=Object(s.h)(g),b=y.left,w=y.top,E=y.bottom,S=y.right;return b===d&&w===p&&S===h&&E===f||((n=d-b)&&g.forEach(function(e){e.top-=Math.round(n/2*Object(c.c)(o)),e.left+=Math.round(n/2-n/2*Object(c.a)(o))}),(r=p-w)&&g.forEach(function(e){e.left+=Math.round(r/2*Object(c.c)(o)),e.top+=Math.round(r/2-r/2*Object(c.a)(o))}),(r=E-f)&&g.forEach(function(e){e.left-=Math.round(r/2*Object(c.c)(o)),e.top-=Math.round(r/2-r/2*Object(c.a)(o))}),(n=S-h)&&g.forEach(function(e){e.top+=Math.round(n/2*Object(c.c)(o)),e.left-=Math.round(n/2-n/2*Object(c.a)(o))})),g}return e}},"1iCU":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return i}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return l});var r="inspect",a="preview",o="comment",i=[a,r,o],c=[{label:I18N.preview.preview,icon:a},{label:I18N.preview_panel.developer_mode,icon:r},{label:I18N.preview_panel.comment,icon:o}],s=c.slice(0,2),l={preview:"打开了预览界面",inspect:"切换到标注页面",comment:"切换到评论页面"}},"1mjR":function(e,t,n){},"2qqa":function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"d",function(){return f}),n.d(t,"a",function(){return h});var r=n("MVZn"),a=n.n(r),o=n("eTac"),i=n.n(o),c=n("cJHP"),s=n.n(c),l=n("0k54"),u=n("IB8Z"),d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3?arguments[3]:void 0,a=Object(u.b)(e.cid,r).map(function(r){var a=Widgetstate.find(t+r.cid)||r,o=Widgetstate.find(n+r.cid)||r;return s()(a,{z:o.z,gid:o.gid,timestamp:o.timestamp}),a.cid=r.cid,a.screen_cid=e.cid,a}),o=new i.a,c=e.cpanels().map(function(r){o.add(r.template_cid);var a=Panelstate.find(t+r.cid)||r,i=Panelstate.find(n+r.cid)||r;return s()(a,{z:i.z,gid:i.gid,timestamp:i.timestamp}),a.cid=r.cid,a.screen_cid=e.cid,a});return o.forEach(function(e){Template.find(e).cscreens().forEach(function(e){Object(u.b)(e.cid,r).forEach(function(e){a.push(e)})})}),c.concat(a)},p=function(e,t,n){var r=Object(u.b)(e.cid,n).map(function(n){var r=Widgetstate.find(t+n.cid)||n;return r.cid=n.cid,r.screen_cid=e.cid,r}),a=new i.a,o=e.cpanels().map(function(n){a.add(n.template_cid);var r=Panelstate.find(t+n.cid)||n;return r.cid=n.cid,r.screen_cid=e.cid,r});return a.forEach(function(e){Template.find(e).cscreens().forEach(function(e){Object(u.b)(e.cid,n).forEach(function(e){o.push(e)})})}),o.concat(r)},f=function(e,t){var n=e.children.filter(function(e){return 0===e.widget.primary_fixed&&("group"!==e.type?e.widget.t()<t:Object(l.f)(e).minY<t)});return a()({},e,{children:n})},h=function(e,t,n){var r=e.children.filter(function(e){if(0!==e.widget.primary_fixed)return!1;var r=t-e.widget.b();return"group"!==e.type?r<n:t-Object(l.f)(e).maxY<n});return a()({},e,{children:r})}},"2rXa":function(e,t,n){},"2s0x":function(e,t,n){e.exports={"slice-container":"yWKU8qVPbqrRIRSJ_TjGi","slice-load-wrap":"_3WsSTJxbz12iOHZ8ntxQf8","slice-item":"_2vvvzR2E0SoIZOD3DAqHza",active:"_2WpARMx4pqMBHK1KM0kjLj",download:"_1hNQ5s7ZGKL2NIxtApkdLY","icon-download":"_2Bxe5XoVHVItE0i88jpN6d","no-slice":"_2d9jp1Mvca7Pr9eZSIevfN",spinner:"_1u-FVwfgZb3ahxMGw1-PnC","rotate-infinite":"_3nSb5BvCbI3mKp-n2u4hun","download-slice-load":"_3tq61brpxkFdCxReM8KHY-"}},"4/ic":function(e,t,n){var r=n("ZWtO");e.exports=function(e){return function(t){return r(t,e)}}},"4MIG":function(e,t,n){},"4dyd":function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r=n("lwsE"),a=n.n(r),o=n("7W2i"),i=n.n(o),c=n("W8MJ"),s=n.n(c),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),E=n("UJpD"),S=n.n(E),C=function(e){function t(){var e,n,r;a()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return u()(r,(n=r=u()(this,(e=p()(t)).call.apply(e,[this].concat(i))),v()(h()(h()(r)),"handleResize",function(){var e=r.elem.getBoundingClientRect();r.props.onResize(e)}),n))}return s()(t,[{key:"componentDidMount",value:function(){this.elem.contentWindow.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){var e=this.elem.contentWindow;e&&e.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this;return w.a.createElement("iframe",{ref:function(t){return e.elem=t},className:S.a.detector})}}]),i()(t,e),t}(b.PureComponent);C.propTypes={onResize:y.a.func.isRequired}},"4euM":function(e,t){var n=window,r=n.Blob,a=n.URL,o=function(e,t){var n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",e),document.body.appendChild(n),n.click(),document.body.removeChild(n)};t.createDownloadUrl=o,t.createDownloadBlob=function(e,t){var n=a.createObjectURL(new r(t));o(e,n),a.revokeObjectURL(n)}},"4sDh":function(e,t,n){var r=n("4uTw"),a=n("03A+"),o=n("Z0cm"),i=n("wJg7"),c=n("shjB"),s=n("9Nap");e.exports=function(e,t,n){for(var l=-1,u=(t=r(t,e)).length,d=!1;++l<u;){var p=s(t[l]);if(!(d=null!=e&&n(e,p)))break;e=e[p]}return d||++l!=u?d:!!(u=null==e?0:e.length)&&c(u)&&i(p,u)&&(o(e)||a(e))}},"4uTw":function(e,t,n){var r=n("Z0cm"),a=n("9ggG"),o=n("GNiM"),i=n("dt0z");e.exports=function(e,t){return r(e)?e:a(e,t)?[e]:o(i(e))}},"6ZRU":function(e,t,n){"use strict";var r=n("MVZn"),a=n.n(r),o=n("/MKj"),i={isOpen:!1,type:"alert",alertType:"alert",title:"",desc:"",onClose:function(){return null},onCancel:null,onConfirm:null,cancelText:void 0,confirmText:void 0,canCancel:!0,canConfirm:!0,canClose:!0},c=n("lwsE"),s=n.n(c),l=n("7W2i"),u=n.n(l),d=n("W8MJ"),p=n.n(d),f=n("a1gu"),h=n.n(f),m=n("Nsbk"),v=n.n(m),g=n("lSNA"),y=n.n(g),b=n("17x9"),w=n.n(b),E=n("q1tI"),S=n.n(E),C=n("6XO9"),x=(n("wfO3"),function(e){function t(){return s()(this,t),h()(this,v()(t).apply(this,arguments))}return p()(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.isOpen,r=e.type,a=e.alertType,o=e.title,i=e.desc,c=void 0===i?o:i,s=e.isHTML,l=e.onClose,u=void 0===l?function(){return t({type:"container:modal:close"})}:l,d=e.onCancel,p=void 0===d?function(){return null}:d,f=e.onConfirm,h=e.canClose,m=e.canCancel,v=e.canConfirm,g=e.cancelText,y=e.confirmText,b=m?function(){p&&p(),u&&u()}:void 0,w=v?function(){f&&f(),u&&u()}:void 0;return S.a.createElement(C.Modal,{isOpen:n,type:r,portalClassName:"global-alert-portal",title:o!==c&&o?o:I18N.reminder,onClose:function(){"function"==typeof p&&p(),u()},canClose:h,onCancel:b,onConfirm:w,cancelText:g,confirmText:y},s?S.a.createElement("p",{className:"desc",dangerouslySetInnerHTML:{__html:c}}):S.a.createElement("div",{className:"desc"},c),"prompt"===a&&S.a.createElement(C.FormLabel,{name:I18N.password},S.a.createElement(C.Input,{type:"password",className:"prompt-pwd"})))}}]),u()(t,e),t}(E.PureComponent));y()(y()(x,"propTypes",{dispatch:w.a.func,isOpen:w.a.bool,type:w.a.string,alertType:w.a.oneOf(["confirm","alert","prompt"]),onClose:w.a.func,onCancel:w.a.func,onConfirm:w.a.func,canClose:w.a.bool,canCancel:w.a.bool,canConfirm:w.a.bool,confirmText:w.a.string,cancelText:w.a.string,title:w.a.string,desc:w.a.any,isHTML:w.a.bool}),"defaultProps",{type:"alert"});var _={Alert:Object(o.connect)(function(e){return a()({},e.container.alert)})(x)};t.a={reducers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"container:modal:open":return a()({},r,{isOpen:!0});case"container:modal:close":return a()({},e,{isOpen:!1})}return e},containers:_}},"6acW":function(e,t,n){var r=n("dt0z"),a=n("gQMU");e.exports=function(e){return a(r(e).toLowerCase())}},"6nK8":function(e,t,n){var r=n("dVn5"),a=n("fo6e"),o=n("dt0z"),i=n("9NmV");e.exports=function(e,t,n){return e=o(e),void 0===(t=n?void 0:t)?a(e)?i(e):r(e):e.match(t)||[]}},"6x+O":function(e,t,n){"use strict";function r(){var e=document.createElement("div");return document.body.appendChild(e),e}function a(){var e=document.querySelector("#canvas").getBoundingClientRect(),t=document.querySelector(".mb-viewport").getBoundingClientRect();return{canvasTop:e.top,canvasLeft:e.left,canvasWidth:e.width,canvasHeight:e.height,screenTop:t.top,screenLeft:t.left,screenWidth:t.width,screenHeight:t.height}}function o(e){var t=e.getBoundingClientRect(),n=t.top,r=t.left,a=t.right,o=t.bottom,i=document.elementFromPoint((r+a)/2,(n+o)/2);return e.contains(i)}function i(){var e=document.getSelection();if(!(e.rangeCount>0))return{};for(var t={},n=e.getRangeAt(0).commonAncestorContainer;n&&"P"!==n.nodeName&&"text_editor"!==n.id;){if(1===n.nodeType)switch(n.nodeName){case"I":t.italic=!0;break;case"B":t.bold=!0;break;case"U":t.underline=!0;break;case"STRIKE":t.lineThrough=!0;break;case"FONT":t.tc=n.color;var r=n.style.backgroundColor;r&&(t.bg=MB.rgb2hex(r));break;case"SPAN":t.bg=MB.rgb2hex(n.style.backgroundColor)}n=n.parentNode}return t}n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return i})},"711d":function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},"740n":function(e,t,n){e.exports={scrollbar:"_1Su5P8hkspcsNxxqlCFN8Z"}},"79/T":function(e,t,n){var r=n("sgoq")(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});e.exports=r},"7GkX":function(e,t,n){var r=n("kekF")(Object.keys,Object);e.exports=r},"7Qib":function(e,t,n){"use strict";n.d(t,"d",function(){return v}),n.d(t,"a",function(){return g}),n.d(t,"e",function(){return y});var r=n("lSNA"),a=n.n(r),o=n("cJHP"),i=n.n(o),c=n("J4zp"),s=n.n(c),l=n("l00i"),u=n.n(l),d=n("u6S6"),p=n.n(d),f=n("79/T"),h=n.n(f),m=n("t3Un");function v(e){return e?{hidden:!0}:{}}function g(e){return u()(e).reduce(function(e,t){var n=s()(t,2),r=n[0],o=n[1];return i()(e,a()({},p()(r),o))},{})}function y(e){return u()(e).reduce(function(e,t){var n=s()(t,2),r=n[0],o=n[1];return i()(e,a()({},h()(r),o))},{})}n.d(t,"c",function(){return m.b}),n.d(t,"f",function(){return m.c}),n.d(t,"b",function(){return m.a})},"7bO/":function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"TASK",function(){return a.e}),n.d(r,"SAGA_ACTION",function(){return a.c}),n.d(r,"noop",function(){return a.r}),n.d(r,"is",function(){return a.n}),n.d(r,"deferred",function(){return a.i}),n.d(r,"arrayOfDeffered",function(){}),n.d(r,"createMockTask",function(){}),n.d(r,"cloneableGenerator",function(){}),n.d(r,"asEffect",function(){return c.c}),n.d(r,"CHANNEL_END",function(){return p});var a=n("Ev6p"),o=n("92lH"),i=n("udQi"),c=n("tw9P"),s=n("mbVZ"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var d="proc first argument (Saga function result) must be an iterator",p={toString:function(){return"@@redux-saga/CHANNEL_END"}},f={toString:function(){return"@@redux-saga/TASK_CANCEL"}},h={wildcard:function(){return a.o},default:function(e){return"symbol"===(void 0===e?"undefined":u(e))?function(t){return t.type===e}:function(t){return t.type===String(e)}},array:function(e){return function(t){return e.some(function(e){return m(e)(t)})}},predicate:function(e){return function(t){return e(t)}}};function m(e){return("*"===e?h.wildcard:a.n.array(e)?h.array:a.n.stringableFunc(e)?h.default:a.n.func(e)?h.predicate:h.default)(e)}var v=function(e){return{fn:e}};function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return a.r},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.r,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.r,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},y=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,b=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"anonymous",w=arguments[8];Object(a.g)(e,a.n.iterator,d);var E=Object(a.k)(U,Object(a.w)("[...effects]","all([...effects])")),S=h.sagaMonitor,C=h.logger,x=h.onError,_=C||a.p,k=function(e){var t=e.sagaStack;!t&&e.stack&&(t=-1!==e.stack.split("\n")[0].indexOf(e.message)?e.stack:"Error: "+e.message+"\n"+e.stack),_("error","uncaught at "+b,t||e.message||e)},M=Object(o.e)(t),T=Object.create(u);R.cancel=a.r;var N=function(e,t,n,r){var o,i;return n._deferredEnd=null,(o={})[a.e]=!0,o.id=e,o.name=t,"done",(i={}).done=i.done||{},i.done.get=function(){if(n._deferredEnd)return n._deferredEnd.promise;var e=Object(a.i)();return n._deferredEnd=e,n._isRunning||(n._error?e.reject(n._error):e.resolve(n._result)),e.promise},o.cont=r,o.joiners=[],o.cancel=I,o.isRunning=function(){return n._isRunning},o.isCancelled=function(){return n._isCancelled},o.isAborted=function(){return n._isAborted},o.result=function(){return n._result},o.error=function(){return n._error},o.setContext=function(e){Object(a.g)(e,a.n.object,Object(a.h)("task",e)),a.s.assign(T,e)},function(e,t){for(var n in t){var r=t[n];r.configurable=r.enumerable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n,r)}}(o,i),o}(y,b,e,w),O={name:b,cancel:function(){O.isRunning&&!O.isCancelled&&(O.isCancelled=!0,R(f))},isRunning:!0},j=function(e,t,n){var r=[],o=void 0,i=!1;function c(e){l(),n(e,!0)}function s(e){r.push(e),e.cont=function(s,l){i||(Object(a.t)(r,e),e.cont=a.r,l?c(s):(e===t&&(o=s),r.length||(i=!0,n(o))))}}function l(){i||(i=!0,r.forEach(function(e){e.cont=a.r,e.cancel()}),r=[])}return s(t),{addTask:s,cancelAll:l,abort:c,getTasks:function(){return r},taskNames:function(){return r.map(function(e){return e.name})}}}(0,O,L);function I(){e._isRunning&&!e._isCancelled&&(e._isCancelled=!0,j.cancelAll(),L(f))}return w&&(w.cancel=I),e._isRunning=!0,R(),N;function R(t,n){if(!O.isRunning)throw new Error("Trying to resume an already finished generator");try{var r=void 0;n?r=e.throw(t):t===f?(O.isCancelled=!0,R.cancel(),r=a.n.func(e.return)?e.return(f):{done:!0,value:f}):r=t===p?a.n.func(e.return)?e.return():{done:!0}:e.next(t),r.done?(O.isMainRunning=!1,O.cont&&O.cont(r.value)):D(r.value,y,"",R)}catch(e){O.isCancelled&&k(e),O.isMainRunning=!1,O.cont(e,!0)}}function L(t,n){e._isRunning=!1,M.close(),n?(t instanceof Error&&Object.defineProperty(t,"sagaStack",{value:"at "+b+" \n "+(t.sagaStack||t.stack),configurable:!0}),N.cont||(t instanceof Error&&x?x(t):k(t)),e._error=t,e._isAborted=!0,e._deferredEnd&&e._deferredEnd.reject(t)):(e._result=t,e._deferredEnd&&e._deferredEnd.resolve(t)),N.cont&&N.cont(t,n),N.joiners.forEach(function(e){return e.cb(t,n)}),N.joiners=null}function D(e,u){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",h=arguments[3],g=Object(a.v)();S&&S.effectTriggered({effectId:g,parentEffectId:u,label:d,effect:e});var y=void 0;function w(e,t){y||(y=!0,h.cancel=a.r,S&&(t?S.effectRejected(g,e):S.effectResolved(g,e)),h(e,t))}w.cancel=a.r,h.cancel=function(){if(!y){y=!0;try{w.cancel()}catch(e){k(e)}w.cancel=a.r,S&&S.effectCancelled(g)}};var C=void 0;return a.n.promise(e)?A(e,w):a.n.helper(e)?B(v(e),g,w):a.n.iterator(e)?P(e,g,b,w):a.n.array(e)?E(e,g,w):(C=c.c.take(e))?function(e,t){var n=e.channel,r=e.pattern,a=e.maybe;n=n||M;var i=function(e){return e instanceof Error?t(e,!0):Object(o.d)(e)&&!a?t(p):t(e)};try{n.take(i,m(r))}catch(e){return t(e,!0)}t.cancel=i.cancel}(C,w):(C=c.c.put(e))?function(e,t){var r=e.channel,o=e.action,c=e.resolve;Object(i.a)(function(){var e=void 0;try{e=(r?r.put:n)(o)}catch(e){if(r||c)return t(e,!0);k(e)}if(!c||!a.n.promise(e))return t(e);A(e,t)})}(C,w):(C=c.c.all(e))?U(C,g,w):(C=c.c.race(e))?function(e,t,n){var r=void 0,i=Object.keys(e),c={};i.forEach(function(t){var s=function(c,s){if(!r)if(s)n.cancel(),n(c,!0);else if(!Object(o.d)(c)&&c!==p&&c!==f){var u;n.cancel(),r=!0;var d=((u={})[t]=c,u);n(a.n.array(e)?[].slice.call(l({},d,{length:i.length})):d)}};s.cancel=a.r,c[t]=s}),n.cancel=function(){r||(r=!0,i.forEach(function(e){return c[e].cancel()}))},i.forEach(function(n){r||D(e[n],t,n,c[n])})}(C,g,w):(C=c.c.call(e))?function(e,t,n){var r=e.context,o=e.fn,i=e.args,c=void 0;try{c=o.apply(r,i)}catch(e){return n(e,!0)}return a.n.promise(c)?A(c,n):a.n.iterator(c)?P(c,t,o.name,n):n(c)}(C,g,w):(C=c.c.cps(e))?function(e,t){var n=e.context,r=e.fn,o=e.args;try{var i=function(e,n){return a.n.undef(e)?t(n):t(e,!0)};r.apply(n,o.concat(i)),i.cancel&&(t.cancel=function(){return i.cancel()})}catch(e){return t(e,!0)}}(C,w):(C=c.c.fork(e))?B(C,g,w):(C=c.c.join(e))?function(e,t){if(e.isRunning()){var n={task:N,cb:t};t.cancel=function(){return Object(a.t)(e.joiners,n)},e.joiners.push(n)}else e.isAborted()?t(e.error(),!0):t(e.result())}(C,w):(C=c.c.cancel(e))?function(e,t){e===a.d&&(e=N);e.isRunning()&&e.cancel();t()}(C,w):(C=c.c.select(e))?function(e,t){var n=e.selector,a=e.args;try{var o=n.apply(void 0,[r()].concat(a));t(o)}catch(e){t(e,!0)}}(C,w):(C=c.c.actionChannel(e))?function(e,n){var r=e.pattern,a=e.buffer,i=m(r);i.pattern=r,n(Object(o.c)(t,a||s.a.fixed(),i))}(C,w):(C=c.c.flush(e))?function(e,t){e.flush(t)}(C,w):(C=c.c.cancelled(e))?function(e,t){t(!!O.isCancelled)}(0,w):(C=c.c.getContext(e))?function(e,t){t(T[e])}(C,w):(C=c.c.setContext(e))?function(e,t){a.s.assign(T,e),t()}(C,w):w(e)}function A(e,t){var n=e[a.a];a.n.func(n)?t.cancel=n:a.n.func(e.abort)&&(t.cancel=function(){return e.abort()}),e.then(t,function(e){return t(e,!0)})}function P(e,a,o,i){g(e,t,n,r,T,h,a,o,i)}function B(e,o,c){var s=e.context,l=e.fn,u=e.args,d=e.detached,p=function(e){var t=e.context,n=e.fn,r=e.args;if(a.n.iterator(n))return n;var o,i,c=void 0,s=void 0;try{c=n.apply(t,r)}catch(e){s=e}return a.n.iterator(c)?c:s?Object(a.q)(function(){throw s}):Object(a.q)((o=void 0,i={done:!1,value:c},function(e){return o?{done:!0,value:e}:(o=!0,i)}))}({context:s,fn:l,args:u});try{Object(i.c)();var f=g(p,t,n,r,T,h,o,l.name,d?null:a.r);d?c(f):p._isRunning?(j.addTask(f),c(f)):p._error?j.abort(p._error):c(f)}finally{Object(i.b)()}}function U(e,t,n){var r=Object.keys(e);if(!r.length)return n(a.n.array(e)?[]:{});var i=0,c=void 0,s={},u={};r.forEach(function(t){var d=function(u,d){c||(d||Object(o.d)(u)||u===p||u===f?(n.cancel(),n(u,d)):(s[t]=u,++i===r.length&&(c=!0,n(a.n.array(e)?a.f.from(l({},s,{length:r.length})):s))))};d.cancel=a.r,u[t]=d}),n.cancel=function(){c||(c=!0,r.forEach(function(e){return u[e].cancel()}))},r.forEach(function(n){return D(e[n],t,n,u[n])})}}var y="runSaga(storeInterface, saga, ...args): saga argument must be a Generator function!";function b(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=void 0;a.n.iterator(e)?(i=e,e=t):(Object(a.g)(t,a.n.func,y),i=t.apply(void 0,r),Object(a.g)(i,a.n.iterator,y));var c=e,s=c.subscribe,l=c.dispatch,u=c.getState,d=c.context,p=c.sagaMonitor,f=c.logger,h=c.onError,m=Object(a.v)();p&&(p.effectTriggered=p.effectTriggered||a.r,p.effectResolved=p.effectResolved||a.r,p.effectRejected=p.effectRejected||a.r,p.effectCancelled=p.effectCancelled||a.r,p.actionDispatched=p.actionDispatched||a.r,p.effectTriggered({effectId:m,root:!0,parentEffectId:0,effect:{root:!0,saga:t,args:r}}));var v=g(i,s,Object(a.x)(l),u,d,{sagaMonitor:p,logger:f,onError:h},m,t.name);return p&&p.effectResolved(m,v),v}n("q09E"),n("oZtI");n.d(t,!1,function(){return b}),n.d(t,!1,function(){return o.a}),n.d(t,!1,function(){return o.c}),n.d(t,!1,function(){}),n.d(t,!1,function(){return s.a}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return a.j}),n.d(t,!1,function(){return a.a}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,!1,function(){return r});t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,n=void 0===t?{}:t,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["context"]),i=r.sagaMonitor,c=r.logger,s=r.onError;if(a.n.func(r))throw new Error("Saga middleware no longer accept Generator functions. Use sagaMiddleware.run instead");if(c&&!a.n.func(c))throw new Error("`options.logger` passed to the Saga middleware is not a function!");if(s&&!a.n.func(s))throw new Error("`options.onError` passed to the Saga middleware is not a function!");if(r.emitter&&!a.n.func(r.emitter))throw new Error("`options.emitter` passed to the Saga middleware is not a function!");function l(e){var t=e.getState,u=e.dispatch,d=Object(o.b)();return d.emit=(r.emitter||a.l)(d.emit),l.run=b.bind(null,{context:n,subscribe:d.subscribe,dispatch:u,getState:t,sagaMonitor:i,logger:c,onError:s}),function(e){return function(t){i&&i.actionDispatched&&i.actionDispatched(t);var n=e(t);return d.emit(t),n}}}return l.run=function(){throw new Error("Before running a Saga, you must mount the Saga middleware on the Store using applyMiddleware")},l.setContext=function(e){Object(a.g)(e,a.n.object,Object(a.h)("sagaMiddleware",e)),a.s.assign(n,e)},l}},"7eYF":function(e,t,n){"use strict";var r=n("RIqP"),a=n.n(r),o=n("MVZn"),i=n.n(o),c=n("o0o1"),s=n.n(c),l=n("fvjX"),u=n("WVP6"),d=n("7bO/"),p=n("/TnQ"),f=n("IV71"),h=n("zkrS"),m=n("J4zp"),v=n.n(m),g=n("upRB"),y={"entry:init:preview:scale":function(e){var t=e.getState,n=e.dispatch,r=t(),a=Object(g.a)(r);if(MB.isUIChina()&&"geely_center_control"===a.model)n({type:"preview:set:scale",payload:{scale:40}});else{var o,i=a.cid,c=(o=i,Number(MB.localStorageDelegate.getItem("preview_scale_".concat(o))));if(c)n({type:"preview:set:scale",payload:{scale:c}});else{var s=Object(g.c)(r),l=function(e){var t=e.cid,n=Project.find(t)||Template.find(t);return n.deviceShell()||n.defaultShell()||{top:0,left:0,width:n.width,height:n.height}}(a),u="landscape"===s.orientation?[l.height,l.width]:[l.width,l.height],d=v()(u,2),p=d[0],f=d[1],h=a.template?.8:1,m=window.innerWidth*h-500,y=window.innerHeight*h-56,b=100*Math.min((y-40)/f,(m-40)/p);n({type:"preview:set:scale",payload:{scale:Math.min(Math.max(b,20),100)}})}}},"entry:preview:set:scale":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload.scale;!function(e,t){MB.localStorageDelegate.setItem("preview_scale_".concat(e),t)}(r().model.current.projectCid,a),n({type:"preview:set:scale",payload:{scale:a}})},"entry:update:screen:state":function(e,t){var n=e.dispatch,r=t.payload,a=r.screen,o=r.stateCid,i=a.dup();i.state_cid=o,n({type:"screens:update-local",payload:i})},"entry:preview:set:canvas:offset":function(e,t){var n=e.getState,r=e.dispatch,a=t.payload.offset,o=n(),i=Object(g.c)(o),c=Object(g.b)(o),s=document.querySelector("#preview_scrollBar_viewport").getBoundingClientRect(),l=s.width,u=s.height,d=Math.max(3.5*l,i.width*c/100*2),p=Math.max(3.5*u,i.height*c/100*2),f=a.x,h=a.y;r({type:"preview:set:canvas:offset",payload:{offset:{x:f=-Math.max(Math.min(-f,d/2),-d/2),y:h=-Math.max(Math.min(-h,p/2),-p/2)}}})},"entry:update:scrollbar:viewport":function(e){var t=e.dispatch,n=document.querySelector("#preview_scrollBar_viewport");if(n){var r=n.getBoundingClientRect();t({type:"preview:scrollbar:viewport",payload:{width:r.width,height:r.height}})}}},b=i()({},y,{"entry:state:init":function(e){var t=e.dispatch;t({type:"user:set",payload:h.a.MB.user||null}),t({type:"teams:refresh"}),t({type:"widgets:refresh"}),t({type:"projects:refresh"}),t({type:"screens:refresh"}),t({type:"comments:refresh"}),t({type:"comment-threads:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:h.a.MB.currentProject,screen:h.a.MB.currentScreen}})},"entry:state:clear":function(e){e.dispatch},"entry:sync-runner:set-screen":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload.cid;n({type:"entry:current:set-screen",payload:{cid:a}}),"inspect"==r().container.previewSetting.toolbarActiveItem&&n({type:"SET_VISIBILITY_SCREEN",payload:{screenID:a}}),h.a.MB.runner.loadScreen(a)},"entry:refresh:team-related":function(e){var t=e.dispatch;t({type:"teams:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:h.a.MB.currentProject,screen:h.a.MB.currentScreen}})},"entry:refresh:project-related":function(e){var t=e.dispatch;t({type:"projects:refresh"}),t({type:"screens:refresh"}),t({type:"widgets:refresh"}),t({type:"comments:refresh"}),t({type:"comment-threads:refresh"}),t({type:"collaborators:refresh"}),t({type:"entry:add-mock-collaborator"}),t({type:"entry:current:set",payload:{project:h.a.MB.currentProject,screen:h.a.MB.currentScreen}})},"entry:listpage:toggle:order":function(e){var t,n=e.dispatch,r=e.getState,a=h.a.MB.preference(),o=r().container.listpage.ui.order;o?(t="asc"===o?"desc":"asc",a.app_order=t,a.lsave(),h.a.SpineModel.queueSave()):t=a.app_order,n({type:"container:listpage:set:order",payload:{order:t}})},"entry:focus-element":function(e,t){var n=e.dispatch,r=t.payload,a=r.focusType,o=r.element;return o&&setTimeout(function(){switch(a){case"normal":return o.focus&&o.focus();case"external":return n({type:"entry:webpack-interface:observer:call",payload:{key:"focus-method:request-focus",args:[o]}}),o.focus&&o.focus()}},100),!0},"entry:preview:select":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload.toolbarActiveItem,o=r(),i=o.container.previewSetting,c=o.model.user;if(a!=i.activeItem){var s="comment"==a||"inspect"==a?"immersive":"default";"comment"==a&&(h.a.MB.currentProject.limitation.commentable||MB.promptRenew("cant_comment",{role:h.a.MB.currentProject.owner_id!==c.id?h.a.MB.currentProject.team_cid?"team":"project":"user"})),"inspect"==a&&n({type:"SET_VISIBILITY_SCREEN",payload:{screenID:h.a.MB.currentScreen.cid}}),s!==h.a.MB.runner.mode&&(h.a.MB.runner.mode=s,setTimeout(function(){h.a.MB.runner.reload()})),n({type:"reducer:preview-toolbar:update",payload:{toolbarActiveItem:a}})}},"container:comment:select":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload.select,o=r(),i=o.model,c=i.comments,s=i.commentThreads,l=o.container,u=s.find(function(e){return e.cid===l.comment.select});u&&a!==l.comment.select&&!c.find(function(e){return e.thread_cid===u.cid})&&n({type:"entry:comment-threads:delete",payload:u})},"entry:preview:clear":function(e,t){var n=e.dispatch;h.a.MB.runner.mode="default",n({type:"reducer:preview-panel:reset"}),n({type:"container:layers:clear"})}}),w=n("eTac"),E=n.n(w),S=n("q1tI"),C=n.n(S),x=n("wCGR"),_=n("6XO9"),k=n("cJHP"),M=n.n(k),T=n("iVxW"),N=n.n(T),O=n("IT1M"),j=h.a.SpineModel,I={Team:"t",Project:"p",Combo:"c",Template:"t",Screen:"s",Collaborator:"co",Comment:"cm",CommentThread:"cmth",Widget:"w"},R=N()(I),L=R.reduce(function(e,t){return e[t]=j[t].attributes,e},{});L.Widget=a()(L.Widget).concat(["id"]);var D=R.reduce(function(e,t){var n=j[t],r=L[t],a=I[t],o=function(e,t){var r=e.find(function(e){return e.cid===t}),a=n.findByAttribute("cid",t);return{dataState:r,dataModel:a}};return e[t]={refreshStateList:function(e){return n.all().map(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.forEach(function(n){return t[n]=e[n]}),t}(e,{})})},saveState:function(e,t,n){var r=t.cid,a=o(e,r),i=a.dataState,c=a.dataModel;return i&&c?(c.lsave(!n),!n&&h.a.SpineModel.queueSave(),e):e},addState:function(e,t,r){var o=t.cid||h.a.SpineModel.requestCid(a);(function(e,t){var r=e.find(function(e){return e.cid===t}),a=n.findByAttribute("cid",t);return Boolean(r||a)})(e,o)&&(o=h.a.SpineModel.requestCid(a));var c=i()({},t,{cid:o});return new n(c).lsave(!r),!r&&h.a.SpineModel.queueSave(),O.Operation.arrayPush(e,c)},updateState:function(e,t,n){var r=t.cid,a=o(e,r),c=a.dataState,s=a.dataModel;return c&&s?(c=i()({},c,t),M()(s,c),s.lsave(!n),!n&&h.a.SpineModel.queueSave(),O.Operation.arrayFindSet(e,function(e){return e.cid===r},c)):e},deleteState:function(e,t,n){var r=t.cid,a=o(e,r),i=a.dataState,c=a.dataModel;return i&&c?(c.ldestroy(!n),!n&&h.a.SpineModel.queueSave(),O.Operation.arrayFindDelete(e,function(e){return e.cid===r})):e}},e},{}),A=function(e){return function(t,n,r){var a=n.cid,o=j.Project.findByAttribute("cid",a)?"Project":j.Template.findByAttribute("cid",a)?"Template":j.Combo.findByAttribute("cid",a)?"Combo":null;return D[o][e](t,n,r)}};D.ProjectAlike={refreshStateList:function(e){return a()(D.Project.refreshStateList()).concat(a()(D.Template.refreshStateList()),a()(D.Combo.refreshStateList()))},saveState:A("saveState"),addState:A("addState"),updateState:A("updateState"),deleteState:A("deleteState")};var P=D.Collaborator,B=Object(u.createStateStore)([]),U=B.getState,F=B.setState,z=B.wrapEntry,W=function(e,t){return z(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:collaborators:update",payload:e(n,i,t)})})},q={entryMap:{"collaborators:refresh":z(function(e,t,n){var r=t.dispatch,a=n&&n.payload;(e=P.refreshStateList(e,a,!1)).forEach(function(e){e.avatar||(e.avatar="/images/avatar.png")}),r({type:"reducer:collaborators:update",payload:e})}),"collaborators:add":W(P.addState,!1),"collaborators:add-local":W(P.addState,!0),"collaborators:update":W(P.updateState,!1),"collaborators:update-local":W(P.updateState,!0),"collaborators:delete":W(P.deleteState,!1),"collaborators:delete-local":W(P.deleteState,!0)},getState:U,setState:F},H=D.Comment,V=Object(u.createStateStore)([]),X=V.getState,Z=V.setState,G=V.wrapEntry,K=function(e,t){return G(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:comments:update",payload:e(n,i,t)})})},Y={entryMap:{"comments:refresh":K(H.refreshStateList,!1),"comments:add":K(H.addState,!1),"comments:add-local":K(H.addState,!0),"comments:update":K(H.updateState,!1),"comments:update-local":K(H.updateState,!0),"comments:delete":K(H.deleteState,!1),"comments:delete-local":K(H.deleteState,!0)},getState:X,setState:Z},J=D.CommentThread,Q=Object(u.createStateStore)([]),$=Q.getState,ee=Q.setState,te=Q.wrapEntry,ne=function(e,t){return te(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:comment-threads:update",payload:e(n,i,t)})})},re={entryMap:{"comment-threads:refresh":ne(J.refreshStateList,!1),"comment-threads:save":ne(J.saveState,!1),"comment-threads:add":ne(J.addState,!1),"comment-threads:add-local":ne(J.addState,!0),"comment-threads:update":ne(J.updateState,!1),"comment-threads:update-local":ne(J.updateState,!0),"comment-threads:delete":ne(J.deleteState,!1),"comment-threads:delete-local":ne(J.deleteState,!0)},getState:$,setState:ee},ae=D.ProjectAlike,oe=Object(u.createStateStore)([]),ie=oe.getState,ce=oe.setState,se=oe.wrapEntry,le=function(e,t){return se(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:projects:update",payload:e(n,i,t)})})},ue={entryMap:{"projects:refresh":le(ae.refreshStateList,!1),"projects:add":le(ae.addState,!1),"projects:add-local":le(ae.addState,!0),"projects:update":le(ae.updateState,!1),"projects:update-local":le(ae.updateState,!0),"projects:delete":le(ae.deleteState,!1),"projects:delete-local":le(ae.deleteState,!0)},getState:ie,setState:ce},de=D.Screen,pe=Object(u.createStateStore)([]),fe=pe.getState,he=pe.setState,me=pe.wrapEntry,ve=function(e,t){return me(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:screens:update",payload:e(n,i,t)})})},ge={entryMap:{"screens:refresh":ve(de.refreshStateList,!1),"screens:add":ve(de.addState,!1),"screens:add-local":ve(de.addState,!0),"screens:update":ve(de.updateState,!1),"screens:update-local":ve(de.updateState,!0),"screens:delete":ve(de.deleteState,!1),"screens:delete-local":ve(de.deleteState,!0)},getState:fe,setState:he},ye=D.Team,be=Object(u.createStateStore)([]),we=be.getState,Ee=be.setState,Se=be.wrapEntry,Ce=function(e,t){return Se(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:teams:update",payload:e(n,i,t)})})},xe={entryMap:{"teams:refresh":Ce(ye.refreshStateList,!1),"teams:add":Ce(ye.addState,!1),"teams:add-local":Ce(ye.addState,!0),"teams:update":Ce(ye.updateState,!1),"teams:update-local":Ce(ye.updateState,!0),"teams:delete":Ce(ye.deleteState,!1),"teams:delete-local":Ce(ye.deleteState,!0)},getState:we,setState:Ee},_e=D.Widget,ke=Object(u.createStateStore)([]),Me=ke.getState,Te=ke.setState,Ne=ke.wrapEntry,Oe=function(e,t){return Ne(function(n,r,a){var o=r.dispatch,i=a&&a.payload;o({type:"reducer:widgets:update",payload:e(n,i,t)})})},je={entryMap:{"widgets:refresh":Oe(_e.refreshStateList,!1),"widgets:add":Oe(_e.addState,!1),"widgets:add-local":Oe(_e.addState,!0),"widgets:update":Oe(_e.updateState,!1),"widgets:update-local":Oe(_e.updateState,!0),"widgets:delete":Oe(_e.deleteState,!1),"widgets:delete-local":Oe(_e.deleteState,!0)},getState:Me,setState:Te},Ie={id:null,name:"",email:"",avatar:"",plan:{state:"",type:"free",rawType:"free",collaboratorLimitation:0,daysLeft:""}},Re=Object(u.createStateStore)(Ie),Le=Re.getState,De=Re.setState,Ae=Re.wrapEntry;var Pe={entryMap:{"user:set":Ae(function(e,t,n){var r=t.dispatch,a=n.payload,o=a.id,i=void 0===o?null:o,c=a.name,s=void 0===c?"":c,l=a.email,u=void 0===l?"":l,d=a.avatar,p=void 0===d?"":d;r({type:"reducer:user:update",payload:O.Operation.objectMerge(e,{id:i,name:s,email:u,avatar:p,plan:function(e){var t=e.plan,n=e.state,r=e.limitation,a=e.days_left,o="active"===n;return{state:n||"",type:o&&t||"free",rawType:t||"free",collaboratorLimitation:o&&r||0,daysLeft:a||""}}(a)})})}),"user:clear":Ae(function(e,t,n){(0,t.dispatch)({type:"reducer:user:update",payload:Ie})})},getState:Le,setState:De},Be=Object(u.createStateStore)({teamCid:null,projectCid:null,screenCid:null,userRole:"guest"}),Ue=Be.getState,Fe=Be.setState,ze={"current:set":(0,Be.wrapEntry)(function(e,t,n){var r,a=t.dispatch,o=n.payload,i=o.project,c=o.screen,s=o.userCollaborator;a({type:"reducer:current:update",payload:{teamCid:i&&i.team_cid||null,projectCid:i&&i.cid||null,screenCid:c&&c.cid||null,userRole:(r=s&&s.role,We.has(r)?r:"guest")}})})},We=new E.a(["owner","admin","editor","viewer"]);var qe={entryMap:ze,getState:Ue,setState:Fe},He=n("rVSK"),Ve=n.n(He);function Xe(e){return JSON.parse(h.a.Storage.getItem("".concat(e,"_commentTick"))||"{}")}function Ze(e,t){h.a.Storage.setItem("".concat(e,"_commentTick"),Ve()(t))}function Ge(e,t){var n=Xe(e);n[t]=Math.ceil(.001*Date.now()+2),Ze(e,n)}function Ke(e,t,n){0!==n&&(e[t]=(e[t]||0)+n)}var Ye=Object(u.createStateStore)({projectCid:null,unreadCommentMap:{},unreadCountThreadMap:{},unreadCountScreenMap:{}}),Je=Ye.getState,Qe=Ye.setState,$e=Ye.wrapEntry,et={entryMap:{"unread-comment:init-for-project":$e(function(e,t,n){var r=t.dispatch,a=n.payload,o=a.projectCid,i=a.commentThreadList,c=a.commentList,s=Xe(o),l={},u={};i.forEach(function(e){var t=e.cid,n=e.screen_cid;u[t]=n,l[n]=s[n]});var d={},p={},f={};c.forEach(function(e){var t=e.cid,n=e.thread_cid,r=e.updated_at;(l[u[n]]||0)>=r||(d[t]=!0,Ke(p,n,1))}),i.forEach(function(e){var t=e.cid,n=e.screen_cid;return Ke(f,n,p[t]||0)}),Ze(o,l),function(){for(var e=.001*Date.now()-2592e3,t=[],n=function(n,r){var a=h.a.Storage.key(n);if(!a.endsWith("_commentTick"))return"continue";var o=JSON.parse(h.a.Storage.getItem(a)||"{}"),i=N()(o);i.forEach(function(t){o[t]<=e&&delete o[t]});var c=N()(o);0===c.length?t.push(a):i.length!==c.length&&h.a.Storage.setItem(a,Ve()(o))},r=0,a=h.a.Storage.length;r<a;r++)n(r);t.forEach(function(e){return h.a.Storage.removeItem(e)})}(),r({type:"reducer:unread-comment:update",payload:{projectCid:o,unreadCommentMap:d,unreadCountThreadMap:p,unreadCountScreenMap:f}})}),"unread-comment:set-unread":$e(function(e,t,n){var r=t.dispatch,a=n.payload,o=a.commentCid,i=a.threadCid,c=a.screenCid,s=e.unreadCommentMap,l=e.unreadCountThreadMap,u=e.unreadCountScreenMap;s[o]||(r({type:"reducer:unread-comment:update",payload:O.Operation.objectMerge(e,{unreadCommentMap:O.Operation.objectSet(s,o,!0),unreadCountThreadMap:O.Operation.objectSet(l,i,(l[i]||0)+1),unreadCountScreenMap:O.Operation.objectSet(u,c,(u[c]||0)+1)})}),Ge(e.projectCid,c))}),"unread-comment:set-read":$e(function(e,t,n){var r=t.dispatch,a=n.payload.screenCid,o=e.unreadCountScreenMap;r({type:"reducer:unread-comment:update",payload:O.Operation.objectMerge(e,{unreadCountScreenMap:O.Operation.objectDelete(o,a)})}),Ge(e.projectCid,a)})},getState:Je,setState:Qe},tt=i()({},q.entryMap,Y.entryMap,re.entryMap,ue.entryMap,ge.entryMap,xe.entryMap,je.entryMap,Pe.entryMap,qe.entryMap,et.entryMap,{"entry:add-mock-collaborator":function(e){var t=e.dispatch,n=xe.getState(),r=ue.getState(),a=q.getState(),o=new E.a(a.map(function(e){return e.cid})),i=function(e,n){var r="co_MOCK_".concat(e.cid);o.has(r)||(t({type:"collaborators:add-local",payload:{cid:r,role:"owner",user_id:e.owner_id,name:e.owner_name,email:e.owner_email||"email_MOCK_".concat(e.owner_id),avatar:e.owner_avatar,team_cid:n?e.cid:null,project_cid:n?null:e.cid}}),0)};n.forEach(function(e){return i(e,!0)}),r.forEach(function(e){return i(e,!1)})},"entry:current:set":function(e,t){var n=e.dispatch,r=t.payload,a=r.project,o=r.screen,i=qe.getState(),c=a&&a.cid||i.projectCid,s=o&&o.cid||i.screenCid;n({type:"current:set",payload:{project:a=ue.getState().find(function(e){return e.cid===c}),screen:o=ge.getState().find(function(e){return e.cid===s}),userCollaborator:a&&function(e,t){var n=Pe.getState();return n&&q.getState().find(function(r){return r.user_id===n.id&&(r.project_cid===e||r.team_cid===t)})}(a.cid,a.team_cid)}})},"entry:current:set-screen":function(e,t){var n=e.dispatch,r=t.payload.cid,a=ge.getState().find(function(e){return e.cid===r});if(!a)return console.warn("[entry:current:set-screen] non exist screen with cid: ".concat(r));n({type:"entry:current:set",payload:{screen:a}})},"entry:unread-comment:init":function(e,t){var n=e.dispatch,r=qe.getState(),a=r.userRole,o=r.projectCid;"guest"!==a&&n({type:"unread-comment:init-for-project",payload:{projectCid:o,commentThreadList:re.getState(),commentList:Y.getState()}})},"entry:comment-threads:add":function(e,t){var n=e.getState,r=e.dispatch,a=t.payload,o=a.top,i=a.left,c=a.message,s=a.cancelSelect,l=Pe.getState(),u=qe.getState().screenCid,d=100/Object(g.b)(n()),p=.001*Date.now(),f=h.a.SpineModel.requestCid("cmth");r({type:c?"comment-threads:add":"comment-threads:add-local",payload:{cid:f,top:Math.round(o*d),left:Math.round(i*d),screen_cid:u,user_id:l.id,created_at:p,updated_at:p}}),c&&r({type:"comments:add",payload:{thread_cid:f,message:c,user_id:l.id,created_at:p,updated_at:p}}),r({type:"container:comment:select",payload:{select:s?null:f}})},"entry:comment-threads:update":function(e,t){var n=e.dispatch,r=e.getState,a=t.payload,o=a.cid,i=a.top,c=a.left,s=void 0===Y.getState().find(function(e){return e.thread_cid===o}),l=.001*Date.now(),u=100/Object(g.b)(r());n({type:s?"comment-threads:update-local":"comment-threads:update",payload:{cid:o,top:Math.round(i*u),left:Math.round(c*u),updated_at:l}})},"entry:comment-threads:delete":function(e,t){var n=e.dispatch,r=t.payload.cid;n({type:"comment-threads:delete",payload:{cid:r}}),Y.getState().forEach(function(e){return e.thread_cid===r&&n({type:"comments:delete-local",payload:e})})},"entry:comments:add":function(e,t){var n=e.dispatch,r=t.payload,a=r.thread_cid,o=r.message,i=Pe.getState(),c=.001*Date.now();n({type:"comment-threads:save",payload:{cid:a}}),n({type:"comments:add",payload:{thread_cid:a,message:o,user_id:i.id,created_at:c,updated_at:c}}),n({type:"container:comment:select",payload:{select:null}})},"entry:comments:update":function(e,t){var n=e.dispatch,r=t.payload;n({type:"comments:update",payload:{cid:r.cid,message:r.message,updated_at:.001*Date.now()}})},"entry:state:push-data":function(e,t){var n=e.dispatch,r=t.payload,a=r.pushType,o=r.action,i=r.data;switch(a){case"comment-threads":var c=re.getState().find(function(e){return e.cid===i.cid});"update"!==o||c?"update"===o&&c?n({type:"comment-threads:update-local",payload:i}):"destroy"===o&&c&&(n({type:"comment-threads:delete-local",payload:i}),Y.getState().forEach(function(e){return e.thread_cid===i.cid&&n({type:"comments:delete-local",payload:e})})):n({type:"comment-threads:add-local",payload:i});break;case"comments":var s=Y.getState().find(function(e){return e.cid===i.cid});"update"!==o||s?"update"===o&&s?n({type:"comments:update-local",payload:i}):"destroy"===o&&s&&n({type:"comments:delete-local",payload:i}):n({type:"comments:add-local",payload:i});var l=qe.getState().screenCid,u=re.getState().find(function(e){return e.cid===i.thread_cid});u&&u.screen_cid===l&&n({type:"unread-comment:set-unread",payload:{commentCid:i.cid,threadCid:u.cid,screenCid:l}})}},"entry:projects:delete":function(e,t){var n=e.dispatch,r=t.payload,a=Pe.getState(),o=r.owner_id===a.id||r.canAdmin()&&r.team_cid,i=o?I18N.del_app_title:I18N.exit_app_title,c=[C.a.createElement("p",{key:"1"},C.a.createElement(x.a,{variableMap:{verb:o?"delete":"leave",noun:"app",ugn:C.a.createElement(_.AppName,{name:r.name,withQuote:!0,withQuestionMark:"en"===MBLocale})}})),o&&C.a.createElement("p",{key:"2",className:"desc tertiary",dangerouslySetInnerHTML:{__html:I18N.del_app_desc_more}})];n({type:"container:modal:open",payload:{title:i,desc:c,canCancel:!0,canConfirm:!0,onConfirm:function(){if(o)n({type:"projects:delete",payload:r});else{var e=q.getState().find(function(e){return e.project_cid===r.cid&&e.user_id===a.id});n({type:"collaborators:delete",payload:e}),n({type:"projects:delete-local",payload:r})}h.a.SpineModel.queueSave()}}})},"entry:teams:delete":function(e,t){var n=e.dispatch,r=t.payload,a=Pe.getState(),o=r.owner_id===a.id;if(o&&r.cprojects().length>0)return n({type:"container:modal:open",payload:{title:I18N.warning,desc:I18N.delete_projects_first,canCancel:!1,canConfirm:!0}});var i=C.a.createElement(x.a,{variableMap:{verb:o?"delete":"leave",noun:"team",ugn:C.a.createElement(_.TeamName,{name:r.name,withQuote:!0,withQuestionMark:"en"===MBLocale})}});n({type:"container:modal:open",payload:{title:o?I18N.del_team_title:I18N.exit_team_title,desc:i,canCancel:!0,canConfirm:!0,onConfirm:function(){if(o)n({type:"teams:delete",payload:r});else{var e=q.getState().find(function(e){return e.team_cid===r.cid&&e.user_id===a.id});n({type:"collaborators:delete",payload:e}),n({type:"teams:delete-local",payload:r})}}}})}});function nt(e,t){var n=t.getState,r=t.setState,a=n();return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,o=arguments.length>1?arguments[1]:void 0;return o.type!==e?t:(r(o.payload||t),n())}}var rt={collaborators:nt("reducer:collaborators:update",q),comments:nt("reducer:comments:update",Y),commentThreads:nt("reducer:comment-threads:update",re),projects:nt("reducer:projects:update",ue),screens:nt("reducer:screens:update",ge),teams:nt("reducer:teams:update",xe),widgets:nt("reducer:widgets:update",je),user:Object(u.createStateStoreReducer)("reducer:user:update",Pe),current:Object(u.createStateStoreReducer)("reducer:current:update",qe),unreadComment:Object(u.createStateStoreReducer)("reducer:unread-comment:update",et)},at=Object(p.composeWithDevTools)({});t.a=function(e){var t=e.viewMap,n=e.containerReducerMap,r=e.sagaMap,o=e.extendCallback,c=new f.a;if(t)for(var p in t)c.setView(p,t[p]);var h=function(e){var t,n=e.entryMap,r=e.reducerMap,a=e.sagaMap,o=Object(u.createReduxEntry)(),i=o.middleware;(0,o.setEntryMap)(n);var c=[i];a&&(t=Object(d.a)(),c.push(t));var p=Object(l.createStore)(Object(l.combineReducers)(r),at(l.applyMiddleware.apply(void 0,c)));if(a){var f=function(e){t.run(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,a[e]();case 3:t.next=0;break;case 5:case"end":return t.stop()}},t,this)}))};for(var h in a)f(h)}return{store:p}}({initialState:{model:{},container:{}},entryMap:i()({},tt,b,{"entry:webpack-interface:view:call":function(e,t){var n=t.payload;setTimeout(function(){return c.callViewMethod.apply(c,[n.name,n.method].concat(a()(n.args||{})))},0)}}),reducerMap:{model:Object(l.combineReducers)(rt),container:Object(l.combineReducers)(n)},sagaMap:r}).store;return c.setStore(h),o&&o(c),c}},"7tbW":function(e,t,n){var r=n("LGYb");e.exports=function(e){return e&&e.length?r(e):[]}},"87hQ":function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void a(e)}n.done?r(i):Promise.resolve(i).then(c,s)}function c(e){i("next",e)}function s(e){i("throw",e)}c()})}}var a=window,o=a.fetch,i=a.FileReader,c=a.URL,s=function(){var e=r(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return n=e.sent,e.next=5,n.blob();case 5:return r=e.sent,e.abrupt("return",c.createObjectURL(r));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.dataUrlToBlobUrl=s;var l=function(e){return new Promise(function(t){var n=new i;n.addEventListener("load",function(){return t(n.result)},!1),n.readAsDataURL(e)})};t.blobToDataUrl=l;var u={method:"GET",cache:"default",mode:"cors",credentials:"same-origin"};t.setFetchOption=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){n(e,t,r[t])})}return e}({},u,e)};var d={},p={};t.resetFetchCache=function(){d={},p={}},t.fetchTextWithCache=function(e){return d[e]||(d[e]=o(e,u).then(function(e){return e.text()})),d[e]};var f=function(e){return p[e]||(p[e]=o(e,u).then(function(e){return e.blob()})),p[e]};t.fetchBlobWithCache=f;var h=function(){var e=r(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,f(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.fetchDataUrlWithCache=h},"92lH":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return p}),n.d(t,"e",function(){return f});var r=n("Ev6p"),a=n("mbVZ"),o=n("udQi"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c={type:"@@redux-saga/CHANNEL_END"},s=function(e){return e&&"@@redux-saga/CHANNEL_END"===e.type};function l(){var e=[];return{subscribe:function(t){return e.push(t),function(){return Object(r.t)(e,t)}},emit:function(t){for(var n=e.slice(),r=0,a=n.length;r<a;r++)n[r](t)}}}var u="invalid buffer passed to channel factory function",d="Saga was provided with an undefined action";function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a.none(),n=arguments[2];arguments.length>2&&Object(r.g)(n,r.n.func,"Invalid match function passed to eventChannel");var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.a.fixed(),t=!1,n=[];function o(){if(t&&n.length)throw Object(r.m)("Cannot have a closed channel with pending takers");if(n.length&&!e.isEmpty())throw Object(r.m)("Cannot have pending takers with non empty buffer")}return Object(r.g)(e,r.n.buffer,u),{take:function(a){o(),Object(r.g)(a,r.n.func,"channel.take's callback must be a function"),t&&e.isEmpty()?a(c):e.isEmpty()?(n.push(a),a.cancel=function(){return Object(r.t)(n,a)}):a(e.take())},put:function(a){if(o(),Object(r.g)(a,r.n.notUndef,d),!t){if(!n.length)return e.put(a);for(var i=0;i<n.length;i++){var c=n[i];if(!c[r.b]||c[r.b](a))return n.splice(i,1),c(a)}}},flush:function(n){o(),Object(r.g)(n,r.n.func,"channel.flush' callback must be a function"),t&&e.isEmpty()?n(c):n(e.flush())},close:function(){if(o(),!t&&(t=!0,n.length)){var e=n;n=[];for(var r=0,a=e.length;r<a;r++)e[r](c)}},get __takers__(){return n},get __closed__(){return t}}}(t),i=function(){o.__closed__||(l&&l(),o.close())},l=e(function(e){s(e)?i():n&&!n(e)||o.put(e)});if(o.__closed__&&l(),!r.n.func(l))throw new Error("in eventChannel: subscribe should return a function to unsubscribe");return{take:o.take,flush:o.flush,close:i}}function f(e){var t=p(function(t){return e(function(e){e[r.c]?t(e):Object(o.a)(function(){return t(e)})})});return i({},t,{take:function(e,n){arguments.length>1&&(Object(r.g)(n,r.n.func,"channel.take's matcher argument must be a function"),e[r.b]=n),t.take(e)}})}},"980g":function(e,t,n){e.exports=n("nhzr")},"9DAG":function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("7W2i"),i=n.n(o),c=n("W8MJ"),s=n.n(c),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=n("lSNA"),h=n.n(f),m=n("17x9"),v=n.n(m),g=n("q1tI"),y=n.n(g),b=n("MVZn"),w=n.n(b),E=n("eTac"),S=n.n(E),C=n("0k54"),x=n("jybS");var _=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return s()(t,[{key:"render",value:function(){var e=this.props,t=e.treeData,n=e.top,r=e.left,a=e.isSnapshot,o=t.widget,i=o.v&&Link.find(o.link_cids),c=i?i.cid:"",s=i&&"tap"!==i.gesture?i.gesture:"",l=o.mainState().cid,u="ppanel panel".concat(i?" clickable":""),d=function(e,t,n,r){var a={left:r,width:e.width,height:e.height,zIndex:e.z};if(t){if(e.primary_fixed?(a.position="fixed",e.primary_fixed===Widget.FIXED_TYPE.bottom?a.bottom=e.cs().height-(n+e.height):a.top=n):a.top=n,e.v){var o=e.mainState();a.pointerEvents=e.width<o.width||e.height<o.height?"auto":"",a.opacity=1}else a.pointerEvents="none",a.opacity=0;a.overflow=MB.isPhantom()?"hidden":""}else a.top=e.top,a.left=e.left,a.opacity=e.v?1:.4,a.overflow="hidden";return a}(o,!0,n,r);return y.a.createElement("div",{"data-cid":o.cid,"data-link_cid":c,className:u,id:"panel".concat(o.cid,"p"),style:d},t.children.map(function(e){return y.a.createElement(k,{key:e.cid,panel_cid:o.cid,treeData:e,isActive:e.cid===l,isSnapshot:a})}),y.a.createElement("div",{className:"region gesture ".concat(s)}))}}]),i()(t,e),t}(g.PureComponent);h()(_,"propTypes",{treeData:v.a.object,top:v.a.number,left:v.a.number,isSnapshot:v.a.bool});var k=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return s()(t,[{key:"render",value:function(){var e=this.props,t=e.treeData,n=e.panel_cid,r=e.isActive,a=e.isSnapshot,o=t.widget,i="state".concat(n).concat(o.cid,"p"),c=r?"pstate state active":"pstate state",s=o.bgimage?"url(".concat(o.getRealBgImage(),")"):"",l={backgroundColor:o.bgcolor,width:o.w(),height:o.h(),backgroundImage:s};return y.a.createElement("div",{id:i,className:c,"data-cid":o.cid,style:l},y.a.createElement("div",{className:"pwidgets"},y.a.createElement("div",{className:"pscontainer"},t.children.map(function(e){return y.a.createElement(T,{key:e.cid,treeData:e,offSetX:0,offSetY:0,isSnapshot:a})}))))}}]),i()(t,e),t}(g.PureComponent);h()(k,"propTypes",{treeData:v.a.object,panel_cid:v.a.string,isActive:v.a.bool,isSnapshot:v.a.bool});var M=new S.a(["pg","sticky","lr","webpage"]),T=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return s()(t,[{key:"render",value:function(){var e=this.props,n=e.treeData,r=e.offSetX,a=e.offSetY,o=e.isSnapshot,i=n.cid,c=n.type,s=n.children,l=n.widget;if(o&&M.has(l.name))return null;var u=Object(C.f)(n),d=u.minX,p=u.minY,f=u.maxX,h=u.maxY,m=p-a,v=d-r;if("group"===c){var g=l.primary_fixed===Widget.FIXED_TYPE.bottom,b=w()({left:v,top:g?"":m,bottom:g?l.cs().height-h:"",width:f-d,height:h-p},function(e,t){var n,r,a;return!MB.isPhantom()&&"none"!=e.ani_name&&e.v&&(r=e.ani_count,e.ani_delay&&"0"!=e.ani_delay&&(n=e.ani_delay),e.ani_duration&&"0"!=e.ani_duration&&(a=e.ani_duration)),{position:e.primary_fixed?"fixed":"absolute",zIndex:e.z,opacity:e.v?"":0,transform:e.ro?"rotate(".concat(e.ro,"deg)"):"",animationDelay:n,animationDuration:a,animationIterationCount:r}}(l)),E=function(e){var t="group";return!MB.isPhantom()&&"none"!=e.ani_name&&e.v&&(t+=" animated ".concat(e.ani_name)),Link.exists(e.link_cids)&&(t+=" clickable"),t}(l),S=Link.exists(l.link_cids)?l.link_cids:"",k=l.v&&Link.find(l.link_cids),T=k&&"tap"!==k.gesture?k.gesture:"";return y.a.createElement("div",{"data-cid":i,"data-link_cid":S,className:E,style:b},s.map(function(e){return y.a.createElement(t,{key:e.cid,treeData:e,offSetX:d,offSetY:p,isSnapshot:o})}),y.a.createElement("div",{className:"region gesture ".concat(T)}))}return"panel"===c?y.a.createElement(_,{treeData:n,top:m,left:v,isSnapshot:o}):y.a.createElement(x.a,{widget:l,postfix:"p",top:m,left:v})}}]),i()(t,e),t}(g.PureComponent);h()(T,"propTypes",{treeData:v.a.object,offSetX:v.a.number,offSetY:v.a.number,isSnapshot:v.a.bool}),n.d(t,"a",function(){return N});var N=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return s()(t,[{key:"render",value:function(){var e=this.props,t=e.widgetTreeData,n=e.isSnapshot;return t.children.map(function(e){return y.a.createElement(T,{key:e.cid,treeData:e,offSetX:0,offSetY:0,isSnapshot:n})})}}]),i()(t,e),t}(g.PureComponent);h()(N,"propTypes",{widgetTreeData:v.a.object,isSnapshot:v.a.bool})},"9Nap":function(e,t){e.exports=function(e){return e}},"9NmV":function(e,t){var n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",r="["+n+"]",a="\\d+",o="[\\u2700-\\u27bf]",i="[a-z\\xdf-\\xf6\\xf8-\\xff]",c="[^\\ud800-\\udfff"+n+a+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",u="[A-Z\\xc0-\\xd6\\xd8-\\xde]",d="(?:"+i+"|"+c+")",p="(?:"+u+"|"+c+")",f="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",h="[\\ufe0e\\ufe0f]?"+f+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",s,l].join("|")+")[\\ufe0e\\ufe0f]?"+f+")*"),m="(?:"+[o,s,l].join("|")+")"+h,v=RegExp([u+"?"+i+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[r,u,"$"].join("|")+")",p+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[r,u+d,"$"].join("|")+")",u+"?"+d+"+(?:['’](?:d|ll|m|re|s|t|ve))?",u+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,m].join("|"),"g");e.exports=function(e){return e.match(v)||[]}},"9ggG":function(e,t,n){var r=n("Z0cm"),a=n("/9aa"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!a(e))||i.test(e)||!o.test(e)||null!=t&&e in Object(t)}},"9gsH":function(e,t,n){},An9T:function(e,t,n){e.exports={shell:"xQWL5y1StSdX9vRfMCP2i"}},CMye:function(e,t,n){var r=n("GoyQ");e.exports=function(e){return e==e&&!r(e)}},CUi3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayActMap=t.objectActMap=t.ArrayOf=t.ObjectAs=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n("JGuq"),o=n("OBS2"),i=a.Operation.objectSet,c=a.Operation.objectDelete,s=a.Operation.objectMerge,l=a.Operation.arraySet,u=a.Operation.arrayDelete,d=a.Operation.arrayInsert,p=a.Operation.arrayPush,f=a.Operation.arrayUnshift,h=a.Operation.arrayPop,m=a.Operation.arrayShift,v=a.Operation.arrayConcat,g=a.Operation.arrayMatchPush,y=a.Operation.arrayMatchDelete,b=a.Operation.arrayMatchMove,w=a.Operation.arrayFindPush,E=a.Operation.arrayFindDelete,S=a.Operation.arrayFindMove,C=a.Operation.arrayFindSet,x={set:function(e,t){var n=t.key,r=t.value;return i(e,n,r)},delete:function(e,t){var n=t.key;return c(e,n)},merge:function(e,t){var n=t.merge;return s(e,n)}},_={set:function(e,t){var n=t.index,r=t.value;return l(e,n,r)},delete:function(e,t){var n=t.index;return u(e,n)},insert:function(e,t){var n=t.index,r=t.value;return d(e,n,r)},push:function(e,t){var n=t.value;return p(e,n)},pop:function(e,t){return h(e)},shift:function(e,t){return m(e)},unshift:function(e,t){var n=t.value;return f(e,n)},concat:function(e,t){var n=t.concat;return v(e,n)},matchPush:function(e,t){var n=t.value;return g(e,n)},matchDelete:function(e,t){var n=t.value;return y(e,n)},matchMove:function(e,t){var n=t.index,r=t.value;return b(e,n,r)},findPush:function(e,t){var n=t.find,r=t.value;return w(e,n,r)},findDelete:function(e,t){var n=t.find;return E(e,n)},findMove:function(e,t){var n=t.find,r=t.index;return S(e,n,r)},findSet:function(e,t){var n=t.find,r=t.value;return C(e,n,r)}};t.ObjectAs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new o.ObjectScheme(e,r({},t),r({},x,n))},t.ArrayOf=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new o.ArrayScheme(e,[t],r({},_,n))},t.objectActMap=x,t.arrayActMap=_},DNkW:function(e,t,n){var r=n("93I4"),a=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&a(e)===e}},DdHt:function(e,t,n){"use strict";n.d(t,"f",function(){return p}),n.d(t,"i",function(){return f}),n.d(t,"g",function(){return m}),n.d(t,"h",function(){return v}),n.d(t,"b",function(){return g}),n.d(t,"d",function(){return y}),n.d(t,"a",function(){return b}),n.d(t,"c",function(){return w}),n.d(t,"e",function(){return E});var r=n("SA+Z"),a=n.n(r),o=n("Kgbp"),i=n.n(o),c=n("eTac"),s=n.n(c),l=n("cl8F"),u=n("ZXhj"),d=["top","left","width","height"];function p(e){var t=[];return e.forEach(function(e){return e.gid&&!t.includes(e.gid)&&t.push(e.gid)}),t}function f(e){var t=new s.a;return e.forEach(function(e){return e.link_cids&&t.add(e.link_cids)}),i()(t)}function h(e){var t=[];return e.forEach(function(e){var n=e.gid||e.cid;t.includes(n)||t.push(n)}),t}function m(e){return e.map(function(e){return"panel"===e.name?Template.find(e.template_cid).name:I18N.w[e.name]})}function v(e){var t=e.map(function(e){return e.rect()});return Object(u.a)(t)}function g(e){return h(e).length>1}function y(e){return e.some(function(e){return"group"===e.name})}function b(e){return h(e).length>2}function w(e){return 0!==e.length&&(1!==e.length||!e[0].locked&&/w|e/.test(e[0].zoomable))}function E(e,t){if(0===e.length)return"";var n=t.split(":"),r=a()(n),o=r[0],i=r.slice(1);if(d.includes(o)&&e.length>1)return v(e)[o];var c=e.find(function(e){return e.inspectables().includes(o)});if(c){var s;if(i.length>0){var u=JSON.parse(E([c],o));s=i.reduce(function(e,t){return e[t]},u)}else s=c[o];return s||0===s?s:function(e,t){var n=e[0];if(n){var r="".concat(n.name,"_").concat(MB.currentProject.device),a=n.name,o=l.a[r]||l.a[a];if(o&&o[t])return o[t]}return l.a[t]||""}(e,o)}}},DqDi:function(e,t,n){"use strict";n.d(t,"c",function(){return N}),n.d(t,"a",function(){return O}),n.d(t,"b",function(){return j});var r=n("PJYZ"),a=n.n(r),o=n("lSNA"),i=n.n(o),c=n("lwsE"),s=n.n(c),l=n("7W2i"),u=n.n(l),d=n("W8MJ"),p=n.n(d),f=n("a1gu"),h=n.n(f),m=n("Nsbk"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),E=n("M8nv"),S=n.n(E),C=n("i6OX"),x=n("UbMB"),_=n.n(x),k=n("G916"),M=n.n(k),T=_.a.bind(M.a);var N=function(e){function t(){return s()(this,t),h()(this,v()(t).apply(this,arguments))}return p()(t,[{key:"render",value:function(){var e=this.props,t=e.activeIndex,n=e.hideBorder,r=e.className,a=e.children,o=e.onTabChange,i=function(e,t,n){var r=0===e,a=e===t-1;return{transform:"translateX(".concat(100*e,"%)"),borderLeftColor:n&&r?"transparent":"",borderRightColor:n&&a?"transparent":""}}(t,b.Children.count(a),n);return w.a.createElement("ol",{className:T("nav",r)},b.Children.map(a,function(e,n){var r={index:n,active:n===t,BgStyle:0===n?i:null,onClick:o};return w.a.cloneElement(e,r)}))}}]),u()(t,e),t}(b.Component);N.propTypes={className:y.a.string,activeIndex:y.a.number,hideBorder:y.a.bool,children:y.a.array,onTabChange:y.a.func},N.defaultProps={hideBorder:!1,activeIndex:0};var O=function(e){function t(e){var n;return s()(this,t),n=h()(this,v()(t).call(this,e)),i()(i()(i()(i()(a()(a()(n)),"handleClick",function(e){var t=n.props,r=t.index,a=t.active,o=t.onClick;a?n.toggleDropDown(e):o(r)}),"toggleDropDown",function(e){e.stopPropagation();var t=n.body.getBoundingClientRect();n.setState({dropDownOpen:!n.state.dropDownOpen,top:t.bottom,left:(t.left+t.right)/2})}),"handleDocClick",function(e){n.state.dropDownOpen&&n.body&&!n.body.contains(e.target)&&n.setState({dropDownOpen:!1})}),"handleClose",function(){n.setState({dropDownOpen:!1})}),n.state={dropDownOpen:!1},n}return p()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.index,r=t.active,a=t.icon,o=t.label,i=t.title,c=t.BgStyle,s=t.DropDown,l=this.state,u=l.dropDownOpen,d=l.top,p=l.left,f=Boolean(s);return w.a.createElement("li",{ref:function(t){return e.body=t},className:T("nav-item",{active:r}),title:i,onClick:this.handleClick},0===n&&w.a.createElement("div",{className:"background-cube",style:c}),w.a.createElement("div",{className:"nav-icon"},w.a.createElement(C.b,{type:"dora",name:a}),f&&w.a.createElement("i",{className:"fa fa-caret-down",type:"dropdown-arrow",onClick:this.toggleDropDown})),o&&w.a.createElement("span",{className:"nav-label"},o),f&&u&&w.a.createElement(s,{top:d,left:p,onClose:this.handleClose}),f&&w.a.createElement(S.a,{onClick:this.handleDocClick}))}}]),u()(t,e),t}(b.Component);O.propTypes={index:y.a.number,icon:y.a.string,title:y.a.string,label:y.a.string,active:y.a.bool,BgStyle:y.a.object,onClick:y.a.func,DropDown:y.a.func};var j=function(e){var t=e.tabs,n=e.activeIndex,r=e.onChange,a=e.className,o=e.hideBorder,i=e.BgStyle;return w.a.createElement(N,{activeIndex:n,hideBorder:o,onTabChange:r,className:a},t.map(function(e){var t=e.label,n=e.icon;return w.a.createElement(O,{key:t,icon:n,label:t,BgStyle:i})}))};j.propTypes={tabs:y.a.array,activeIndex:y.a.number,onChange:y.a.func,className:y.a.string,hideBorder:y.a.bool,BgStyle:y.a.object}},EDI8:function(e,t,n){e.exports={"zoom-count":"_2nN0xGcLm4nwqxIkoQCnMF"}},Em2t:function(e,t,n){var r=n("bahg"),a=n("quyA"),o=n("0JQy");e.exports=function(e){return a(e)?o(e):r(e)}},Ev6p:function(e,t,n){"use strict";n.d(t,"u",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"o",function(){return f}),n.d(t,"r",function(){return h}),n.d(t,"l",function(){return m}),n.d(t,"g",function(){return v}),n.d(t,"n",function(){return b}),n.d(t,"s",function(){return w}),n.d(t,"t",function(){return E}),n.d(t,"f",function(){return S}),n.d(t,"i",function(){return C}),n.d(t,"j",function(){return x}),n.d(t,"v",function(){return _}),n.d(t,"q",function(){return T}),n.d(t,"p",function(){return N}),n.d(t,"k",function(){return O}),n.d(t,"w",function(){return j}),n.d(t,"m",function(){return I}),n.d(t,"h",function(){return R}),n.d(t,"x",function(){return L});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){return"@@redux-saga/"+e},i=o("TASK"),c=o("HELPER"),s=o("MATCH"),l=o("CANCEL_PROMISE"),u=o("SAGA_ACTION"),d=o("SELF_CANCELLATION"),p=function(e){return function(){return e}},f=p(!0),h=function(){},m=function(e){return e};function v(e,t,n){if(!t(e))throw N("error","uncaught at check",n),new Error(n)}var g=Object.prototype.hasOwnProperty;function y(e,t){return b.notUndef(e)&&g.call(e,t)}var b={undef:function(e){return null===e||void 0===e},notUndef:function(e){return null!==e&&void 0!==e},func:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},array:Array.isArray,object:function(e){return e&&!b.array(e)&&"object"===(void 0===e?"undefined":a(e))},promise:function(e){return e&&b.func(e.then)},iterator:function(e){return e&&b.func(e.next)&&b.func(e.throw)},iterable:function(e){return e&&b.func(Symbol)?b.func(e[Symbol.iterator]):b.array(e)},task:function(e){return e&&e[i]},observable:function(e){return e&&b.func(e.subscribe)},buffer:function(e){return e&&b.func(e.isEmpty)&&b.func(e.take)&&b.func(e.put)},pattern:function(e){return e&&(b.string(e)||"symbol"===(void 0===e?"undefined":a(e))||b.func(e)||b.array(e))},channel:function(e){return e&&b.func(e.take)&&b.func(e.close)},helper:function(e){return e&&e[c]},stringableFunc:function(e){return b.func(e)&&y(e,"toString")}},w={assign:function(e,t){for(var n in t)y(t,n)&&(e[n]=t[n])}};function E(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)}var S={from:function(e){var t=Array(e.length);for(var n in e)y(e,n)&&(t[n]=e[n]);return t}};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r({},e),n=new Promise(function(e,n){t.resolve=e,t.reject=n});return t.promise=n,t}function x(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,r=new Promise(function(r){n=setTimeout(function(){return r(t)},e)});return r[l]=function(){return clearTimeout(n)},r}var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){return++e}}(),k=function(e){throw e},M=function(e){return{value:e,done:!0}};function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments[3],a={name:n,next:e,throw:t,return:M};return r&&(a[c]=!0),"undefined"!=typeof Symbol&&(a[Symbol.iterator]=function(){return a}),a}function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";"undefined"==typeof window?console.log("redux-saga "+e+": "+t+"\n"+(n&&n.stack||n)):console[e](t,n)}function O(e,t){return function(){return e.apply(void 0,arguments)}}var j=function(e,t){return e+" has been deprecated in favor of "+t+", please update your code"},I=function(e){return new Error("\n  redux-saga: Error checking hooks detected an inconsistent state. This is likely a bug\n  in redux-saga code and not yours. Thanks for reporting this in the project's github repo.\n  Error: "+e+"\n")},R=function(e,t){return(e?e+".":"")+"setContext(props): argument "+t+" is not a plain object"},L=function(e){return function(t){return e(Object.defineProperty(t,u,{value:!0}))}}},FjbR:function(e,t,n){e.exports=n("h5AQ")},G916:function(e,t,n){e.exports={nav:"xnJdrPjsJoJrp1VupFyUM","nav-item":"_3UspVqDrjxaWG9BSMdj9jf"}},GDhZ:function(e,t,n){var r=n("wF/u"),a=n("mwIZ"),o=n("hgQt"),i=n("9ggG"),c=n("CMye"),s=n("IOzZ"),l=n("9Nap"),u=1,d=2;e.exports=function(e,t){return i(e)&&c(t)?s(l(e),t):function(n){var i=a(n,e);return void 0===i&&i===t?o(n,e):r(t,i,u|d)}}},GEF2:function(e,t,n){e.exports={"preview-panel-wrapper":"_3NbQHmHCb3fdbejXqycbnR","preview-panel":"_972Atke01Y16jEOOPRt5R",expand:"_33UQXp4eOmuoqfuCsfYqsu"}},GNiM:function(e,t,n){var r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=n("I01J")(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,function(e,n,r,o){t.push(r?o.replace(a,"$1"):n||e)}),t});e.exports=o},HDyB:function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},HLqo:function(e,t,n){},I01J:function(e,t){e.exports=function(e){return e}},IB8Z:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var r=function(e){var t={};for(var n in e){var r=e[n];t[r.screen_cid]?t[r.screen_cid].push(r):t[r.screen_cid]=[r]}return t},a=function(e,t){return t[e]||[]}},IDhZ:function(e,t,n){"use strict";var r=n("2NuI"),a=n("MgzW"),o=n("q1tI"),i=n("ohE5"),c=n("t33a"),s=n("+8Ar"),l=n("rWXM");function u(e){for(var t=arguments.length-1,n="http://reactjs.org/docs/error-decoder.html?invariant="+e,a=0;a<t;a++)n+="&args[]="+encodeURIComponent(arguments[a+1]);r(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var d="function"==typeof Symbol&&Symbol.for,p=d?Symbol.for("react.call"):60104,f=d?Symbol.for("react.return"):60105,h=d?Symbol.for("react.portal"):60106,m=d?Symbol.for("react.fragment"):60107,v=d?Symbol.for("react.strict_mode"):60108,g=d?Symbol.for("react.provider"):60109,y=d?Symbol.for("react.context"):60110,b=d?Symbol.for("react.async_mode"):60111,w=d?Symbol.for("react.forward_ref"):60112,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},C={};function x(e){return!!C.hasOwnProperty(e)||!S.hasOwnProperty(e)&&(E.test(e)?C[e]=!0:(S[e]=!0,!1))}function _(e,t,n,r){if(null===t||void 0===t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function k(e,t,n,r,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){M[e]=new k(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];M[t]=new k(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){M[e]=new k(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){M[e]=new k(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){M[e]=new k(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){M[e]=new k(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){M[e]=new k(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){M[e]=new k(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){M[e]=new k(e,5,!1,e.toLowerCase(),null)});var T=/[\-:]([a-z])/g;function N(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(T,N);M[t]=new k(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(T,N);M[t]=new k(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(T,N);M[t]=new k(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),M.tabIndex=new k("tabIndex",1,!1,"tabindex",null);var O=/["'&<>]/;function j(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=O.exec(e);if(t){var n,r="",a=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}a!==n&&(r+=e.substring(a,n)),a=n+1,r+=t}e=a!==n?r+e.substring(a,n):r}return e}var I={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function R(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var L={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},D=a({menuitem:!0},L),A={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},P=["Webkit","ms","Moz","O"];Object.keys(A).forEach(function(e){P.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),A[t]=A[e]})});var B=o.Children.toArray,U=i.thatReturns("");i.thatReturns("");var F={listing:!0,pre:!0,textarea:!0};function z(e){return"string"==typeof e?e:"function"==typeof e?e.displayName||e.name:null}var W=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,q={},H=l(function(e){return s(e)});var V={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function X(e,t){void 0===e&&u("152",z(t)||"Component")}function Z(e,t){function n(n,r){var o=function(e,t){if(e=e.contextTypes){var n,r={};for(n in e)r[n]=t[n];t=r}else t=c;return t}(r,t),i=[],s=!1,l={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===i)return null},enqueueReplaceState:function(e,t){s=!0,i=[t]},enqueueSetState:function(e,t){if(null===i)return null;i.push(t)}},d=void 0;if(r.prototype&&r.prototype.isReactComponent){if(d=new r(n.props,o,l),"function"==typeof r.getDerivedStateFromProps){var p=r.getDerivedStateFromProps.call(null,n.props,d.state);null!=p&&(d.state=a({},d.state,p))}}else if(null==(d=r(n.props,o,l))||null==d.render)return void X(e=d,r);if(d.props=n.props,d.context=o,d.updater=l,void 0===(l=d.state)&&(d.state=l=null),"function"==typeof d.UNSAFE_componentWillMount||"function"==typeof d.componentWillMount)if("function"==typeof d.componentWillMount&&"function"!=typeof r.getDerivedStateFromProps&&d.componentWillMount(),"function"==typeof d.UNSAFE_componentWillMount&&"function"!=typeof r.getDerivedStateFromProps&&d.UNSAFE_componentWillMount(),i.length){l=i;var f=s;if(i=null,s=!1,f&&1===l.length)d.state=l[0];else{p=f?l[0]:d.state;var h=!0;for(f=f?1:0;f<l.length;f++){var m=l[f];null!=(m="function"==typeof m?m.call(d,p,n.props,o):m)&&(h?(h=!1,p=a({},p,m)):a(p,m))}d.state=p}}else i=null;if(X(e=d.render(),r),n=void 0,"function"==typeof d.getChildContext&&"object"==typeof(o=r.childContextTypes))for(var v in n=d.getChildContext())v in o||u("108",z(r)||"Unknown",v);n&&(t=a({},t,n))}for(;o.isValidElement(e);){var r=e,i=r.type;if("function"!=typeof i)break;n(r,i)}return{child:e,context:t}}var G=function(){function e(t,n){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");o.isValidElement(t)?t.type!==m?t=[t]:(t=t.props.children,t=o.isValidElement(t)?[t]:B(t)):t=B(t),this.stack=[{type:null,domNamespace:I.html,children:t,childIndex:0,context:c,footer:""}],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=n,this.providerStack=[],this.providerIndex=-1}return e.prototype.pushProvider=function(e){this.providerIndex+=1,this.providerStack[this.providerIndex]=e,e.type._context._currentValue=e.props.value},e.prototype.popProvider=function(e){this.providerStack[this.providerIndex]=null,--this.providerIndex,(e=e.type._context)._currentValue=0>this.providerIndex?e._defaultValue:this.providerStack[this.providerIndex].props.value},e.prototype.read=function(e){if(this.exhausted)return null;for(var t="";t.length<e;){if(0===this.stack.length){this.exhausted=!0;break}var n=this.stack[this.stack.length-1];if(n.childIndex>=n.children.length){var r=n.footer;t+=r,""!==r&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===n.type?this.currentSelectValue=null:null!=n.type&&null!=n.type.type&&n.type.type.$$typeof===g&&this.popProvider(n.type)}else r=n.children[n.childIndex++],t+=this.render(r,n.context,n.domNamespace)}return t},e.prototype.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?j(n):this.previousWasTextNode?"\x3c!-- --\x3e"+j(n):(this.previousWasTextNode=!0,j(n));if(e=(t=Z(e,t)).child,t=t.context,null===e||!1===e)return"";if(!o.isValidElement(e)){if(null!=e&&null!=e.$$typeof){var r=e.$$typeof;r===h&&u("257"),u("258",r.toString())}return e=B(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}if("string"==typeof(r=e.type))return this.renderDOM(e,t,n);switch(r){case v:case b:case m:return e=B(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case p:case f:u("259")}if("object"==typeof r&&null!==r)switch(r.$$typeof){case w:return e=B(r.render(e.props,e.ref)),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case g:return n={type:e,domNamespace:n,children:r=B(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case y:return r=B(e.props.children(e.type._currentValue)),this.stack.push({type:e,domNamespace:n,children:r,childIndex:0,context:t,footer:""}),""}u("130",null==r?r:typeof r,"")},e.prototype.renderDOM=function(e,t,n){var r=e.type.toLowerCase();n===I.html&&R(r),q.hasOwnProperty(r)||(W.test(r)||u("65",r),q[r]=!0);var i=e.props;if("input"===r)i=a({type:void 0},i,{defaultChecked:void 0,defaultValue:void 0,value:null!=i.value?i.value:i.defaultValue,checked:null!=i.checked?i.checked:i.defaultChecked});else if("textarea"===r){var c=i.value;if(null==c){c=i.defaultValue;var s=i.children;null!=s&&(null!=c&&u("92"),Array.isArray(s)&&(1>=s.length||u("93"),s=s[0]),c=""+s),null==c&&(c="")}i=a({},i,{value:void 0,children:""+c})}else if("select"===r)this.currentSelectValue=null!=i.value?i.value:i.defaultValue,i=a({},i,{value:void 0});else if("option"===r){s=this.currentSelectValue;var l=function(e){var t="";return o.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}(i.children);if(null!=s){var d=null!=i.value?i.value+"":l;if(c=!1,Array.isArray(s)){for(var p=0;p<s.length;p++)if(""+s[p]===d){c=!0;break}}else c=""+s===d;i=a({selected:void 0,children:void 0},i,{selected:c,children:l})}}for(y in(c=i)&&(D[r]&&(null!=c.children||null!=c.dangerouslySetInnerHTML)&&u("137",r,U()),null!=c.dangerouslySetInnerHTML&&(null!=c.children&&u("60"),"object"==typeof c.dangerouslySetInnerHTML&&"__html"in c.dangerouslySetInnerHTML||u("61")),null!=c.style&&"object"!=typeof c.style&&u("62",U())),c=i,s=this.makeStaticMarkup,l=1===this.stack.length,d="<"+e.type,c)if(c.hasOwnProperty(y)){var f=c[y];if(null!=f){if("style"===y){p=void 0;var h="",m="";for(p in f)if(f.hasOwnProperty(p)){var v=0===p.indexOf("--"),g=f[p];null!=g&&(h+=m+H(p)+":",m=p,h+=v=null==g||"boolean"==typeof g||""===g?"":v||"number"!=typeof g||0===g||A.hasOwnProperty(m)&&A[m]?(""+g).trim():g+"px",m=";")}f=h||null}p=null;e:if(v=r,g=c,-1===v.indexOf("-"))v="string"==typeof g.is;else switch(v){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":v=!1;break e;default:v=!0}v?V.hasOwnProperty(y)||(p=x(p=y)&&null!=f?p+'="'+j(f)+'"':""):(v=y,p=f,f=M.hasOwnProperty(v)?M[v]:null,(g="style"!==v)&&(g=null!==f?0===f.type:2<v.length&&("o"===v[0]||"O"===v[0])&&("n"===v[1]||"N"===v[1])),g||_(v,p,f,!1)?p="":null!==f?(v=f.attributeName,p=3===(f=f.type)||4===f&&!0===p?v+'=""':v+'="'+j(p)+'"'):p=v+'="'+j(p)+'"'),p&&(d+=" "+p)}}s||l&&(d+=' data-reactroot=""');var y=d;c="",L.hasOwnProperty(r)?y+="/>":(y+=">",c="</"+e.type+">");e:{if(null!=(s=i.dangerouslySetInnerHTML)){if(null!=s.__html){s=s.__html;break e}}else if("string"==typeof(s=i.children)||"number"==typeof s){s=j(s);break e}s=null}return null!=s?(i=[],F[r]&&"\n"===s.charAt(0)&&(y+="\n"),y+=s):i=B(i.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?R(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:r,children:i,childIndex:0,context:t,footer:c}),this.previousWasTextNode=!1,y},e}(),K={renderToString:function(e){return new G(e,!1).read(1/0)},renderToStaticMarkup:function(e){return new G(e,!0).read(1/0)},renderToNodeStream:function(){u("207")},renderToStaticNodeStream:function(){u("208")},version:"16.3.2"},Y=Object.freeze({default:K}),J=Y&&K||Y;e.exports=J.default?J.default:J},IOzZ:function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},IT1M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("JGuq");Object.defineProperty(t,"Operation",{enumerable:!0,get:function(){return r.Operation}});var a=n("OBS2");Object.defineProperty(t,"Scheme",{enumerable:!0,get:function(){return a.Scheme}}),Object.defineProperty(t,"ObjectScheme",{enumerable:!0,get:function(){return a.ObjectScheme}}),Object.defineProperty(t,"ArrayScheme",{enumerable:!0,get:function(){return a.ArrayScheme}});var o=n("CUi3");Object.defineProperty(t,"ObjectAs",{enumerable:!0,get:function(){return o.ObjectAs}}),Object.defineProperty(t,"ArrayOf",{enumerable:!0,get:function(){return o.ArrayOf}}),Object.defineProperty(t,"objectActMap",{enumerable:!0,get:function(){return o.objectActMap}}),Object.defineProperty(t,"arrayActMap",{enumerable:!0,get:function(){return o.arrayActMap}})},IV71:function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=function(){function e(){a()(this,e),this.store=null,this.viewMap={},this.observerMap={}}return i()(e,[{key:"setStore",value:function(e){this.store=e}},{key:"callObserver",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return this.observerMap[e]&&(t=this.observerMap)[e].apply(t,[e].concat(r))}},{key:"setObserver",value:function(e,t){this.observerMap[e]=t}},{key:"setView",value:function(e,t){this.viewMap[e]=t}},{key:"callViewMethod",value:function(e,t){for(var n,r=this.viewMap[e],a=arguments.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];return r&&r[t]?(this.callObserver("view:".concat(e,":").concat(t)),r[t].apply(r,[this.store].concat(o))):(n=console).warn.apply(n,["[WebpackInterface][callViewMethod] missed",e,t].concat(o))}},{key:"init",value:function(){this.callObserver("init"),this.store&&this.store.dispatch({type:"entry:state:init"})}},{key:"clear",value:function(){this.store&&this.store.dispatch({type:"entry:state:clear"}),this.callObserver("clear")}}]),e}();function s(e){var t={containerReducerMap:{},viewMap:{},sagaMap:{},extendCallback:null};return e.forEach(function(e){t.containerReducerMap=l(u,t.containerReducerMap,e.containerReducerMap),t.viewMap=l(u,t.viewMap,e.viewMap),t.extendCallback=l(d,t.extendCallback,e.extendCallback),t.sagaMap=l(u,t.sagaMap,e.sagaMap)}),t}function l(e,t,n){return n?t?e(t,n):n:t}function u(e,t){var n={};function r(e,t){n[e]=t}for(var a in e)r(a,e[a]);for(var o in t)r(o,t[o]);return n}function d(e,t){return function(){return e.apply(void 0,arguments),t.apply(void 0,arguments)}}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s})},J2m7:function(e,t,n){var r=n("XKAG")(n("UfWW"));e.exports=r},JGuq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o={objectSet:function(e,t,n){return e[t]!==n?r({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n)):e},objectDelete:function(e,t){if(!(t in e))return e;var n=r({},e);return delete n[t],n},objectMerge:function(e,t){for(var n in t){var a=t[n];if(e[n]!==a)return r({},e,t)}return e},arraySet:function(e,t,n){if(e[t]===n)return e;var r=[].concat(a(e));return r[t]=n,r},arrayDelete:function(e,t){return t>=0&&t<=e.length-1?[].concat(a(e.slice(0,t)),a(e.slice(t+1))):e},arrayInsert:function(e,t,n){return t=Math.min(Math.max(t,0),e.length),[].concat(a(e.slice(0,t)),[n],a(e.slice(t)))},arrayPush:function(e,t){return[].concat(a(e),[t])},arrayUnshift:function(e,t){return[t].concat(a(e))},arrayPop:function(e){if(0===e.length)return e;var t=[].concat(a(e));return t.pop(),t},arrayShift:function(e){if(0===e.length)return e;var t=[].concat(a(e));return t.shift(),t},arrayConcat:function(e,t){return t&&t.length?[].concat(a(e),a(t)):e},arrayMatchPush:function(e,t){return e.includes(t)?e:[].concat(a(e),[t])},arrayMatchDelete:function(e,t){var n=e.indexOf(t);return~n?[].concat(a(e.slice(0,n)),a(e.slice(n+1))):e},arrayMatchMove:function(e,t,n){t=Math.min(Math.max(t,0),e.length-1);var r=e.indexOf(n);return~r&&r!==t?r<t?[].concat(a(e.slice(0,r)),a(e.slice(r+1,t+1)),[n],a(e.slice(t+1))):[].concat(a(e.slice(0,t)),[n],a(e.slice(t,r)),a(e.slice(r+1))):e},arrayFindPush:function(e,t,n){return void 0===e.find(t)?[].concat(a(e),[n]):e},arrayFindDelete:function(e,t){var n=e.findIndex(t);return~n?[].concat(a(e.slice(0,n)),a(e.slice(n+1))):e},arrayFindMove:function(e,t,n){var r=e.findIndex(t),o=e[r];return~r&&r!==n?r<n?[].concat(a(e.slice(0,r)),a(e.slice(r+1,n+1)),[o],a(e.slice(n+1))):[].concat(a(e.slice(0,n)),[o],a(e.slice(n,r)),a(e.slice(r+1))):e},arrayFindSet:function(e,t,n){var r=e.findIndex(t);if(!~r||e[r]===n)return e;var o=[].concat(a(e));return o[r]=n,o}};t.Operation=o},JTWS:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r=function(e){var t,n,r,a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=e.inspectables(),l={};if(" "!=e.zoomable&&(t=e.w(),n=e.h(),"mtooltip"==e.name&&("top"==e.tt_placement||"bottom"==e.tt_placement?n-=e.arrowSize():t-=e.arrowSize()),e.isFullWidth()||(l.width=t),l.height=n),"mtooltip"==e.name){var u=["top","right","bottom","left"].map(function(t){return t===e.tt_placement?e.arrowSize()+"px":0});l.margin=u.join(" ")}return"pg"==e.name&&c||(l.left=e.l(),e.primary_fixed&&c?(l.position="fixed",e.primary_fixed===Widget.FIXED_TYPE.bottom?l.bottom=e.cs().height-e.b():l.top=e.t()):l.top=e.t()),l.zIndex=e.z,e.tc&&-1!=s.indexOf("tc")&&(l.color=e.tc),e.bg&&-1!=s.indexOf("bg")&&(l.backgroundColor=e.bg),e.bc&&-1!=s.indexOf("bc")&&(l.borderColor=e.bc),-1!=s.indexOf("box_shadow")&&e.box_shadow&&(l.boxShadow=o(JSON.parse(e.box_shadow))),-1!=s.indexOf("text_shadow")&&e.text_shadow?l.textShadow=i(JSON.parse(e.text_shadow)):e.ts>0&&(l.textShadow="0 0 ".concat(e.ts," ").concat(e.tsc)),-1!=s.indexOf("border_radius")&&e.border_radius&&(l.borderRadius=e.borderRadiusStr()),-1!=s.indexOf("ro")&&e.ro&&(l.transform="rotate(".concat(e.ro,"deg)"),l.WebkitTransform="rotate(".concat(e.ro,"deg)")),e.clip&&-1!=s.indexOf("clip")&&(l.clipPath=e.clip,l.WebkitClipPath=e.clip),-1!=s.indexOf("fs")&&e.fS()>0&&(l.fontSize=e.fS()+"px"),-1!=s.indexOf("padding")&&"mtextarea"!=e.name&&(l.padding=e.paddingS()),-1!=s.indexOf("bs")&&(l.borderWidth=e.bS()),-1!=s.indexOf("ls")&&(l.borderStyle=e.lineStyle()),-1!=s.indexOf("ha")&&"label"!==e.name&&(l.textAlign=e.ha),-1!=s.indexOf("lh")&&(l.lineHeight=e.lH()+"px"),l.fontWeight=e.bo?"bold":"normal",l.fontStyle=e.i?"italic":"normal",!MB.isPhantom()&&"none"!==e.ani_name&&c&&(e.ani_delay&&"0"!=e.ani_delay&&(l.animationDelay=e.ani_delay),l.animationIterationCount=e.ani_count,e.ani_duration&&"0"!=e.ani_duration&&(l.animationDuration=e.ani_duration)),r=e.v?-1!=s.indexOf("o")?e.o/100:"":c?0:.4,!e.v&&c&&(a="none"),""!==r&&(l.opacity=r),a&&(l.pointerEvents=a),e.transition&&(l.transition=e.transition),l},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="widget ".concat(e.name);(-1!=e.inspectables().indexOf("ha")&&(n+=" h".concat(e.ha)),-1!=e.inspectables().indexOf("va")&&(n+=" v".concat(e.va)),"normal"!=e.td&&(n+=" td".concat(e.td)),"pg"==e.name&&(n+=" s".concat(e.icon)),"switch"==e.name&&e.checked&&(n+=" checked"),t)&&(Link.find(e.link_cids)&&e.v&&(n+=" clickable"),!MB.isPhantom()&&"none"!=e.ani_name&&e.v&&(n+=" animated "+e.ani_name));return"sticky"==e.name&&(n+=e.l()>160?" rsticky":" lsticky",n+=e.slt<20?" tsticky":e.slt>e.height-20?" bsticky":""),n},o=function(e){return e.reduce(function(e,t){return e+=" ".concat(1===t[0]?"inset ":"").concat(t[1],"px ").concat(t[2],"px ").concat(t[3],"px ").concat(t[4],"px ").concat(t[5])},"")},i=function(e){return e.reduce(function(e,t){return e+=" ".concat(t[0],"px ").concat(t[1],"px ").concat(t[2],"px ").concat(t[3])},"")}},Juji:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},KAy6:function(e,t,n){"use strict";e.exports=n("IDhZ")},KKmY:function(e,t,n){},Ku8Y:function(e,t,n){e.exports={"editable-span":"_3kZ6Tt9vKO7jl4aGylRTa6","reply-textarea":"_2MMdtZStiVFrqpPWeqIzKH","btn-sort":"_3U9vAHumYl9Ansn9gzYs05","btn-cancel":"_1whvmqsHCmt8iyBc4KMnAF","btn-sure":"_3cG_7EkzOzZEovmV1UHoBq",container:"_1qDeu3cpB7cYXe6lqzlO5Q",avatarInform:"_11prqogEAAMMYQDJ2WNa86",avatar:"xGJm0OmgYp2ExjB9P_BYP","avatar-slide":"_1C_8aOGkoIAasZipcKGlxM",index:"_6wvUm87_ziDGV5DTBxNih",name:"_1Px7EkIhdlrwi7as8ggVbs"}},KwMD:function(e,t){e.exports=function(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}},KxBF:function(e,t){e.exports=function(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(n=n>a?a:n)<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(a);++r<a;)o[r]=e[r+t];return o}},L0cU:function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("7W2i"),i=n.n(o),c=n("W8MJ"),s=n.n(c),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),E=n("4dyd"),S=n("TSYQ"),C=n.n(S),x=n("6XO9"),_=n("8fIB"),k=n.n(_),M=n("o0o1"),T=n.n(M),N=n("yXPU"),O=n.n(N),j=n("jaNy"),I=n.n(j),R=n("tiHd"),L=n("/N2d"),D=Object(R.a)().pushTask,A=new I.a,P=function(){var e=O()(T.a.mark(function e(t,n,r,a){var o,i,c;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.b)({screenCid:n,screenStateCid:"default",canvasZoom:a});case 2:return o=e.sent,i=o.canvasElement,c=i.toDataURL(),e.abrupt("return",B(t,n,r,c));case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),B=function(e,t,n,r){return new k.a(function(a,o){e.onload=function(){A.set("".concat(t).concat(n),r),a()},e.onerror=function(){return e.src=F},e.src=r})},U=function(){var e=O()(T.a.mark(function e(t,n,r,a,o){var i,c,s;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=MB.browserInfo,c=i.name,s=i.version,!((parseInt(navigator.hardwareConcurrency)||1)>4&&"Chrome"===c&&s>53||"Firefox"===c&&s>57)){e.next=7;break}return e.next=5,P(t,n,r,o);case 5:e.next=9;break;case 7:return e.next=9,B(t,n,r,a);case 9:case"end":return e.stop()}},e,this)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),F="/images/preview/image-load.png",z=function(e){function t(){var e,n,r;a()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return u()(r,(n=r=u()(this,(e=p()(t)).call.apply(e,[this].concat(i))),v()(h()(h()(r)),"setElementRef",function(e){return r.$elem=e}),n))}return s()(t,[{key:"componentDidUpdate",value:function(e,t){var n=this;this.props.isVisible&&D(O()(T.a.mark(function e(){var t,r,a,o,i;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.screenCid,a=t.version,o=t.imageUrl,i=t.canvasZoom,t.isVisible){e.next=3;break}return e.abrupt("return");case 3:if(!n.isUnmounted){e.next=5;break}return e.abrupt("return");case 5:if(!A.get("".concat(r).concat(a))){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,U(n.$elem,r,a,o,i);case 9:case"end":return e.stop()}},e,this)}))).catch(function(e){return console.error(e)})}},{key:"componentWillUnmount",value:function(){this.isUnmounted=!0}},{key:"render",value:function(){var e=this.props,t=e.screenCid,n=e.version,r=A.get("".concat(t).concat(n));return w.a.createElement("img",{ref:this.setElementRef,src:r||F})}}]),i()(t,e),t}(b.PureComponent);z.propTypes={screenCid:y.a.string,version:y.a.string,imageUrl:y.a.string,screenName:y.a.string,isVisible:y.a.bool};var W="".concat(location.origin,"/snapshot.png"),q=function(e){function t(e){var n;return a()(this,t),n=u()(this,p()(t).call(this,e)),v()(v()(v()(v()(h()(h()(n)),"updateIsVisible",function(){n.setState({isVisible:n.isInBoundingClientRect()})}),"setElementRef",function(e){return n.$elem=e}),"isInBoundingClientRect",function(){var e=n.props.containerRect;if(!e||!n.$elem)return!1;var t=n.$elem.getBoundingClientRect();return t.bottom>e.top&&t.top<e.bottom}),"handleClick",function(e){e.stopPropagation();var t=n.props,r=t.screenCid;(0,t.onActivate)(r)}),n.state={isVisible:!1},n}return s()(t,[{key:"componentDidMount",value:function(){this.props.containerRect&&this.updateIsVisible()}},{key:"componentDidUpdate",value:function(e,t){var n=this.isInBoundingClientRect();if(!e.containerRect&&this.props.isActive&&!n){var r=this.$elem.getBoundingClientRect();this.props.scrollIntoView(r)}this.updateIsVisible()}},{key:"render",value:function(){var e=this.props,t=e.projectToken,n=e.screenCid,r=e.canvasZoom,a=e.version,o=e.screenName,i=e.isActive,c=e.treeProps.renderItem,s=Screen.find(n),l=this.state.isVisible,u="".concat(W,"?access-token=").concat(t,"&screen-cid=").concat(n,"&version=").concat(a);return w.a.createElement("li",{className:C()("thumbnail-item",{active:i}),onClick:this.handleClick},w.a.createElement(x.Tooltip,{arrowed:!1,content:{hover:o},duration:1e3,position:"bottom",type:"block"},w.a.createElement("div",{ref:this.setElementRef,className:"image-wrapper"},c&&c(s),w.a.createElement(z,{screenCid:n,version:a,imageUrl:u,canvasZoom:r,isVisible:l}))),w.a.createElement("span",{className:"screen-name"},o))}}]),i()(t,e),t}(b.PureComponent);q.propTypes={index:y.a.number,canvasZoom:y.a.number,version:y.a.string,screenCid:y.a.string,screenName:y.a.string,projectToken:y.a.string,containerRect:y.a.object,isActive:y.a.bool,onActivate:y.a.func,scrollIntoView:y.a.func,treeProps:y.a.object},q.defaultProps={treeProps:{}};var H=n("p7Sh"),V=n.n(H),X=n("UbMB"),Z=n.n(X);n.d(t,"a",function(){return K});var G=Z.a.bind(V.a),K=function(e){function t(e){var n;return a()(this,t),n=u()(this,p()(t).call(this,e)),v()(v()(v()(v()(v()(h()(h()(n)),"setContainerRef",function(e){return n.$container=e}),"updateContainerRect",function(){return n.setState({containerRect:n.$container.getBoundingClientRect()})}),"handleScroll",function(){return n.updateContainerRect()}),"handleResize",function(){return n.updateContainerRect()}),"handleScrollIntoView",function(e){var t=n.state.containerRect;n.$container.scrollTop+=e.top-t.top}),n.state={containerRect:null},n}return s()(t,[{key:"componentDidMount",value:function(){this.updateContainerRect()}},{key:"render",value:function(){var e=this,t=this.props,n=t.screenList,r=t.projectToken,a=t.activeScreenCid,o=t.className,i=t.screenTimestampMap,c=t.onClickScreenItem,s=t.treeProps,l=this.state.containerRect;return w.a.createElement("div",{ref:this.setContainerRef,className:G("thumbnail-container",o),onScroll:this.handleScroll},w.a.createElement("ol",{className:"thumbnail-list"},0===n.length&&w.a.createElement("div",{className:"not-match"},I18N.preview_panel.not_match),n.map(function(t,n){return w.a.createElement(q,{key:t.cid,index:n,screenCid:t.cid,screenName:t.name,projectToken:r,version:i[t.cid],canvasZoom:Object(L.d)(t.width,t.height),isActive:t.cid===a,containerRect:l,onActivate:c,scrollIntoView:e.handleScrollIntoView,treeProps:s})})),w.a.createElement(E.a,{onResize:this.handleResize}))}}]),i()(t,e),t}(b.PureComponent);K.propTypes={className:y.a.string,screenList:y.a.array,projectToken:y.a.string,activeScreenCid:y.a.string,screenTimestampMap:y.a.object,onClickScreenItem:y.a.func,treeProps:y.a.object},K.defaultProps={screenTimestampMap:{}}},LGYb:function(e,t,n){var r=n("1hJj"),a=n("jbM+"),o=n("Xt/L"),i=n("xYSL"),c=n("dQpi"),s=n("rEGp"),l=200;e.exports=function(e,t,n){var u=-1,d=a,p=e.length,f=!0,h=[],m=h;if(n)f=!1,d=o;else if(p>=l){var v=t?null:c(e);if(v)return s(v);f=!1,d=i,m=new r}else m=t?[]:h;e:for(;++u<p;){var g=e[u],y=t?t(g):g;if(g=n||0!==g?g:0,f&&y==y){for(var b=m.length;b--;)if(m[b]===y)continue e;t&&m.push(y),h.push(g)}else d(m,y,n)||(m!==h&&m.push(y),h.push(g))}return h}},Lyer:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var r=n("pVnL"),a=n.n(r),o=n("QILm"),i=n.n(o),c=n("lwsE"),s=n.n(c),l=n("7W2i"),u=n.n(l),d=n("W8MJ"),p=n.n(d),f=n("a1gu"),h=n.n(f),m=n("Nsbk"),v=n.n(m),g=n("PJYZ"),y=n.n(g),b=n("lSNA"),w=n.n(b),E=n("17x9"),S=n.n(E),C=n("q1tI"),x=n.n(C),_=n("6XO9"),k=n("rwIS"),M=n.n(k),T=function(e){return MB.localStorageDelegate.setItem("guide_closed_".concat(e),!0)},N=function(e){function t(){var e,n,r;s()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return h()(r,(n=r=h()(this,(e=v()(t)).call.apply(e,[this].concat(o))),w()(w()(w()(y()(y()(r)),"setGuideRef",function(e){return r.guide=e}),"handleCloseGuideManually",function(){T(r.props.id)}),"autoClose",function(){var e=r.props,t=e.duration,n=e.autoClose,a=e.id;e.isOpen&&t&&(r.timer=setTimeout(function(){n(),T(a)},t))}),n))}return p()(t,[{key:"componentDidUpdate",value:function(e){e.isOpen!==this.props.isOpen&&this.autoClose()}},{key:"componentWillUnmout",value:function(){clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.isOpen,r=e.children,o=e.localeKey,c=e.position,s=e.className,l=i()(e,["id","isOpen","children","localeKey","position","className"]);if(function(e){return"true"===MB.localStorageDelegate.getItem("guide_closed_".concat(e))}(t))return r;var u=I18N.guide_base[o||t],d=u.header,p=u.content;return x.a.createElement(_.Guide,a()({ref:this.setGuideRef,isOpen:n,position:c,onClose:this.handleCloseGuideManually,className:"".concat(M.a["guide-button"]," ").concat(s),header:d,guide:x.a.createElement("div",{dangerouslySetInnerHTML:{__html:p}}),X:"right"},l),r)}}]),u()(t,e),t}(C.PureComponent);N.propTypes={id:S.a.string.isRequired,isOpen:S.a.bool,duration:S.a.number,localeKey:S.a.string,children:S.a.element,autoClose:S.a.func,className:S.a.string,position:S.a.string},N.defaultProps={gotItText:I18N.guide_base.got_it}},M8nv:function(e,t,n){e.exports=n("eaeY")},NYM8:function(e,t,n){},O7RO:function(e,t,n){var r=n("CMye"),a=n("7GkX");e.exports=function(e){for(var t=a(e),n=t.length;n--;){var o=t[n],i=e[o];t[n]=[o,i,r(i)]}return t}},OBS2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(e,t){return t.forEach(function(n){e.has(n)&&console.error("duplicate name in set",e,t,n),e.add(n)}),e},l=function(e){return(t=e)instanceof Object&&"toStructJSON"in t?e.toStructJSON():e;var t},u=function(e,t){return console.error("DEFAULT_REDUCER",e,t),e},d=function(){function e(t,n,r){c(this,e),this.name=t,this.struct=n,this.actMap=r,this.initialState=null,this.acceptNameSet=null,this.actionReducer=null,this.structReducer=null,this.reducer=null}return a(e,[{key:"getActionReducer",value:function(){var e=this.actMap;return function(t,n){var r=n.type,a=n.payload,o=e[r];return o?o(t,a):t}}},{key:"getReducer",value:function(){var e=this.name,t=this.initialState,n=this.acceptNameSet,r=this.actionReducer,a=this.structReducer,o=function(t,n){return void 0!==n.type&&n.name===e?r(t,n):a(t,n)};return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,a=arguments[1];return n.has(a.name)?void 0!==a.batch&&a.name===e?a.batch.reduce(o,r):o(r,a):r}}},{key:"toStructJSON",value:function(){return l(this.struct)}}]),e}(),p=function(e){function t(e,n,r){c(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),i={},l=new Set;l.add(a.name);var u=[];for(var p in a.struct)if(a.struct.hasOwnProperty(p)){var f=a.struct[p],h=f instanceof d;i[p]=h?f.initialState:f,h&&(s(l,f.acceptNameSet),u.push(p))}return a.initialState=i,a.acceptNameSet=l,a.structReducer=t.getStructReducer(u,a.struct),a.actionReducer=a.getActionReducer(),a.reducer=a.getReducer(),a}return i(t,d),a(t,[{key:"toStructJSON",value:function(){return function(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n}(this.struct,l)}}],[{key:"getStructReducer",value:function(e,t){return function(n,a){for(var o=!1,i={},c=0;c<e.length;c++){var s=e[c],l=t[s],u=n[s],d=l.reducer(u,a);i[s]=d,o=o||d!==u}return o?r({},n,i):n}}}]),t}(),f=function(e){function t(e,n,r){c(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r)),i=a.struct[0],s=i instanceof d,l=new Set;return l.add(a.name),a.initialState=[],a.acceptNameSet=l,a.structReducer=s?t.getStructReducer(i):u,a.actionReducer=a.getActionReducer(),a.reducer=a.getReducer(),a}return i(t,d),a(t,[{key:"toStructJSON",value:function(){return this.struct.map(l)}}],[{key:"getStructReducer",value:function(e){return function(n,r){var a=!1,o=null;function i(t,r,i){var c=e.reducer(t,r);t!==c&&(a||(o=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n))),o[i]=c,a=!0)}if(void 0!==r.index)i(n[r.index],r.payload,r.index);else if(void 0!==r.filter){var c=t.getFilter(r.filter);c&&n.forEach(function(e,t){return c(e,t)&&i(e,r.payload,t)})}return a?o:n}}},{key:"getFilter",value:function(e){switch(e.type){case"key-value":var t=e.key,n=e.value;return function(e,r){return e[t]===n}}return null}}]),t}();t.Scheme=d,t.ObjectScheme=p,t.ArrayScheme=f},OVdA:function(e,t,n){e.exports={"text-wrapper":"uauh7BEsBr6RNi8rM4QkK"}},P3rE:function(e,t,n){},PYuP:function(e,t,n){"use strict";n.d(t,"a",function(){return Z});var r=n("o0o1"),a=n.n(r),o=n("yXPU"),i=n.n(o),c=n("cJHP"),s=n.n(c),l=n("pVnL"),u=n.n(l),d=n("Kgbp"),p=n.n(d),f=n("eTac"),h=n.n(f),m=n("MVZn"),v=n.n(m),g=n("lwsE"),y=n.n(g),b=n("7W2i"),w=n.n(b),E=n("W8MJ"),S=n.n(E),C=n("a1gu"),x=n.n(C),_=n("Nsbk"),k=n.n(_),M=n("PJYZ"),T=n.n(M),N=n("lSNA"),O=n.n(N),j=n("q1tI"),I=n.n(j),R=n("17x9"),L=n.n(R),D=n("6XO9"),A=n("wCGR"),P=n("7Qib"),B=n("nLLt"),U=n("XkTy"),F=n("rbsZ"),z=n("zAG7"),W=(n("mnpx"),I18N.open_parenthesis+I18N.pending+I18N.close_parenthesis),q={user:0,owner:1,admin:2,editor:3,viewer:4},H=function(e){var t=e.host,n=e.userRole;return(t.isTeam()&&Object(B.a)("team-collaborator-update","admin",n)?["viewer","editor","admin"]:["viewer","editor"]).map(function(e){return{value:e,label:"".concat(I18N.roles[e]).concat(I18N.colon).concat(I18N.roles[e+"_desc"])}})},V=function(e,t){var n=q[e.user_id===MB.user.id?"user":e.role],r=q[t.user_id===MB.user.id?"user":t.role];return n!==r?n-r:e.name&&t.name?e.name.localeCompare(t.name):!e.name&&t.name?1:e.name&&!t.name?-1:e.email.localeCompare(t.email)},X=function(e){function t(){var e,n,r;y()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return x()(r,(n=r=x()(this,(e=k()(t)).call.apply(e,[this].concat(o))),O()(O()(T()(T()(r)),"onChangeRole",function(e){r.props.onChangeRole({collaborator:r.props.collaborator,role:e}),r.forceUpdate()}),"onDeleteCollaborator",function(){return r.props.onDeleteCollaborator(r.props.collaborator)}),n))}return S()(t,[{key:"render",value:function(){var e=this.props,t=e.collaborator,n=e.host,r=e.userRole,a=t.avatar,o=t.name,i=t.email,c=t.role,s=H({host:n,userRole:r}),l=function(e){var t=e.host,n=e.collaborator,r=e.userRole;return Object(B.a)(t.isTeam()&&"team","collaborator-update",n.role,r)}({host:n,collaborator:t,userRole:r});return I.a.createElement("li",{className:"collaborator"},I.a.createElement("div",{className:"user"},I.a.createElement("img",{className:"avatar",src:a}),I.a.createElement("span",{className:"user-name"},o||i),!o&&I.a.createElement("span",{className:"pending"},W)),l?I.a.createElement(D.Select,{unstyled:!0,size:"small",optionList:s,value:c,onChange:this.onChangeRole}):I.a.createElement("span",{className:"role"},I18N.roles[c]),l&&I.a.createElement(D.Button,{type:"text",size:"small",className:"delete",onClick:this.onDeleteCollaborator},I18N.delete))}}]),w()(t,e),t}(j.PureComponent);O()(X,"propTypes",{dispatch:L.a.func,host:L.a.object,userRole:L.a.any,collaborator:L.a.object,onChangeRole:L.a.func,onDeleteCollaborator:L.a.func});var Z=function(e){function t(e){var n;y()(this,t),n=x()(this,k()(t).call(this,e)),O()(O()(O()(O()(O()(O()(O()(O()(O()(O()(O()(O()(O()(O()(T()(T()(n)),"errorMsg",function(){var e=n.props.host,t="";if(e&&e.collaborators().length>=e.limitation.collaborators+1){var r=e.limitation.collaborators?"collaborators":"cant_invite",a=e.owner_id==MB.user.id?"user":e.isTeam()?"team":"project",o=e.isTeam()?"renew":"upgrade";t=MB.renewMsg&&MB.renewMsg(r,{role:a,action:o,collaborators:e.limitation.collaborators,plan:e.owner_plan})}return t}),"updateComponent",function(){n.forceUpdate(),MB.webpackInterface&&MB.webpackInterface.refreshAll(),$("body").trigger("queue:save")}),"focusOnInput",function(){return setTimeout(function(){var e=document.querySelector('.collaborator-modal input[type="email"]');e&&e.focus()},100)}),"updateEmail",function(e){var t=e.target.value;return n.updatePromptList(t.trim().toLowerCase())}),"updateRole",function(e){return n.setState(function(t){var n=t.formData;return{formData:v()({},n,{role:e})}})}),"updatePromptList",function(e){if(e!==n.state.email){n.promptMapCached||(n.dedupEmailSetCached=new h.a(n.props.host.collaborators().map(function(e){return e.email.toLowerCase()})),n.promptMapCached=Collaborator.all().filter(function(e){var t=e.cid,r=e.user_id,a=e.email;return!(r===MB.user.id||t.startsWith("co_MOCK_c")||t.startsWith("co_MOCK_t")&&!t.startsWith("co_MOCK_te")||n.dedupEmailSetCached.has(a.toLowerCase()))}).reduce(function(e,t){return t.name&&(e[t.name.toLowerCase()]=t),t.email&&(e[t.email.toLowerCase()]=t),e},{}));var t=e&&new RegExp(e,"i"),r=new h.a(n.dedupEmailSetCached),a=new h.a;for(var o in n.promptMapCached){if(a.size>=10)break;var i=n.promptMapCached[o],c=i.email.toLowerCase();t&&!t.test(o)||!c||r.has(c)||(r.add(c),a.add(i))}n.setState(function(t){var n=t.formData;return{formData:v()({},n,{email:e}),isPromptListOpen:!0,promptList:p()(a)}})}}),"showPromptList",function(){return n.updatePromptList(n.state.formData.email)}),"hidePromptList",function(){return setTimeout(function(){n.dedupEmailSetCached=null,n.promptMapCached=null,n.setState({isPromptListOpen:!1})},100)}),"createOnClickPromptListItemHandler",function(e){return function(){return n.setState(function(t){var n=t.formData;return{formData:v()({},n,{email:e}),promptList:[]}})}}),"renderPromptList",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.state.promptList;return e=e||0===t.length,I.a.createElement("ul",u()({className:"prompt-list"},Object(P.d)(e)),t.map(function(e){return I.a.createElement("li",{key:e.email,onMouseDown:n.createOnClickPromptListItemHandler(e.email)},I.a.createElement("img",{className:"avatar",src:e.avatar}),I.a.createElement("span",{className:"user-name"},e.name||e.email),e.name?I.a.createElement("span",{className:"user-email"},e.email):I.a.createElement("span",{className:"pending"},W))}))}),"onInvite",function(){var e=n.props.host,t=n.state.formData,r=t.email,a=t.role,o=e.limitation,i=void 0===o?MB.user.limitation:o,c=e.collaborators(),s=void 0!==c.find(function(e){return e.email===r}),l=r&&z.a.test(r)?r===MB.user.email?I18N.cant_invite_yourself:s?I18N.already_invited:c.length>i.collaborators?n.errorMsg():null:I18N.invalid_email;l?(n.focusOnInput(),n.setState({errorMsg:l,promptPricing:c.length>i.collaborators})):(n.createCollaborator({email:r,role:a}),n.setState({formData:{email:"",role:"viewer"},promptPricing:!0}))}),"createCollaborator",function(e){var t=e.email,r=e.role,a=n.props.host,o=a.isTeam(),i=new Collaborator({email:t,role:r,cid:"co".concat(Math.uuid(10,16)).concat((new Date).valueOf()),avatar:"/images/avatar.png"});s()(i,{team_cid:o&&a.cid,project_cid:!o&&a.cid}),i.lsave(),i.updateHostChannel("update"),n.updateComponent()}),"onChangeRole",function(e){var t=e.collaborator,r=e.role,a=n.props,o=a.host,i=a.userRole,c=o.isTeam();!Object(B.a)(c&&"team","collaborator-update",[t.role,r],i)||(s()(t,{role:r}),t.lsave(),t.updateHostChannel("update"),n.updateComponent())}),"onDeleteCollaborator",function(){var e=i()(a.a.mark(function e(t){var r,o,i,c,s,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,o=r.dispatch,i=r.host,c=r.userRole,s=i.isTeam(),!!Object(B.a)(s&&"team","collaborator-delete",t.role,c)){e.next=5;break}return e.abrupt("return");case 5:return l=I.a.createElement(A.a,{variableMap:{verb:"delete",noun:"teamMember",ugn:I.a.createElement(D.User,{name:t.name||t.email,withQuote:!0,withQuestionMark:"en"===MBLocale})}}),e.next=8,Object(U.b)({dispatch:o,title:I18N.del_collaborator_title,desc:l});case 8:if(!e.sent){e.next=13;break}t.updateHostChannel("destroy"),t.ldestroy(),n.updateComponent(),n.setState({errorMsg:null});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),n.dedupEmailSetCached=null,n.promptMapCached=null;var r=!Object(B.a)(e.host.isTeam()&&"team","collaborator-create","viewer",e.userRole),o=r?I18N.owner_only:n.errorMsg(),c=!r;return n.state={formData:{email:"",role:"viewer"},promptList:[],isPromptListOpen:!1,errorMsg:o,promptPricing:c},n}return S()(t,[{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen&&this.focusOnInput()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,r=t.onClose,a=t.host,o=t.userRole,i=this.state,c=i.formData,s=i.errorMsg,l=i.isPromptListOpen,u=i.promptPricing,d=H({host:a,userRole:o});return I.a.createElement(D.Modal,{isOpen:n,title:I18N.manage_collaborators,className:"collaborator-modal",onClose:r},function(e){var t=e.host,n=e.collaborator,r=e.userRole;return Object(B.a)(t.isTeam()&&"team","collaborator-create",n.role,r)}({host:a,userRole:o,collaborator:{role:"viewer"}})&&I.a.createElement("div",{className:"add-via-email"},I.a.createElement("input",{type:"email",placeholder:I18N.email_placeholder,onChange:this.updateEmail,onClick:this.showPromptList,onBlur:this.hidePromptList,value:c.email,autoComplete:"off"}),I.a.createElement(D.Select,{unstyled:!0,size:"small",optionList:d,value:c.role,onChange:this.updateRole}),I.a.createElement(D.Button,{type:"primary",size:"small",isDisabled:!c.email,onClick:this.onInvite},I18N.invite),this.renderPromptList(!l)),s&&I.a.createElement("div",{className:"error-msg ".concat(u?"has-prompt-pricing-btn":"")},I.a.createElement("span",null,s),u&&I.a.createElement("button",{onClick:F.b},I18N.check_pricing)),I.a.createElement("ul",{className:"collaborator-list"},a.collaborators().sort(V).map(function(t){return I.a.createElement(X,{key:t.email,host:a,userRole:o,collaborator:t,onChangeRole:e.onChangeRole,onDeleteCollaborator:e.onDeleteCollaborator})})))}}]),w()(t,e),t}(j.PureComponent);O()(Z,"propTypes",{isOpen:L.a.bool,onClose:L.a.func.isRequired,host:L.a.object,userRole:L.a.any})},QILm:function(e,t,n){var r=n("r9tm"),a=n("iVxW");e.exports=function(e,t){if(null==e)return{};var n,o,i={},c=a(e);for(o=0;o<c.length;o++)n=c[o],t.indexOf(n)>=0||(i[n]=e[n]);if(r){var s=r(e);for(o=0;o<s.length;o++)n=s[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},QIyF:function(e,t,n){var r=n("Kz5y");e.exports=function(){return r.Date.now()}},QoRX:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},QqLw:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},RJdT:function(e,t,n){"use strict";var r=n("cJHP"),a=n.n(r),o=n("rVSK"),i=n.n(o),c=["status_bar","keyboard"],s=1,l=2,u=3,d={checker:function(e){return 0===e.primary_fixed&&(!0===e.fixed||c.includes(e.name))},migrator:function(e){var t=e.z,n=0,r=!1;if(c.includes(e.name))t=Widget.MAXZ,"status_bar"===e.name?n=1:"keyboard"===e.name&&(n=2);else if(t=e.z+Widget.MAXZ,e.fixed_type===l)n=1;else if(e.fixed_type===u)n=2;else if(e.fixed_type===s){var a=function(e){var t;if(e.panel_cid){var n=Panel.find(e.panel_cid);t=n&&n.screen_cid}else if(e.widget_cid){var r=Widget.find(e.widget_cid);t=r&&r.screen_cid}else t=e.screen_cid;return Screen.find(t)}(e);if(a)n=e.top>a.height-a.cp().sheight(a.orient())/2?2:1;else r=!0}return{fixed:r,primary_fixed:n,z:t}}},p=[{checker:function(e){var t=""===e.box_shadow,n=e.ds&&"transparent"!==e.sc;return t&&n&&MB.currentProject},migrator:function(e){var t=e.ds,n=MB.hex2rgb(e.sc),r=[0,0,0,t,0,"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",1)")];return MB.currentProject.isAndroid()&&(r[2]=2*t,r[3]=2*t,r[5]="rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(Math.min((23+t)/100,1),")")),{box_shadow:i()([r])}}},{checker:function(e){var t=""===e.text_shadow,n="icon_button"===e.name&&e.ds&&"transparent"!==e.sc||e.ts&&"transparent"!==e.tsc;return t&&n&&MB.currentProject},migrator:function(e){var t=e.ts||e.ds,n=MB.hex2rgb(e.tsc||e.sc),r=[0,0,t,"rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",1)")];return MB.currentProject.isAndroid()&&(r[1]=2*t,r[2]=2*t,r[3]="rgba(".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(Math.min((23+t)/100,1),")")),{text_shadow:i()([r])}}},{checker:function(e){return""===e.border_radius&&e.br},migrator:function(e){return{border_radius:String(e.br)}}},d],f=[d];window.MB=window.MB||{},MB.widgetMigrator=function(e){var t={};return p.forEach(function(n){n.checker(e)&&a()(t,n.migrator(e))}),t},MB.panelMigrator=function(e){var t={};return f.forEach(function(n){n.checker(e)&&a()(t,n.migrator(e))}),t}},RNpe:function(e,t,n){var r=n("87hQ");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=function(e,t){if(c.exec(e))return e;var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),1!==n.length);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(c.exec(t)||[""])[0],r=[];return("/"!==e[0]?o(t.split("/").slice(0,-1)).concat(o(e.split("/"))):[n.slice(0,-1)].concat(o(e.split("/").slice(1)))).forEach(function(e){return".."===e?r.pop():r.push(e)}),r.join("/")};t.getAbsoluteUrl=i;var c=/((https?:)?\/\/)?[-\w@:%._+~#=]{2,256}\.[a-z]{2,63}(:\d{1,5})?\//,s=function(e,t){if(e.startsWith("data:"))return e;if(e.startsWith("blob:"))return(0,r.fetchDataUrlWithCache)(e);t&&(e=i(e,t));var n=l.exec(e);return n&&u[n[1].toLowerCase()]?(0,r.fetchDataUrlWithCache)(e):""};t.convertDataUrl=s;var l=/\.([0-9a-z]{3,5})(?:[?#]|$)/i,u={woff2:"font/woff2",woff:"font/woff",ttf:"font/ttf",svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",bmp:"image/bmp",ico:"image/x-icon"},d=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void a(e)}n.done?r(i):Promise.resolve(i).then(c,s)}function c(e){i("next",e)}function s(e){i("throw",e)}c()})}}(regeneratorRuntime.mark(function e(t){var n,r,o,i,c,l,u,d,p,f,h,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.urlMap,r=void 0===n?{}:n,o=t.fragList,i=void 0===o?[]:o,c=Object.values(r),l=0;case 3:if(!(l<c.length)){e.next=15;break}return u=c[l],d=u.urlString,p=u.originUrl,e.next=8,s(d,p);case 8:if(e.t0=e.sent,e.t0){e.next=11;break}e.t0="";case 11:u.dataUrl=e.t0;case 12:l++,e.next=3;break;case 15:for(f=0,h=i.length;f<h;f++)"object"===a(m=i[f])&&(i[f]=m.dataUrl);return e.abrupt("return",i);case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.convertFragListWithUrlMap=d},RUem:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("6XO9"),s=n("XrEr"),l=n("UbMB"),u=n.n(l),d=n("mfFm"),p=n.n(d),f=u.a.bind(p.a),h=function(e){var t=e.title,n=e.dataValue,r=void 0===n?[]:n,o=e.data,i=void 0===o?[]:o,l=e.text,u=e.color,d=e.className,p=e.colorUnit,h=e.first,m=Object(s.b)(u,"rgba"),v=Object(s.b)(u,p),g=r.length>0,y=4===r.length,b=f("panel","".concat(d),{"panel-bottom-8":!g,"panel-item-text":!!l,"shadow-panel":y});return u?a.a.createElement(O,{title:t,rgbaColor:m,stateColor:v}):a.a.createElement("div",{className:b,"data-value":t},l?a.a.createElement(c.Tooltip,{arrowed:!1,className:"panel-item item-flex-1",content:{click:I18N.preview_panel.copied},duration:1e3},a.a.createElement("div",{"data-type":"copy","data-placement":"top","data-clipboard-text":l,className:"panel-item-value text-content",dangerouslySetInnerHTML:{__html:l}})):a.a.createElement("div",{className:"".concat(i.length<2?"single-panel-box":"mult-panel-box")},(h?i.slice(0,1):i).map(function(e,t){return a.a.createElement(c.Tooltip,{key:t,arrowed:!1,content:{click:I18N.preview_panel.copied},duration:1e3,className:"panel-item","data-value":r[t]},a.a.createElement("div",{"data-type":"copy","data-clipboard-text":e,className:"panel-item-value"},e))})))};h.propTypes={title:i.a.string,data:i.a.array,dataValue:i.a.array,text:i.a.string,color:i.a.string,colorUnit:i.a.string,first:i.a.bool,className:i.a.string};var m=n("lwsE"),v=n.n(m),g=n("7W2i"),y=n.n(g),b=n("W8MJ"),w=n.n(b),E=n("a1gu"),S=n.n(E),C=n("Nsbk"),x=n.n(C),_=n("PJYZ"),k=n.n(_),M=n("lSNA"),T=n.n(M),N=u.a.bind(p.a),O=function(e){function t(e){var n;return v()(this,t),n=S()(this,x()(t).call(this,e)),T()(k()(k()(n)),"handleClick",function(){n.setState(function(e){return{activeColor:e.colorList[e.index%4],index:e.index+1}})}),n.state={index:0,activeColor:e.stateColor,colorList:"transparent"===e.rgbaColor?Array(4).fill("transparent"):j(e.rgbaColor)||[]},n}return w()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.stateColor;this.setState(function(e){return{activeColor:t}})}},{key:"render",value:function(){var e=this.state.activeColor,t=this.props,n=t.title,r=t.rgbaColor,o=N("panel","panel-bottom-8");return a.a.createElement("div",{className:o,"data-value":n},a.a.createElement("div",{className:"panel-item panel-item-color item-flex-1"},a.a.createElement(c.Tooltip,{className:"panel-item-value textEllipsis",content:{click:I18N.preview_panel.copied},"data-type":"copy",arrowed:!1,"data-clipboard-text":e},e),a.a.createElement("div",{className:"panel-item-color-block",style:{backgroundColor:r},onClick:this.handleClick})))}}]),y()(t,e),t}(r.PureComponent),j=function(e){if(e)return[Object(s.b)(e,"rgba"),Object(s.b)(e,"rgb"),Object(s.b)(e,"argb"),Object(s.b)(e,"hex")]};O.propTypes={rgbaColor:i.a.string.isRequired,stateColor:i.a.string,title:i.a.string};var I=n("qOCw"),R=function(e){var t=e.textStyles,n=void 0===t?[]:t,r=e.hiddSpacing,o=e.ratio,i=e.alignment,c=e.vertical_alignment,l=e.lineHeight,u=e.letterSpacing,d=e.unit,p=e.text,f=(e.o,e.colorUnit),m=e.fontStyle;e.padding;return a.a.createElement(Ce,null,I18N.preview_panel.font,(n.length>0&&n.slice(0,1)).map(function(e,t){var n=e.color,r=e.font_size,i=(e.length,e.location),c=e.font_face,l=Object(s.e)(n),u=Object(s.b)(l,"rgba"),p=Object(I.a)(r,o,d),v=Object(s.b)(l,f);return a.a.createElement("div",{key:"".concat(r).concat(i).concat(t)},c&&a.a.createElement(h,{title:I18N.preview_panel.type_face,data:[c]}),m&&a.a.createElement(h,{title:I18N.preview_panel.font_style,data:[m]}),u&&a.a.createElement(O,{stateColor:v,title:I18N.preview_panel.color,rgbaColor:u}),p&&a.a.createElement(h,{title:I18N.preview_panel.font_size,data:[p]}))}),i&&a.a.createElement(h,{title:I18N.preview_panel.align,data:[i,c||"auto"],dataValue:[I18N.preview_panel.horizontal_align,I18N.preview_panel.vertical_align]}),l&&a.a.createElement(h,{title:I18N.preview_panel.graph,data:[l,u||"auto"],dataValue:[I18N.preview_panel.line_height,I18N.preview_panel.letter_spacing],first:r}),p&&a.a.createElement(h,{text:p,title:I18N.preview_panel.content}))};R.propTypes={textStyles:i.a.array,fontStyle:i.a.string,alignment:i.a.string,vertical_alignment:i.a.string,hiddSpacing:i.a.bool,letterSpacing:i.a.oneOfType([i.a.string,i.a.bool]),lineHeight:i.a.oneOfType([i.a.string,i.a.bool]),ratio:i.a.number,unit:i.a.string,text:i.a.string,o:i.a.number,padding:i.a.number,colorUnit:i.a.string};var L=function(e){var t=e.adapterLeft,n=e.adapterTop,r=e.adapterWidth,o=e.adapterHeight,i=e.opacity,c=e.radius,s=e.rotate;return a.a.createElement(Ce,null,I18N.preview_panel.basic_attribute,t&&a.a.createElement(h,{title:I18N.preview_panel.position,dataValue:[I18N.preview_panel._x,I18N.preview_panel._y],data:[t,n]}),r&&a.a.createElement(h,{title:I18N.preview_panel.size,dataValue:[I18N.preview_panel.width,I18N.preview_panel.height],data:[r,o]}),s&&a.a.createElement(h,{title:I18N.preview_panel.rotation,data:[s]}),c&&a.a.createElement(h,{title:I18N.preview_panel.border_radius,data:[c]}),i&&a.a.createElement(h,{title:I18N.preview_panel.opacity,data:[i]}))};L.propTypes={adapterLeft:i.a.string,adapterHeight:i.a.string,adapterTop:i.a.string,adapterWidth:i.a.string,opacity:i.a.oneOfType([i.a.string,i.a.bool]),rotate:i.a.oneOfType([i.a.string,i.a.bool]),radius:i.a.oneOfType([i.a.string,i.a.number])};var D=n("/MKj"),A=n("i6OX"),P=n("/5+U"),B=u.a.bind(p.a),U=function(){return a.a.createElement("div",null,"Error in GlobalAttributes")},F=function(e){function t(){var e,n,r;v()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return S()(r,(n=r=S()(this,(e=x()(t)).call.apply(e,[this].concat(o))),T()(T()(k()(k()(r)),"handleDelColor",function(e){var t=Object(P.c)(Object(s.b)(e,"rgba"));r.props.dispatch({type:"reducer:preview-toolbar:update",payload:{userPickColor:t}}),MB.event("删除了自选颜色","运行页")}),"handleClick",function(e){var t=e.target.dataset.clickReason;t&&MB.event("复制".concat(t),"运行页")}),n))}return w()(t,[{key:"componentDidCatch",value:function(e,t){return console.log(e,t),a.a.createElement(U,null)}},{key:"render",value:function(){var e=this.props,t=e.adapterWidth,n=e.adapterHeight,r=e.screenColor,o=void 0===r?[]:r,i=e.documentColor,c=void 0===i?[]:i,s=e.globalText,l=void 0===s?[]:s,u=e.globalColor,d=void 0===u?[]:u,p=e.userPickColor,f=void 0===p?[]:p,m=e.colorUnit,v=c.concat(d);return a.a.createElement("div",{className:B("global-attributes"),onClick:this.handleClick},a.a.createElement("div",{className:B("container","global-layer")},a.a.createElement(h,{title:I18N.preview_panel.size,dataValue:[I18N.preview_panel.width,I18N.preview_panel.height],data:[t,n]})),a.a.createElement(Ce,null,I18N.preview_panel.color_title,a.a.createElement(q,{title:I18N.preview_panel.pick_color,handleDelColor:this.handleDelColor,colorBlockMap:f,colorUnit:m,canDel:!0}),a.a.createElement(W,{title:I18N.preview_panel.screen_color,handleDelColor:this.handleDelColor,colorBlockMap:o,colorUnit:m}),a.a.createElement(W,{title:I18N.preview_panel.sketch_color,handleDelColor:this.handleDelColor,colorBlockMap:v,colorUnit:m,fromSketch:!0})),l.length>0&&a.a.createElement(Ce,null,I18N.preview_panel.font_title,a.a.createElement(z,{globalText:l})))}}]),y()(t,e),t}(r.PureComponent);F.propTypes={adapterWidth:i.a.string.isRequired,adapterHeight:i.a.string.isRequired,colorUnit:i.a.string.isRequired,screenColor:i.a.array,userPickColor:i.a.array,documentColor:i.a.array,globalText:i.a.array,globalColor:i.a.array,dispatch:i.a.func};var z=function(e){return e.globalText.map(function(e){return a.a.createElement(h,{key:e,className:"global-font",data:[e]})})};z.propTypes={globalText:i.a.array};var W=function(e){var t=e.title,n=e.colorBlockMap,r=e.fromSketch,o=e.handleDelColor,i=e.canDel,c=e.colorUnit,l=e.focusColor;return a.a.createElement("div",null,a.a.createElement("span",{className:"second-title"},t),a.a.createElement("div",{className:"panel-row"},n.length?n.map(function(e,n){var u=H(r,e,"rgba"),d=Object(s.b)(u,c);return a.a.createElement(V,{key:"".concat(n).concat(e),canDel:i,title:t,handleDelColor:o,color:d,rgbaColor:u,colorUnit:c,focusColor:l})}):a.a.createElement(X,null)))};W.propTypes={title:i.a.string.isRequired,colorBlockMap:i.a.array.isRequired,handleDelColor:i.a.func.isRequired,fromSketch:i.a.bool,canDel:i.a.bool,colorUnit:i.a.string,focusColor:i.a.string};var q=Object(D.connect)(function(e){var t=e.container.previewSetting;return{userPickColor:t.userPickColor,focusColor:t.focusColor}})(W),H=function(e,t,n){return Object(s.b)(e?Object(s.e)(t):t,n)},V=function(e){var t=e.color,n=e.rgbaColor,r=e.colorUnit,o=(e.index,e.handleDelColor),i=e.canDel,l=e.title,u=e.focusColor,d=t===Object(s.b)(u,r);return a.a.createElement(c.Dropdown,{shouldOpenOnHover:!0,className:B("color-dropdown",{"is-focus":d}),opener:a.a.createElement(c.Tooltip,{arrowed:!1,"data-type":"copy","data-click-reason":l,"data-clipboard-text":t,className:"row-item color-block",style:{background:n},duration:1e3,content:{click:I18N.preview_panel.copied}}),inflexible:!0,arrowed:!0,menuX:"left",menuY:"top",menu:a.a.createElement(Z,{color:t,rgbaColor:n,canDel:i,handleDelColor:o}),menuClassName:Object(c.trimList)(["palette-dropdown-menu",r])})};V.propTypes={color:i.a.string.isRequired,title:i.a.string,handleDelColor:i.a.func,index:i.a.number,colorUnit:i.a.string,rgbaColor:i.a.string,canDel:i.a.bool,focusColor:i.a.string};var X=function(){return a.a.createElement("div",{className:"forbid-color"},a.a.createElement("div",{className:"transparent"}))},Z=function(e){function t(){var e,n,r;v()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return S()(r,(n=r=S()(this,(e=x()(t)).call.apply(e,[this].concat(o))),T()(k()(k()(r)),"handleClick",function(e){var t=r.props,n=t.rgbaColor;(0,t.handleDelColor)(n)}),n))}return w()(t,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.canDel;return a.a.createElement("div",null,a.a.createElement("span",null,t),n&&a.a.createElement(A.b,{type:"dora",name:"trash",className:"trash",onClick:this.handleClick}))}}]),y()(t,e),t}(r.PureComponent);Z.propTypes={color:i.a.string.isRequired,rgbaColor:i.a.string,handleDelColor:i.a.func.isRequired,canDel:i.a.bool};var G=n("cJHP"),K=n.n(G),Y=n("J4zp"),J=n.n(Y),Q=n("l00i"),$=n.n(Q),ee=function(e){function t(){var e,n,r;v()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return S()(r,(n=r=S()(this,(e=x()(t)).call.apply(e,[this].concat(i))),T()(T()(T()(T()(k()(k()(r)),"renderCode",function(e){return{px:r.renderCss,dp:r.renderAndroidCode,pt:r.renderIos}[Object(I.f)(e)]()}),"renderIos",function(){var e=r.props,t=e.code,n=e.language,o=e.text;return a.a.createElement(ne,{code:t,language:n,text:o})}),"renderCss",function(){var e=r.props,t=e.code,n=e.language;return a.a.createElement(te,{language:n,code:t})}),"renderAndroidCode",function(){var e=r.props,t=e.whichAndView,n=e.code,o=e.text;return a.a.createElement(re,{code:n,text:o,whichAndView:t})}),n))}return w()(t,[{key:"render",value:function(){var e=this.props.language;return a.a.createElement(Ce,null,a.a.createElement("div",null,e.toUpperCase(),a.a.createElement(he,{text:"#code-content"})),a.a.createElement("div",{className:"code-content",id:"code-content"},this.renderCode(e)))}}]),y()(t,e),t}(r.PureComponent);T()(ee,"propTypes",{code:i.a.object,whichAndView:i.a.string,language:i.a.string,text:i.a.string});var te=function(e){var t=e.language,n=e.code,r=ae(t),o=oe(t),i=ce(n);return $()(i).map(function(e){var t=J()(e,2),n=t[0],i=t[1];return a.a.createElement("div",{key:n},"".concat(n).concat(o).concat(i).concat(r))})};te.propTypes={code:i.a.object.isRequired,language:i.a.string};var ne=function(e){var t=e.code,n=e.text;return ie({code:t,text:n}).map(function(e){return a.a.createElement("div",{key:e},e)})};ne.propTypes={code:i.a.object.isRequired,text:i.a.string};var re=function(e){var t=e.code,n=e.text,r=e.whichAndView;return a.a.createElement("div",null,a.a.createElement("div",{className:"highlight-row"},"<".concat(r)),$()(t).map(function(e){var t=J()(e,2),n=t[0],r=t[1];return a.a.createElement("div",{key:n},"android:".concat(n,'="').concat(r,'"'))}),n.length>0&&a.a.createElement("div",null,'android:text="'.concat(n,'"')),a.a.createElement("div",{className:"highlight-row"},"/>"))};re.propTypes={code:i.a.object.isRequired,text:i.a.string,whichAndView:i.a.string};var ae=function(e){switch(e){case"stylus":case"sass":return"";default:return";"}},oe=function(e){switch(e){case"stylus":return" ";default:return": "}},ie=function(e){var t=e.code,n=e.text,r=t.width,a=t.height,o=t.x,i=t.y,c=t.fontFamily,s=t.cornerRadius,l=t.fontSize,u=t.opacity,d=t.borderWidth,p=t.borderColor,f=t.alignment,h=t.backgroundColor,m=n?"textLayer":"layer",v=n?"UILabel":"UIView",g=[];return g.push("let ".concat(m," = ").concat(v,"(frame: CGRect(x: ").concat(o,", y:").concat(i,", width: ").concat(r,", height: ").concat(a,"))")),h&&g.push("".concat(m,".backgroundColor = ").concat(h)),u&&g.push("".concat(m,".alpha = ").concat(u)),s&&g.push("layer.layer.cornerRadius = ".concat(s)),d&&g.push("layer.layer.borderWidth = ".concat(d)),p&&g.push("layer.layer.borderColor = ".concat(p,".cgColor")),n&&(g.push('let textContent = "'.concat(n,'"')),g.push('let textString = NSMutableAttributedString(string: textContent, attributes: [\n      NSAttributedStringKey.font: UIFont(name: "'.concat(c,'", size: ').concat(l,")!\n      ])")),g.push("let textRange = NSRange(location:0, length: textString.length)"),g.push("let paragraphStyle = NSMutableParagraphStyle()"),g.push("paragraphStyle.alignment = .".concat(f)),g.push("textString.addAttribute(NSAttributedStringKey.paragraphStyle, value: paragraphStyle, range: textRange)"),g.push("textLayer.attributedText = textString")),g},ce=function(e){if(e["border-color"]&&e["border-width"]){var t={border:"".concat(e["border-width"]," solid ").concat(e["border-color"])};return delete e["border-color"],delete e["border-width"],K()(e,t)}return e},se=n("sEfC"),le=n.n(se),ue=function(e){function t(){var e,n,r;v()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return S()(r,(n=r=S()(this,(e=x()(t)).call.apply(e,[this].concat(o))),T()(T()(T()(T()(T()(k()(k()(r)),"imageRef",function(e){return r.$image=e}),"handleClick",function(){var e=r.props,t=e.imageSetZip,n=e.name;Object(P.e)({url:t,name:n,type:"zip"})}),"handleOnload",function(){Object(P.b)({image:r.$image,adjust:38}),r.setState({imageLoad:!0})}),"handleError",function(){console.error("image info error")}),"debounceClick",le()(r.handleClick,500,{leading:!0})),n))}return w()(t,[{key:"render",value:function(){var e=this.props,t=e.imageSet,n=e.name,r=t[0].src,o={background:"url(".concat(de,") left top"),backgroundSize:"cover"};return a.a.createElement(Ce,null,a.a.createElement("div",{className:"slice-title"},I18N.preview_panel.export,a.a.createElement("span",{onClick:this.debounceClick},I18N.preview_panel.download_single)),a.a.createElement("div",{className:"slice-panel"},a.a.createElement("div",{className:"slice-item-wrap",style:o},a.a.createElement("img",{src:r,alt:n,ref:this.imageRef,onLoad:this.handleOnload,onError:this.handleError})),a.a.createElement("p",{className:"slice-item-name"},n)))}}]),y()(t,e),t}(r.PureComponent);T()(ue,"propTypes",{imageSetZip:i.a.string,imageSet:i.a.array,name:i.a.string});var de="/images/preview/slice-bg.png",pe=n("sxGJ"),fe=n.n(pe),he=function(e){function t(){var e;return v()(this,t),(e=S()(this,x()(t).call(this))).onClipboardEvent=e.onClipboardEvent.bind(k()(k()(e))),e}return w()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.target,r=t.text;this.clipboard=r?new fe.a(this.$copyBtn,{text:function(){return Object(P.o)(document.querySelector(r).innerText)}}):new fe.a(this.$copyBtn,{target:function(){return document.querySelector(n)}}),this.clipboard.on("success",function(t){e.error=!1,window.getSelection().removeAllRanges(),e.onClipboardEvent()}),this.clipboard.on("error",function(t){e.error=!0,e.onClipboardEvent()})}},{key:"componentWillUnmount",value:function(){this.clipboard.destroy()}},{key:"onClipboardEvent",value:function(){MB.event("使用了代码复制","运行页")}},{key:"render",value:function(){var e=this;return a.a.createElement(c.Tooltip,{arrowed:!1,content:{click:I18N.preview_panel.copied},duration:1e3,className:p.a.copyBtn},a.a.createElement("span",{ref:function(t){return e.$copyBtn=t}},I18N.copy))}}]),y()(t,e),t}(r.Component);T()(he,"propTypes",{target:i.a.string,text:i.a.string});var me=u.a.bind(p.a),ve=function(e){var t=e.value;return a.a.createElement("div",{className:"".concat(me("container")," ").concat(me("layer-name"))},a.a.createElement(h,{title:I18N.preview_panel.layer_name,data:[t]}))};ve.propTypes={value:i.a.string};var ge=function(e){var t=e.colorUnit,n=e.backgroundColorSort;return a.a.createElement(Ce,null,I18N.preview_panel.fills,n.map(function(e,n){var r=e.value,o=e.type,i=void 0===o?"color":o,c=e.opacity,l=e.gradient,u=Object(s.c)(r),d=u&&Object(s.b)(u,t);return"color"===i?a.a.createElement(O,{stateColor:d,rgbaColor:u,title:I18N.preview_panel.color,key:n}):a.a.createElement(ye,{gradient:l,colorUnit:t,opacity:c,key:n})}))};ge.propTypes={backgroundColorSort:i.a.array,colorUnit:i.a.string};var ye=function(e){var t=e.gradient,n=t.color_stops,r=void 0===n?[]:n,o=(t.from,t.to,t.type),i=e.opacity,c=e.colorUnit;return a.a.createElement("div",null,r.length>0&&r.map(function(e,t){var n=e.color;e.position;return a.a.createElement("div",{key:"".concat(n).concat(t)},a.a.createElement(h,{colorUnit:c,color:Object(s.c)(n),title:0==t?I18N.preview_panel.gradient:""}))}),i&&a.a.createElement(h,{title:I18N.preview_panel.opacity,data:["".concat(100*i,"%")]}),o&&a.a.createElement(h,{data:[o],title:I18N.preview_panel.type}))};ye.propTypes={gradient:i.a.object.isRequired,opacity:i.a.number,colorUnit:i.a.string.isRequired};var be=function(e){var t=e.shadows,n=void 0===t?[]:t,r=e.isInnerShaow,o=void 0!==r&&r,i=e.unit,c=e.ratio,s=e.colorUnit,l=e.textShadows,u=void 0===l?[]:l;return a.a.createElement(Ce,null,o?I18N.preview_panel.inner_shadow:I18N.preview_panel.shadow,n.length>0&&a.a.createElement(we,{shadows:n,unit:i,ratio:c,colorUnit:s}),u.length>0&&a.a.createElement(we,{shadows:u,unit:i,ratio:c,colorUnit:s}))};be.propTypes={shadows:i.a.array,textShadows:i.a.array,isInnerShaow:i.a.bool,unit:i.a.string.isRequired,ratio:i.a.number.isRequired,colorUnit:i.a.string.isRequired};var we=function(e){var t=e.shadows,n=e.unit,r=e.ratio,o=e.colorUnit;return t.map(function(e,t){var i=e.color,c=e.offset_x,l=void 0===c?0:c,u=e.offset_y,d=void 0===u?0:u,p=e.blur_radius,f=void 0===p?0:p,m=e.spread,v=void 0===m?0:m,g=Object(I.a)(l,r,n),y=Object(I.a)(d,r,n),b=Object(I.a)(f,r,n),w=Object(I.a)(v,r,n);return a.a.createElement("div",{className:"shadow-item-gap",key:t},i&&a.a.createElement(h,{title:I18N.preview_panel.color,color:Object(s.c)(i),colorUnit:o}),a.a.createElement(h,{data:[g,y,b,w],dataValue:[I18N.preview_panel._x,I18N.preview_panel._y,I18N.preview_panel.blur,I18N.preview_panel.spread]}))})};we.propTypes={shadows:i.a.array,unit:i.a.string,ratio:i.a.number,colorUnit:i.a.string};var Ee=function(e){var t=e.colorUnit,n=e.borderSort,r=e.unit,o=e.ratio;return a.a.createElement(Ce,null,I18N.preview_panel.borders,n.reverse().map(function(e,n){var i=e.position,c=void 0===i?"inside":i,l=e.color,u=e.thickness,d=e.gradient,p=l&&Object(s.c)(l),f=u&&Object(I.a)(u,o,r);return[l?a.a.createElement(h,{key:"".concat(n).concat(p),color:p,title:I18N.preview_panel.color,colorUnit:t}):a.a.createElement(ye,{gradient:d,colorUnit:t}),c&&a.a.createElement(h,{key:"".concat(n).concat(c),title:I18N.preview_panel.position,data:[c]}),f&&a.a.createElement(h,{key:"".concat(n).concat(f),title:I18N.preview_panel.thickness,data:[f]})]}))};Ee.propTypes={borderSort:i.a.array.isRequired,colorUnit:i.a.string.isRequired,unit:i.a.string.isRequired,ratio:i.a.number.isRequired};var Se=function(){return a.a.createElement("div",{className:me("layer-load")},a.a.createElement("span",{className:me("spinner")}))},Ce=function(e){var t=e.children;return a.a.createElement("section",null,a.a.createElement("div",{className:me("header")},t[0]),a.a.createElement("div",{className:me("container")},t.slice(1)))};Ce.propTypes={children:i.a.array},n.d(t,"a",function(){return h}),n.d(t,"e",function(){return O}),n.d(t,"m",function(){return R}),n.d(t,"b",function(){return L}),n.d(t,"h",function(){return F}),n.d(t,"d",function(){return ee}),n.d(t,"i",function(){return ue}),n.d(t,"f",function(){return he}),n.d(t,"l",function(){return be}),n.d(t,"g",function(){return ge}),n.d(t,"j",function(){return ve}),n.d(t,"c",function(){return Ee}),n.d(t,"k",function(){return Se}),n.d(t,"n",function(){return Ce})},S8MF:function(e,t,n){"use strict";n.d(t,"a",function(){return B});var r=n("RIqP"),a=n.n(r),o=n("cJHP"),i=n.n(o),c=n("eTac"),s=n.n(c),l=n("o0o1"),u=n.n(l),d=n("yXPU"),p=n.n(d),f=n("lwsE"),h=n.n(f),m=n("7W2i"),v=n.n(m),g=n("W8MJ"),y=n.n(g),b=n("a1gu"),w=n.n(b),E=n("Nsbk"),S=n.n(E),C=n("PJYZ"),x=n.n(C),_=n("lSNA"),k=n.n(_),M=n("q1tI"),T=n.n(M),N=n("17x9"),O=n.n(N),j=n("t3Un"),I=n("XkTy"),R=n("rbsZ"),L=n("6XO9"),D=n("PYuP"),A=(n("cWnZ"),window.MBServer),P="file:"===location.protocol?"https://".concat(A):"https://".concat(location.host),B=function(e){function t(e){var n;return h()(this,t),n=w()(this,S()(t).call(this,e)),k()(k()(k()(k()(k()(k()(k()(k()(k()(k()(k()(k()(k()(x()(x()(n)),"updateEmbeddedHTML",function(){var e=n.props.app;if(e.homeScreen()){var t=80+e.shell().width,r=80+e.shell().height;n.setState({embeddedHTML:'<iframe src="'.concat(P,"/app/").concat(e.access_token,'/embed" ')+'width="'.concat(t,'" height="').concat(r,'" ')+'allowTransparency="true" frameborder="0"></iframe>'})}else Object(j.b)("/api/v2/projects/orientations.json",{}).then(function(t){var r="portrait"===t.projects.find(function(t){return t.cid===e.cid}).orientation,a=80+(r?e.shell().width:e.shell().height),o=80+(r?e.shell().height:e.shell().width);n.setState({embeddedHTML:'<iframe src="'.concat(P,"/app/").concat(e.access_token,'/embed" ')+'width="'.concat(a,'" height="').concat(o,'" ')+'allowTransparency="true" frameborder="0"></iframe>'})})}),"setQRCodeRef",function(e){return n.$qrcode=e}),"refreshQRCode",function(){return $(n.$qrcode).empty().qrcode({text:n.state.sharingURL+"?via=qrcode",width:100,height:100})}),"handleSelectAll",function(e){return e.target.select()}),"generateSharingURL",function(e){return n.setState({sharingURL:MB.isOffline()&&"file:"!==location.protocol?location.toString():"file:"===location.protocol?"https://".concat(A,"/app/").concat(e):"https://".concat(location.host,"/app/").concat(e)})}),"handleRefresh",p()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.b)({title:I18N.regenerate_url_title,desc:I18N.regenerate_url_desc});case 2:if(!e.sent){e.next=6;break}t=Math.uuid(31),n.generateSharingURL(t),n.setAttr("access_token",t);case 6:case"end":return e.stop()}},e,this)}))),"handleUpdateShell",function(e){var t=n.props.app;t.shell_type=e,t.lsave(MB.user.id===t.owner_id),$("body").trigger("queue:save"),n.forceUpdate(),setTimeout(function(){MB.currentProject&&MB.runner.reload()})}),"handlePasswordChange",function(e){return n.setAttr("password",e)}),"handleAccess",function(e){var t=e.value;"restricted"===t&&(n.props.app.password=""),n.setAttr("access",t)}),"handleCollaborators",function(){n.setState({isCollaboratorModalOpen:!0})}),"handlePreviewSettings",function(e){var t=e.idxList,r=n.props.app,a=new s.a(t);i()(r,{highlight:a.has(0),wechat:a.has(1)}),n.props.app.lsave(),$("body").trigger("queue:save"),n.forceUpdate()}),"handleSlackWebHook",function(e){return n.setAttr("slack_web_hook_url",e.target.value)}),"onCloseCollaboratorModal",function(){return n.setState({isCollaboratorModalOpen:!1})}),n.state={sharingURL:"",embeddedHTML:"en"===MBLocale?"generating code…":"正在生成…",isCollaboratorModalOpen:!1},n}return y()(t,[{key:"componentWillMount",value:function(){var e=this.props.app;this.generateSharingURL(e.access_token)}},{key:"componentDidMount",value:function(){this.updateEmbeddedHTML(),setTimeout(this.refreshQRCode,50)}},{key:"componentWillReceiveProps",value:function(e){var t=e.app,n=e.isOpen,r=this.props.isOpen;r&&!n?(this.setState({sharingURL:"",embeddedHTML:"en"===MBLocale?"generating code…":"正在生成…"}),$(this.$qrcode).empty()):!r&&n&&(this.updateEmbeddedHTML(),this.generateSharingURL(t.access_token))}},{key:"componentDidUpdate",value:function(e,t){var n=e.isOpen,r=t.sharingURL,a=this.props.isOpen,o=this.state.sharingURL;(!n&&a||r!==o)&&setTimeout(this.refreshQRCode,50)}},{key:"setAttr",value:function(e,t){this.props.app[e]=t,this.props.app.lsave(),$("body").trigger("queue:save"),this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.app,o=e.dispatch,i=this.state,c=i.sharingURL,s=i.embeddedHTML,l=i.isCollaboratorModalOpen,u=/edge.modao.cc/.test(location.href),d=r.owner_id===MB.user.id,p=d||r.canAdmin(),f=d||r.canEdit(),h=!/^\/app\//i.test(location.pathname),m=[{value:"restricted",label:T.a.createElement("span",{className:"restricted-access"},T.a.createElement("span",null,I18N.restricted_intro),"restricted"===r.access&&T.a.createElement(L.Button,{type:"text",className:"manage-collaborators",onClick:this.handleCollaborators},I18N.manage))},{value:"private",label:T.a.createElement("span",null,I18N.private_intro,T.a.createElement("p",null,"private"===r.access&&(MB.user.id&&MB.user.limitation.encryptable?T.a.createElement(L.Input,{placeholder:I18N.sharing_password,value:r.password||"",onChange:this.handlePasswordChange,readOnly:!p}):T.a.createElement(L.Button,{type:"text",className:"renew",onClick:R.b},I18N.password_protection))))}],v=[{value:"device",label:I18N.device_shell},{value:"default",label:I18N.default_shell},{value:"none",label:I18N.none_shell}],g=[{value:"highlight",label:I18N.highlight_clickable},{value:"wechat",label:I18N.view_in_browser}],y=g.reduce(function(e,t,n){return r[t.value]?a()(e).concat([t.value]):e},[]),b=r.team_cid?r.cteam():r;return T.a.createElement(L.Modal,{isOpen:t,className:"sharing-modal",title:I18N.share,onClose:n},T.a.createElement("section",{className:"qrcode",ref:this.setQRCodeRef}),T.a.createElement("section",{className:"sharing-url"},T.a.createElement(L.Input,{readOnly:!0,value:c,onClick:this.handleSelectAll}),p&&T.a.createElement(L.Button,{type:"primary",onClick:this.handleRefresh},I18N.regenerate)),T.a.createElement("section",{className:"sharing-code"},T.a.createElement("p",null,I18N.embed_tips),T.a.createElement(L.Textarea,{readOnly:!0,onClick:this.handleSelectAll,value:s})),h&&T.a.createElement("section",null,T.a.createElement(L.FormEntry,{name:I18N.access_permission},T.a.createElement(L.RadioGroup,{isDisabled:!p,optionList:m,onChange:this.handleAccess,value:r.access}))),f&&T.a.createElement("section",null,T.a.createElement(L.FormLabel,{name:I18N.default_shell_field},T.a.createElement(L.Select,{optionList:v,value:r.shell_type,onChange:this.handleUpdateShell}))),p&&T.a.createElement("section",null,T.a.createElement(L.FormEntry,{name:I18N.preview_settings},T.a.createElement(L.CheckGroup,{optionList:g,onChange:this.handlePreviewSettings,valueList:y}))),u&&T.a.createElement(L.FormEntry,{name:"Slack Web Hook"},T.a.createElement("input",{type:"text",value:r.slack_web_hook_url||"",onBlur:this.handleSlackWebHook})),T.a.createElement(D.a,{isOpen:l,onClose:this.onCloseCollaboratorModal,dispatch:o,host:b,userRole:b.owner_id===MB.user.id?"owner":b.roleByUid(MB.user.id)}))}}]),v()(t,e),t}(M.PureComponent);k()(B,"propTypes",{dispatch:O.a.func.isRequired,isOpen:O.a.bool,onClose:O.a.func,app:O.a.object})},"SA+Z":function(e,t,n){var r=n("wTVA"),a=n("EbDI"),o=n("wkBT");e.exports=function(e){return r(e)||a(e)||o()}},Sxd8:function(e,t){e.exports=function(e){return e}},T7iu:function(e,t,n){"use strict";n("edRh"),n("Xgir"),n("fRjM"),n("4MIG"),n("rXnp"),n("HLqo"),n("2rXa")},TKrE:function(e,t){e.exports=function(e){return e}},TSYQ:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r))e.push(a.apply(null,r));else if("object"===o)for(var i in r)n.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}void 0!==e&&e.exports?e.exports=a:void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},UDep:function(e,t,n){n("wgeU"),n("FlQf"),n("bBy9"),n("g33z"),n("XLbu"),n("/h46"),n("dVTT"),e.exports=n("WEpk").Map},UJpD:function(e,t,n){e.exports={detector:"p677pQqCIRS-SsEhJWgV4"}},UZR7:function(e,t,n){},UbMB:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(this&&this[r]||r);else if(Array.isArray(r))e.push(a.apply(this,r));else if("object"===o)for(var i in r)n.call(r,i)&&r[i]&&e.push(this&&this[i]||i)}}return e.join(" ")}void 0!==e&&e.exports?e.exports=a:void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},UfWW:function(e,t,n){var r=n("KwMD"),a=n("ut/Y"),o=n("Sxd8"),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var s=null==n?0:o(n);return s<0&&(s=i(c+s,0)),r(e,a(t,3),s)}},WVP6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.createReduxEntry=function(){var e=null,t={},n=function(e,n){if("string"!=typeof e)throw new Error("[ReduxEntry][setEntry] non-string actionType: "+e);if("function"!=typeof n)throw new Error("[ReduxEntry][setEntry] non-function entryFunction: "+e+", "+n);t[e]&&console.warn("[ReduxEntry][setEntry] possible unexpected entry overwrite: "+e),t[e]=n};return{middleware:function(n){if("function"!=typeof n.getState||"function"!=typeof n.dispatch)throw new Error("[ReduxEntry][middleware] invalid reduxMiddlewareStore");if(null!==e)throw new Error("[ReduxEntry][middleware] already set reduxMiddlewareStore");return e=n,function(n){return function(r){return!0===function(n){var r=t[n.type];return r&&r(e,n)}(r)||n(r)}}},setEntry:n,setEntryMap:function(e){return Object.keys(e).forEach(function(t){return n(t,e[t])})}}},t.createStateStore=function(e){if(void 0===e)throw new Error("[ReduxEntry][createStateStore] initialState expected");return{getState:function(){return e},setState:function(t){return e=t},wrapEntry:function(t){return function(n,r){return t(e,n,r)}}}},t.createStateStoreReducer=function(e,t){var n=t.getState,r=t.setState;return function(t,a){var o=a.type,i=a.payload;return o===e&&r(i),n()}},t.createStateStoreMergeReducer=function(e,t){var n=t.getState,a=t.setState;return function(t,o){var i=o.type,c=o.payload;return i===e&&a(r({},n(),c)),n()}}},WcC0:function(e,t,n){},XKAG:function(e,t,n){var r=n("ut/Y"),a=n("MMmD"),o=n("7GkX");e.exports=function(e){return function(t,n,i){var c=Object(t);if(!a(t)){var s=r(n,3);t=o(t),n=function(e){return s(c[e],e,c)}}var l=e(t,n,i);return l>-1?c[s?t[l]:l]:void 0}}},XLbu:function(e,t,n){var r=n("Y7ZC");r(r.P+r.R,"Map",{toJSON:n("8iia")("Map")})},XQpQ:function(e,t,n){"use strict";var r=n("MVZn"),a=n.n(r),o=n("rVSK"),i=n.n(o),c=n("lwsE"),s=n.n(c),l=n("7W2i"),u=n.n(l),d=n("W8MJ"),p=n.n(d),f=n("a1gu"),h=n.n(f),m=n("Nsbk"),v=n.n(m),g=n("PJYZ"),y=n.n(g),b=n("lSNA"),w=n.n(b),E=n("eTac"),S=n.n(E),C=n("q1tI"),x=n.n(C),_=n("17x9"),k=n.n(_),M=n("wd/R"),T=n.n(M),N=n("6XO9"),O='<svg viewBox="0 0 64 64"><g fill="none" fill-rule="evenodd"><circle stroke-opacity=".854" stroke="#8D9EA7" cx="32" cy="32" r="31.5"/><path d="M32 28.23l12.67-12.67c.292-.293.767-.293 1.06 0l2.71 2.71c.293.293.293.768 0 1.06L35.77 32l12.67 12.67c.293.292.293.767 0 1.06l-2.71 2.71c-.293.293-.768.293-1.06 0L32 35.77 19.33 48.44c-.292.293-.767.293-1.06 0l-2.71-2.71c-.293-.293-.293-.768 0-1.06L28.23 32 15.56 19.33c-.293-.292-.293-.767 0-1.06l2.71-2.71c.293-.293.768-.293 1.06 0L32 28.23z" fill="#415058"/></g></svg>',j=n("i6OX"),I=n("RUem"),R=n("7Qib"),L=n("zAG7"),D=["zh-CN","en"],A={gift:["最高领取价值<em>{price} 元 VIP 会员</em>","Get<br>VIP membership <em>up to {price}</em>"],joinNow:["立即参与","Join Now"],signupNow:["立即注册","Sign up"],signup:["注册","Sign up"],signupForMockingBot:["注册墨刀帐户","Sign up for MockingBot"],name:["姓名","Name"],email:["Email 地址","Email"],pwd:["密码","Password"],emailTaken:["Email 已被使用","The email has been taken already!"],agreeToTOS:['点击「立即注册」按钮将视为您<br />同意墨刀<a href="/tos" target="_blank">使用条款</a>','By clicking ‘Sign up’, <br>you are agreeing to MockingBot’s <a href="/tos" target="_blank">Terms of Service</a>.'],alreadyAUser:["已有墨刀帐戶，查看活动详情","Already a user? Join the event now!"],youveWon:["您已获得","You’ve won the "],newbieAward:["尝鲜奖","Newbie Award"],stormAward:["神器奖","Storm Award"],checkAccountForAward:['可在「<a href="/account" target="_blank">我的帐户</a>」中查看','Check the award in your “<a href="/account" target="_blank">Account</a>”'],eventURL:["活动链接","Event URL"],checkStormAward:["去了解神器奖","Check out Storm Award"],shareWithFriends:["分享活动给好友","Share with Friends"]},P=["CN","US","IN"],B={currencySymbol:["¥","$","$"],sketchPluginEvent201801Value:["78","19.98","9.98"],sketchPluginEvent201801URL:["https://modao.cc/event/2018/01/sketch-plugin","https://mockingbot.com/event/2018/01/sketch-plugin","https://mockingbot.in/event/2018/01/sketch-plugin"]};n("hcHk");n.d(t,"b",function(){return ne}),n.d(t,"d",function(){return re}),n.d(t,"a",function(){return ae}),n.d(t,"c",function(){return oe});var U=window.MB,F=(U=void 0===U?{}:U).localStorageDelegate,z=void 0===F?localStorage:F,W=document.documentElement,q=(window.MB||W.dataset).serverCountry,H=void 0===q?"CN":q,V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CN";return B.currencySymbol[P.indexOf(e)]}(H),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return function(t){return A[t][D.indexOf(e)]}}("en"===W.lang?"en":"zh-CN"),Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CN";return function(t){return B[t][P.indexOf(e)]}}(H),G="sketch_plugin_event_2018_01_holy_grail",K="sketch_plugin_event_2018_01_gift_closed",Y=new S.a(JSON.parse(z.getItem(G)||"[]")),J="CN"===H&&T()().isBefore("2018-02-10","day")||"CN"!==H&&T()().isAfter("2018-02-13","hour"),Q=new URLSearchParams(location.search),ee=Q.has("inspect"),te=/^2\.3\.\d+/.test(Q.get("sketch_plugin_version")),ne=function(e){function t(e){var n;s()(this,t),n=h()(this,v()(t).call(this,e)),w()(w()(w()(w()(y()(y()(n)),"onSignUp",function(){return n.setState({hasSignedUp:!0})}),"onCloseEventGift",function(){return n.setState({isEventGiftClosedByUser:!0},function(){return!n.props.isDemo&&z.setItem(K,!0)})}),"onOpenTrialAward",function(){return n.setState({shouldShowTrialAward:!0})}),"onCloseAward",function(){return n.setState({shouldShowTrialAward:!1,shouldShowHolyGrailAward:!1})});var r=MB.user&&MB.user.email,a=Y.has(r),o=!!r&&!a&&ee&&te;return o&&z.setItem(G,i()(Y.add(r))),n.state={isFormDataWrong:!1,hasSignedUp:!1,shouldShowHolyGrailAward:o,shouldShowTrialAward:!1,isEventGiftClosedByUser:!e.isDemo&&!!z.getItem(K)},n}return p()(t,[{key:"render",value:function(){var e=this.props.isLoggedIn,t=this.state,n=t.isEventGiftClosedByUser,r=t.hasSignedUp,a=t.shouldShowTrialAward,o=t.shouldShowHolyGrailAward,i=J&&!n;return x.a.createElement("div",null,i&&x.a.createElement("div",{className:"event-gift"},x.a.createElement("button",{className:"close",onClick:this.onCloseEventGift,dangerouslySetInnerHTML:{__html:O}}),x.a.createElement("span",{className:"desc",dangerouslySetInnerHTML:{__html:X("gift").replace(/\{price\}/g,"".concat(V).concat(Z("sketchPluginEvent201801Value")))}}),e||r?x.a.createElement("a",{className:"start",href:"/event/2018/01/sketch-plugin",target:"_blank"},X("joinNow")):x.a.createElement(re,{onOpenTrialAward:this.onOpenTrialAward,onSignUp:this.onSignUp})),x.a.createElement(ae,{isOpen:a||o,type:a?"trial":o?"holy-grail":null,onClose:this.onCloseAward}))}}]),u()(t,e),t}(C.PureComponent);ne.propTypes={isLoggedIn:k.a.bool,isDemo:k.a.bool};var re=function(e){function t(e){var n;return s()(this,t),n=h()(this,v()(t).call(this,e)),w()(w()(w()(y()(y()(n)),"createOnFormDataChange",function(e){return function(t){return n.setState({formData:a()({},n.state.formData,w()({},e,t))})}}),"onChangeEmail",function(e){return n.setState({formData:a()({},n.state.formData,{email:e})})}),"onSubmitSignUp",function(){var e=n.state.formData,t=e.name,r=e.email,a=e.pwd;n.setState({isFormDataWrong:!1}),Object(R.f)("/events/sketch_plugin_sign_up.json",i()({username:t,email:r,password:a,locale:"zh-CN"})).then(function(){return Object(R.f)("/sessions.json",i()({email:r,password:a})).then(function(){var e=n.props,t=e.onOpenTrialAward,r=e.onSignUp;if(!J)return location.assign("/workspace/apps");$(".sign-up-modal .close-btn").click(),t(),r()})}).catch(function(){return n.setState({isFormDataWrong:!0})})}),n.state={formData:{name:"",email:"",pwd:""},isFormDataWrong:!1},n}return p()(t,[{key:"render",value:function(){var e=this.state,t=e.formData,n=t.name,r=t.email,a=t.pwd,o=e.isFormDataWrong,i=!!n&&L.a.test(r)&&!!a;return x.a.createElement(N.Modal,{openerType:"custom",opener:x.a.createElement("button",{className:"start"},X("signupNow")),className:"sign-up-modal",title:X("signupForMockingBot")},x.a.createElement("div",{className:"input-entry"},x.a.createElement(j.b,{type:"mb",name:"user"}),x.a.createElement(N.Input,{placeholder:X("name"),defaultValue:n,onChange:this.createOnFormDataChange("name")})),x.a.createElement("div",{className:"input-entry"},x.a.createElement(j.b,{type:"mb",name:"mail"}),x.a.createElement(N.InputEmail,{placeholder:X("email"),defaultValue:r,onChange:this.onChangeEmail})),x.a.createElement("div",{className:"input-entry"},x.a.createElement(j.b,{type:"mb",name:"lock"}),x.a.createElement(N.Input,{placeholder:X("pwd"),type:"password",defaultValue:a,onChange:this.createOnFormDataChange("pwd")})),x.a.createElement(N.Button,{type:"primary",isDisabled:!i,onClick:this.onSubmitSignUp},X("signup")),o?x.a.createElement("p",{className:"error-msg"},X("emailTaken")):x.a.createElement("p",{dangerouslySetInnerHTML:{__html:X("agreeToTOS")}}),x.a.createElement("a",{className:"RegularButton",target:"_blank",href:"/event/2018/01/sketch-plugin"},X("alreadyAUser")))}}]),u()(t,e),t}(C.PureComponent);re.propTypes={onOpenTrialAward:k.a.func,onSignUp:k.a.func};var ae=function(e){function t(e){var n;return s()(this,t),n=h()(this,v()(t).call(this,e)),w()(w()(y()(y()(n)),"onShare",function(){return n.setState({isSharing:!0})}),"onClose",function(){var e=n.props,t=e.type,r=e.onClose;return"trial"===t?location.reload(!0):r()}),n.state={isSharing:!1},n}return p()(t,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.type,a=this.state.isSharing;return J&&x.a.createElement(N.Modal,{isOpen:t,className:"award-modal ".concat(r," ").concat(a?"is-sharing":""),onClose:n},x.a.createElement("button",{className:"close-btn",dangerouslySetInnerHTML:{__html:O},onClick:this.onClose}),x.a.createElement("div",{className:"award"}),x.a.createElement("div",{className:"awarding"},x.a.createElement("h2",null,X("youveWon"),X("trial"===r?"newbieAward":"stormAward")),x.a.createElement("p",{dangerouslySetInnerHTML:{__html:X("checkAccountForAward")}})),x.a.createElement("div",{className:"sharing"},x.a.createElement("div",{className:"qrcode"}),x.a.createElement(I.f,{text:"#event-url"},X("eventURL")),x.a.createElement("span",{hidden:!0,id:"event-url"},Z("sketchPluginEvent201801URL"))),x.a.createElement("footer",null,"trial"===r&&x.a.createElement("a",{className:"go-to-event-page",target:"_blank",href:"/event/2018/01/sketch-plugin#holy-grail-award",onClick:this.onClose},X("checkStormAward")),x.a.createElement("button",{className:"share",onClick:this.onShare},X("shareWithFriends"))))}}]),u()(t,e),t}(C.PureComponent);ae.propTypes={type:k.a.string,onClose:k.a.func,isOpen:k.a.bool};var oe=function(e){function t(){return s()(this,t),h()(this,v()(t).apply(this,arguments))}return p()(t,[{key:"render",value:function(){return J&&x.a.createElement("a",{className:"SantaBot",target:"_blank",href:"/event/2018/01/sketch-plugin"})}}]),u()(t,e),t}(C.PureComponent)},Xgir:function(e,t,n){},XkTy:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return l});var r=n("cJHP"),a=n.n(r),o=n("8fIB"),i=n.n(o);function c(e){var t=e.dispatch,n=void 0===t?MB.webpackInterface.store.dispatch:t,r=e.type,a=void 0===r?"alert":r,o=e.title,c=e.desc,s=e.isHTML,l=e.confirmText,u=e.cancelText;return new i.a(function(e){return n({type:"container:modal:open",payload:{type:a,title:o,desc:c,isHTML:s,alertType:"confirm",canCancel:!0,canConfirm:!0,cancelText:u,confirmText:l,onCancel:function(){return e(!1)},onConfirm:function(){return e(!0)}}})})}function s(e){var t=e.dispatch,n=void 0===t?MB.webpackInterface.store.dispatch:t,r=e.type,a=void 0===r?"alert":r,o=e.title,c=e.desc,s=e.isHTML,l=e.confirmText;return new i.a(function(e){return n({type:"container:modal:open",payload:{type:a,title:o,desc:c,isHTML:s,alertType:"alert",canCancel:!1,canConfirm:!0,confirmText:l,onConfirm:function(){return e(!0)}}})})}function l(e){var t=e.dispatch,n=void 0===t?MB.webpackInterface.store.dispatch:t,r=e.type,a=void 0===r?"form":r,o=e.title,c=e.desc,s=e.isHTML,l=e.confirmText;return new i.a(function(e,t){return n({type:"container:modal:open",payload:{type:a,title:o,desc:c,isHTML:s,alertType:"prompt",canCancel:!1,canConfirm:!0,confirmText:l,canClose:!1,onConfirm:function(){var n=(document.querySelector(".global-alert-portal .prompt-pwd input")||{}).value;return n?e(n):t()},onCancel:t}})})}a()(MB,{confirm:c,alert:s,prompt:l})},XpKX:function(e,t,n){e.exports={"adjust-container":"_2767PBbPLOHyCg-9kbwJq7","is-offline-mode":"_2Rn4b7GJxlQ8HllhNCcowW","is-uichina":"VXUfuoQkv54ubWe5VFlrv"}},XrEr:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",function(){return getNormalRgbaColor}),__webpack_require__.d(__webpack_exports__,"e",function(){return parseSketchColor2rgba}),__webpack_require__.d(__webpack_exports__,"b",function(){return getColorFromUnit}),__webpack_require__.d(__webpack_exports__,"d",function(){return getUIColor}),__webpack_require__.d(__webpack_exports__,"a",function(){return DEFAULT_COLOR});var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("J4zp"),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__),lodash_round__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("tpxX"),lodash_round__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(lodash_round__WEBPACK_IMPORTED_MODULE_1__),_utils___WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("/5+U"),rgba2hexWithA=function(e){if(checkColorUnit(e)!==RGBA)return console.warn("Not rgbacolor but use rgba2hexWithA"),e;var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d+)?)[\s+]?/i);return t&&t.length>=4?{hex:("#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2)).toUpperCase(),o:Number((+t[4]).toFixed(2))}:e},getNormalRgbaColor=function(e){if(!e)return DEFAULT_COLOR;var t=parseSketchColor2rgba(e);return t?getColorFromUnit(t,RGBA):e},parseSketchColor2rgba=function parseSketchColor2rgba(rgbaFuncStr){var colorType=checkColorUnit(rgbaFuncStr);if(colorType!==RGBA)return getColorFromUnit(rgbaFuncStr,RGBA);function rgba(){var e=arguments[0],t=arguments[1],n=arguments[2],r=arguments[3];return e<=1&&t<=1&&n<=1?{r:parseInt(lodash_round__WEBPACK_IMPORTED_MODULE_1___default()(255*e),10),g:parseInt(lodash_round__WEBPACK_IMPORTED_MODULE_1___default()(255*t),10),b:parseInt(lodash_round__WEBPACK_IMPORTED_MODULE_1___default()(255*n),10),a:Number(Number(r).toFixed(2))}:{r:e,g:t,b:n,a:void 0===r?1:r}}var _eval=eval(rgbaFuncStr),r=_eval.r,g=_eval.g,b=_eval.b,a=_eval.a;return"rgba(".concat(r,", ").concat(g,", ").concat(b,", ").concat(a,")")},checkColorUnit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DEFAULT_COLOR;return e.includes(RGBA)?RGBA:e.includes(RGB)?RGB:e.includes("#")&&9===e.length?ARGB:e.includes("#")?HEX:!!e.includes(TRANSPARENT)&&TRANSPARENT},getColorFromUnit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RGBA;if(!e)return DEFAULT_COLOR;var n=checkColorUnit(e);if(!n)return DEFAULT_COLOR;switch(n){case RGBA:if(t===n)return e;if(t===RGB)return rgba2rgb(e);if(t===HEX)return rgba2hex(e);if(t===ARGB)return rgba2argb(e);break;case RGB:if(t===n)return e;if(t===RGBA)return rgb2rgba(e);if(t===HEX)return rgb2hex(e);if(t===ARGB)return rgb2argb(e);break;case HEX:if(t===n)return e;if(t===RGBA)return hex2rgba(e);if(t===RGB)return hex2rgb(e);if(t===ARGB)return hex2argb(e);break;case ARGB:if(t===n)return e;if(t===RGBA)return argb2rgba(e);if(t===RGB)return argb2rgbWithA(e);if(t===HEX)return argb2hexWithA(e);break;case TRANSPARENT:if(t===RGBA)return RGBA_FOR_TRANSPARENT;if(t===RGB)return rgba2rgb(RGBA_FOR_TRANSPARENT);if(t===HEX)return rgba2hex(RGBA_FOR_TRANSPARENT);if(t===ARGB)return rgba2argb(RGBA_FOR_TRANSPARENT);break;default:return e}},rgba2rgbWithA=function(e){if(checkColorUnit(e)!==RGBA)return console.warn("Not rgbacolor but use rgba2rgbWithA"),e;var t=rgba2hexWithA(e),n=t.hex,r=t.o;return n?{rgb:hex2rgb(n),o:r}:DEFAULT_COLOR},hex2rgb=function(e){if(checkColorUnit(e)!==HEX)return console.warn("Not hexcolor but use hex2rgb"),e;if(3===(e=e.replace("#","")).length){var t=e.split(""),n=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(t,3),r=n[0],a=n[1],o=n[2];e="".concat(r).concat(r).concat(a).concat(a).concat(o).concat(o)}var i=parseInt(e.substring(0,2),16),c=parseInt(e.substring(2,4),16),s=parseInt(e.substring(4,6),16);return"rgb(".concat(i,", ").concat(c,", ").concat(s,")")},rgba2rgb=function(e){var t=rgba2rgbWithA(e),n=t.rgb,r=t.o;return n?"".concat(n," ").concat(Math.round(100*r),"%"):e},rgba2hex=function(e){var t=rgba2hexWithA(e),n=t.hex,r=t.o;return n?"".concat(n.toUpperCase()," ").concat(Math.round(100*r),"%"):e},rgba2argb=function(e){if(checkColorUnit(e)!==RGBA)return console.warn("Not rgbacolor but use rgba2argb"),e;var t=rgba2hexWithA(e),n=t.hex,r=t.o;if(!n)return e;var a=("0"+parseInt(255*r,10).toString(16)).slice(-2).toUpperCase();return"#".concat(a).concat(n.slice(1))},rgb2rgba=function(e){return checkColorUnit(e)!==RGB?(console.warn("Not rgbcolor but use rgb2rgba"),e):"rgba(".concat(e.slice(4,-1),", 1)")},rgb2hex=function(e){if(checkColorUnit(e)!==RGB)return console.warn("Not rgbcolor but use rgb2hex"),e;var t=e.match(/^rgb?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);if(t&&4===t.length){var n=("0"+parseInt(t[1],10).toString(16)).slice(-2),r=("0"+parseInt(t[2],10).toString(16)).slice(-2),a=("0"+parseInt(t[3],10).toString(16)).slice(-2);return"#".concat(n).concat(r).concat(a).toUpperCase()}},rgb2argb=function(e){return checkColorUnit(e)!==RGB?(console.warn("Not rgbcolor but use rgb2argb"),e):hex2argb(rgb2hex(e))},hex2argb=function(e){return checkColorUnit(e)!==HEX?(console.warn("Not hexcolor but use hex2argb"),e):"#FF".concat(e.slice(1))},hex2rgba=function(e){return checkColorUnit(e)!==HEX?(console.warn("Not hexcolor but use hex2rgba"),e):rgb2rgba(hex2rgb(e))},argb2rgba=function(e){if(checkColorUnit(e)!==ARGB)return console.warn("Not argbcolor but use argb2rgba"),e;for(var t=[],n=1;n<e.length;n+=2)t.push(e.slice(n,n+2));var r=t[0],a=t[1],o=t[2],i=t[3];return a=parseInt(a,16),o=parseInt(o,16),i=parseInt(i,16),r=Number((parseInt(r,16)/255).toString().slice(0,4)),"rgba(".concat(a,", ").concat(o,", ").concat(i,", ").concat(r,")")},argb2rgbWithA=function(e){if(checkColorUnit(e)!==ARGB)return console.warn("Not argbcolor but use argb2rgbWithA"),e;var t=argb2rgba(e),n=rgba2rgbWithA(t),r=n.rgb,a=n.o;return r?"".concat(r," ").concat(Math.round(100*a),"%"):e},argb2hexWithA=function(e){if(checkColorUnit(e)!==ARGB)return console.warn("Not argbcolor but use argb2hexWithA"),e;var t=argb2rgba(e),n=rgba2hexWithA(t),r=n.hex,a=n.o;return r?"".concat(r.toUpperCase()," ").concat(Math.round(100*a),"%"):e},getUIColor=function getUIColor(color){if(!color)return DEFAULT_COLOR;var rgbaColor=getColorFromUnit(color,"rgba");function rgba(){return{r:arguments[0],g:arguments[1],b:arguments[2],a:arguments[3]}}var _eval2=eval(rgbaColor),r=_eval2.r,g=_eval2.g,b=_eval2.b,a=_eval2.a;return r=Object(_utils___WEBPACK_IMPORTED_MODULE_2__.l)(r/255),g=Object(_utils___WEBPACK_IMPORTED_MODULE_2__.l)(g/255),b=Object(_utils___WEBPACK_IMPORTED_MODULE_2__.l)(b/255),"UIColor(red:".concat(r,", green:").concat(g,", blue:").concat(b,", alpha:").concat(a,")")},RGBA="rgba",ARGB="argb",RGB="rgb",HEX="hex",TRANSPARENT="transparent",RGBA_FOR_TRANSPARENT="rgba(255, 255, 255, 0)",DEFAULT_COLOR="#FFFFFF"},"Xt/L":function(e,t){e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},"Y+p1":function(e,t,n){var r=n("wF/u");e.exports=function(e,t){return r(e,t)}},ZCpW:function(e,t,n){var r=n("lm/5"),a=n("O7RO"),o=n("IOzZ");e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},ZWtO:function(e,t,n){var r=n("4uTw"),a=n("9Nap");e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[a(t[n++])];return n&&n==o?e:void 0}},ZXhj:function(e,t,n){"use strict";function r(e){var t=1/0,n=1/0,r=-1/0,a=-1/0;return e.forEach(function(e){t=Math.min(e.top,t),n=Math.min(e.left,n),r=Math.max(e.left+e.width,r),a=Math.max(e.top+e.height,a)}),{top:t,left:n,right:r,bottom:a,width:r-n,height:a-t}}n.d(t,"a",function(){return r})},a1Ia:function(e,t,n){e.exports={"sub-toolbar":"_1_GW4ZPKsACMqmFUgNIiea","select-input":"_1z2tl9KzoQhfo9Vd0AnQNl"}},abHt:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var r=[{name:"label",icon_text:"文字",text:I18N.w.label,tb_text:"文字",icon_name:"text",width:33,height:23,fs:14,border_radius:"",bs:0,ha:"center",va:"middle",z:5,lh:1.45},{name:"text_view",icon_text:"多行文字",text:I18N.w.text_view_placeholder,tb_text:"多行文字",icon_name:"paragraph",width:200,height:65,fs:14,border_radius:"",bs:0,ha:"left",va:"top",z:5,lh:1.45},{name:"rounded_rect",icon_text:"矩形",text:"",icon_name:"rectangle",width:200,height:100,border_radius:"",bs:1,fs:14,ha:"center",va:"middle",lh:1.45,z:5},{name:"circle_rect",icon_text:"圆形",text:"",icon_name:"circle",width:100,height:100,bs:1,fs:14,ha:"center",va:"middle",lh:1.45,z:5},{name:"triangleb",icon_text:"三角",text:"",icon_name:"triangle-top",width:40,height:30,z:5},{name:"triangletl",icon_text:"三角",text:"",icon_name:"triangle-left-bottom",width:40,height:40,z:5},{name:"hr",icon_text:"线条",text:"",icon_name:"horizontal-line",width:150,height:10,z:5,zoomable:"w,e,n"},{name:"ve",icon_text:"线条",text:"",icon_name:"vertical-line",width:10,height:150,z:5,zoomable:"n,s,w"},{name:"button",icon_text:"按钮",text:I18N.w.button,tb_text:"按钮",icon_name:"btn",width:80,height:30,fs:14,border_radius:"4",bs:1,ha:"center",va:"middle",z:5,icon:"",is:14},{name:"image_view",icon_text:"图片",text:"",icon_name:"img",width:200,height:120,border_radius:"",bs:0,z:5},{name:"icon_button",icon_text:"图标",text:"",icon:"star",icon_name:"smile",width:24,height:24,border_radius:"",bs:0,is:24,z:5,hide:!0},{name:"tab_item",icon_text:"标签",text:I18N.w.tab_item,tb_text:"标签",icon_name:"icon-label",icon:"home",width:80,height:45,fs:12,is:24,z:5,ha:"center",zoomable:"w,e"},{name:"lr",icon_text:"链接区域",tb_text:"链接区域",icon_name:"link",width:45,height:45,bs:0,z:7},{icon_text:"网页",name:"webpage",text:"about:blank",tb_text:"网页",icon_name:"webpage",width:"100%",height:400,z:5,ha:"center"},{name:"pg",icon_text:"全局手势",icon_name:"gesture",icon:"tap",width:40,height:40,bs:0,z:7,zoomable:" "},{name:"sticky",icon_text:"批注",tb_text:"批注",icon_name:"sticker",width:204,height:170,padding:24,fs:12,lh:1.67,z:10},{name:"mtext_input",icon_text:"单行输入",text:I18N.w.mtext_input,tb_text:"单行输入",icon_name:"input",width:200,height:30,fs:14,border_radius:"",bs:1,ha:"left",va:"middle",z:5,padding:8},{name:"mtextarea",icon_text:"多行输入",text:I18N.w.mtextarea,tb_text:"多行输入",icon_name:"textarea",width:280,height:100,fs:14,lh:1.45,border_radius:"",bs:1,ha:"left",z:5,padding:8},{name:"mselect",icon_text:"下拉框",text:"1\n2\n3",tb_text:"下拉框",icon_name:"select",width:200,height:30,fs:14,bs:1,z:5,lh:1.45,padding:8},{name:"mfile_input",icon_text:"选择文件",tb_text:"文件选择",icon_name:"file",width:200,height:30,z:5,padding:8},{name:"mtooltip",icon_text:"聊天气泡",text:I18N.w.mtooltip,tb_text:"聊天气泡",icon_name:"tooltip",width:220,height:40,fs:14,border_radius:"5",ha:"left",va:"top",z:5,lh:1.45,bg:"#8DFA69",bs:1,padding:10},{name:"map_view",icon_text:"地图",text:"",icon_name:"map",width:"100%",height:230,z:4},{name:"mcheckbox2",icon_text:"复选框",icon_name:"checkbox",width:30,height:30,z:5,checked:!1,hide:!0},{name:"mradiobutton",icon_text:"单选框",icon_name:"radio",width:30,height:30,z:5,checked:!1,hide:!0},{name:"ios_check",icon_text:"多选框",width:22,height:22,z:5,checked:!0,hide:!0},{name:"android_check",icon_text:"多选框",width:18,height:18,z:5,checked:!0,hide:!0},{name:"android_radio",icon_text:"单选框",width:20,height:20,z:5,checked:!0,hide:!0},{name:"switch",icon_text:"开关按钮",text:"",icon_name:"toggle",width:50,height:30,bs:0,z:5,zoomable:" ",checked:!0,hide:!0},{name:"ios_switch",icon_text:"开关按钮",text:"",icon_name:"toggle",width:50,height:30,bs:0,z:5,checked:!0,hide:!0},{name:"android_switch",icon_text:"开关按钮",text:"",icon_name:"toggle",width:37,height:20,bs:0,z:5,checked:!0,hide:!0},{name:"navigation_bar",icon_text:"标题栏",text:I18N.w.navbar_title,tb_text:"标题栏",icon_name:"header",width:"100%",height:55,fs:18,z:4,ha:"center",top:23,hide:!0},{name:"nav_bar",icon_text:"标题栏",text:I18N.w.navbar_title,tb_text:"标题栏",icon_name:"header",width:"100%",height:55,fs:18,z:4,ha:"center",top:23},{name:"tab_bar",icon_text:"底栏",text:"",tb_text:"底栏",icon_name:"footer",width:"100%",height:45,bc:"transparent",z:4,zoomable:"n"},{name:"rectangle",icon_text:"空白通栏",text:"",icon_name:"bar",width:"100%",height:100,z:5,zoomable:"n,s",hide:!0},{name:"search_bar",icon_text:"搜索框",text:I18N.w.search,tb_text:"搜索",icon_name:"search-input",width:"100%",height:45,fs:14,ha:"left",z:5,zoomable:"w,e",hide:!0},{name:"keyboard",icon_text:"键盘",text:I18N.w.return,width:"100%",icon_name:"keyboard",z:3,zoomable:" ",numeric:!1,hide:!0},{name:"iphone_keyboard",icon_text:"键盘",text:I18N.w.return,width:"100%",icon_name:"keyboard",z:3,numeric:!1,hide:!0},{name:"ipad_keyboard",icon_text:"键盘",text:I18N.w.return,width:"100%",icon_name:"keyboard",z:3,numeric:!1,hide:!0},{name:"android_keyboard",icon_text:"键盘",text:I18N.w.return,width:"100%",icon_name:"keyboard",z:3,numeric:!1,hide:!0},{name:"status_bar",icon_text:"状态栏",text:I18N.w.carrier,tb_text:"中国移动",icon_name:"battery",width:"100%",height:23,z:3,zoomable:" ",hide:!0},{name:"ios_status_bar",icon_text:"状态栏",icon_name:"battery",width:"100%",height:20,z:3,hide:!0},{name:"iphone_x_status_bar",icon_text:"iPhone X 状态栏",icon_name:"battery",width:"100%",height:44,z:3,hide:!0},{name:"android_status_bar",icon_text:"状态栏",icon_name:"battery",width:"100%",height:23,z:3,hide:!0}],a=r.reduce(function(e,t){return e[t.name]=t,e},{})},aqSL:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),o=n("i8i4"),i=n.n(o),c=n("/MKj"),s=n("q3nj"),l=n("6x+O"),u=n("6ZRU"),d=window.$;t.a={containerReducerMap:s.b,sagaMap:s.c,extendCallback:function(e){e.setObserver("focus-method:request-focus",p),e.renderPreview=function(t){var n=e.store;n.dispatch({type:"entry:refresh:project-related"}),i.a.render(a.a.createElement(c.Provider,{store:n},a.a.createElement(s.a,null)),t)},e.renderPreviewAlert=function(){i.a.render(a.a.createElement(u.a.containers.Alert,{store:e.store}),Object(l.b)())},e.pushData=function(t,n,r){e.store.dispatch({type:"entry:state:push-data",payload:{pushType:t,action:n,data:r}})},e.checkLocationHash=function(){var t=window.location.hash||"",n=e.store,r=n.getState,a=n.dispatch;if(t.startsWith("#thread=")){var o=t.substr("#thread=".length),i=r().model.commentThreads.find(function(e){return e.cid===o});if(!i)return console.warn("[checkLocationHash] missing commentThread: ".concat(o));a({type:"entry:sync-runner:set-screen",payload:{cid:i.screen_cid}}),a({type:"entry:comment:set:active",payload:{isActive:!0}}),a({type:"container:comment:select",payload:{select:i.cid}})}},e.updateCurrentScreenRunner=function(t){if(!t)return console.warn("[updateCurrentScreenRunner] missing currentScreen");e.store.dispatch({type:"entry:current:set-screen",payload:t}),window.location.hash="#screen=".concat(t.cid)}}};var p=function(e,t){var n=document.getElementById("simulator-container"),r=t.getBoundingClientRect(),a=n.getBoundingClientRect();if(!(r.top>a.top&&r.bottom<a.bottom)){var o=r.top+.5*r.height-(a.top+.5*a.height),i=o<0?"up":"down",c=document.getElementById("simulator-wrapper"),s=f(i,o,n,a,c.getBoundingClientRect());if(n.scrollTop+=s,0!==(o-=s)){var l=d(".pcanvas.active .widgets")[0],u=d(".pcanvas.active .widgets .scontainer")[0];s=f(i,o,l,l.getBoundingClientRect(),u.getBoundingClientRect()),l.scrollTop+=s}}},f=function(e,t,n,r,a){return"up"===e&&n.scrollTop>0?Math.max(t,0-n.scrollTop):"down"===e&&n.scrollTop<a.height-r.height?Math.min(t,a.bottom-r.bottom):0}},asDA:function(e,t){e.exports=function(e,t,n,r){var a=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}},bNtH:function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("7W2i"),i=n.n(o),c=n("W8MJ"),s=n.n(c),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),E=n("740n"),S=n.n(E),C=function(e){function t(){var e;return a()(this,t),e=u()(this,p()(t).call(this)),v()(v()(h()(h()(e)),"handleScroll",function(t){t.stopPropagation();var n=t.target.dataset.axis,r=t.clientX,a=t.clientY,o=e.props,i=o.canvasOffset,c=i.x,s=i.y,l=o.viewportHeight,u=o.viewportWidth,d=o.canvasRange,p=o.onScroll,f="x"===n?u:l,h=function(e){var t=e.clientY,o=e.clientX,i="x"===n?o-r:t-a;i=i/(f-f/d[n]*f)*d[n],p("x"===n?{x:c-i,y:s}:{x:c,y:s-i})};document.addEventListener("mousemove",h),document.addEventListener("mouseup",function e(t){document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",e)})}),"handleClickTrack",function(t){var n=t.target.dataset.axis,r=t.clientX,a=t.clientY,o=e.props,i=o.onScroll,c=o.canvasRange,s=o.viewportHeight,l=o.viewportWidth,u=e.scrollbarX.getBoundingClientRect(),d=u.top,p=u.bottom,f=u.left,h=u.right,m="x"===n?e.scrollbarX:e.scrollbarY,v="x"===n?l:s,g=function(){var t=m.getBoundingClientRect(),o=t.top,s=t.bottom,l=t.left,u=t.right,d=e.props.canvasOffset,p=d.x,f=d.y,h="x"===n?r>u:a>s,g="x"===n?r<l:a<o,y=(g?-1:h?1:0)*Math.min(c[n]/10,v);(h||g)&&i("x"===n?{x:p-y,y:f}:{x:p,y:f-y})};(("x"===n?r>h:a>p)||("x"===n?r<f:a<d))&&(m.style.transition="all 0.1s linear",g(),e.timer=setTimeout(function(){return e.timeInterval=setInterval(g,100)},500));document.addEventListener("mouseup",function t(n){m.style.transition="",clearTimeout(e.timer),clearInterval(e.timeInterval),document.removeEventListener("mouseup",t)})}),e.setRefY=function(t){return e.scrollbarY=t},e.setRefX=function(t){return e.scrollbarX=t},e}return s()(t,[{key:"render",value:function(){var e=this.props,t=e.canvasOffset,n=t.x,r=t.y,a=e.canvasRange,o=e.viewportWidth,i=e.viewportHeight,c=e.showRuler,s=o/a.x,l=(a.x/2-n)*(a.x-o)/(a.x*a.x);l=Math.min(Math.max(l,0),(a.x-o)/a.x);var u=i/a.y,d=(a.y/2-r)*(a.y-i)/(a.y*a.y);d=Math.min(Math.max(d,0),(a.y-i)/a.y);var p={width:"".concat(100*s,"%"),left:"".concat(100*l,"%")},f={height:"".concat(100*u,"%"),top:"".concat(100*d,"%")},h=c?null:{left:0},m=c?null:{top:0};return w.a.createElement("div",{className:S.a.scrollbar},w.a.createElement("div",{"data-axis":"x",className:"x_track",style:h,onMouseDown:this.handleClickTrack},w.a.createElement("div",{ref:this.setRefX,className:"x_handler","data-axis":"x",onMouseDown:this.handleScroll,style:p},w.a.createElement("div",{className:"x_scroll_bar"}))),w.a.createElement("div",{"data-axis":"y",className:"y_track",style:m,onMouseDown:this.handleClickTrack},w.a.createElement("div",{ref:this.setRefY,className:"y_handler","data-axis":"y",onMouseDown:this.handleScroll,style:f},w.a.createElement("div",{className:"y_scroll_bar"}))))}}]),i()(t,e),t}(b.PureComponent);v()(v()(C,"propTypes",{canvasOffset:y.a.object,canvasRange:y.a.object,viewportWidth:y.a.number,viewportHeight:y.a.number,showRuler:y.a.bool,onScroll:y.a.func}),"defaultProps",{showRuler:!1}),t.a=C},bahg:function(e,t){e.exports=function(e){return e.split("")}},cAqp:function(e,t,n){e.exports={"comment-marker":"_2DdCe4X_4uBwFVlS753YET"}},cWnZ:function(e,t,n){},cl8F:function(e,t,n){"use strict";var r=n("rVSK"),a=n.n(r),o={tc:"#101010",bg:"transparent",bc:"#bbbbbb",sc:"#aaaaaa",box_shadow:a()([[0,0,0,0,0,"#aaaaaa"]]),text_shadow:a()([[0,0,0,"#aaaaaa"]]),sticky:{bg:"#FFFBBA"},status_bar:{bg:"#f8f8f8"},status_bar_android:{bg:"#555555"},ios_status_bar:{bg:"#f8f8f8"},iphone_x_status_bar:{bg:"#f8f8f8"},android_status_bar:{bg:"#f8f8f8"},image_view:{bg:"#e5e5e5",tc:"#bec2c9"},rounded_rect:{bg:"#FFFFFF"},circle_rect:{bg:"#FFFFFF"},triangleb:{tc:"#e5e5e5"},triangletl:{tc:"#e5e5e5"},button:{bg:"#ffffff"},navigation_bar:{bg:"#f8f8f8"},nav_bar:{bg:"#f8f8f8",bc:"transparent"},tab_bar:{bg:"#f8f8f8",bc:"transparent"},rectangle:{bg:"#ffffff"},mtext_input:{bg:"#ffffff",tc:"#888888"},mtextarea:{bg:"#ffffff",tc:"#888888"}};t.a=o},ctY3:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var r=n("lwsE"),a=n.n(r),o=n("7W2i"),i=n.n(o),c=n("W8MJ"),s=n.n(c),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=n("PJYZ"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),E=n("M8nv"),S=n.n(E),C=n("OVdA"),x=n.n(C),_=n("UbMB"),k=n.n(_).a.bind(x.a),M=function(e){function t(){var e,n,r;a()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return u()(r,(n=r=u()(this,(e=p()(t)).call.apply(e,[this].concat(i))),v()(v()(v()(v()(v()(h()(h()(r)),"handleFocus",function(){r.props.onFocus()}),"handleChange",function(e){(0,r.props.onChange)(e.target.value)}),"handleBlur",function(){r.props.onBlur()}),"handleKeyDown",function(e){"Enter"===e.key?(e.preventDefault(),r.handleBlur()):"Escape"===e.key&&(r.props.onChange(r.cacheValue),r.cacheValue=null,r.handleBlur())}),"handleDocDown",function(e){r.props.editing&&r.textarea&&r.textarea.contains(e.target)||r.props.onBlur()}),n))}return s()(t,[{key:"componentDidMount",value:function(){this.props.editing&&(this.cacheValue=this.props.value,this.textarea.select())}},{key:"componentDidUpdate",value:function(e,t){!e.editing&&this.props.editing&&(this.cacheValue=this.props.value,this.textarea.select())}},{key:"render",value:function(){var e=this,t=this.props,n=t.editing,r=t.value,a=t.className;return n?w.a.createElement("div",{className:k("text-wrapper",a)},w.a.createElement("textarea",{ref:function(t){return e.textarea=t},value:r,onFocus:this.handleFocus,onChange:this.handleChange,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown}),w.a.createElement(S.a,{onMouseDown:this.handleDocDown})):w.a.createElement("span",null,r)}}]),i()(t,e),t}(b.Component);M.propTypes={editing:y.a.bool,value:y.a.string,className:y.a.string,onFocus:y.a.func,onBlur:y.a.func,onChange:y.a.func},M.defaultProps={onFocus:function(){},onChange:function(){}}},dAiO:function(e,t,n){},dQpi:function(e,t){e.exports=function(){}},dVTT:function(e,t,n){n("aPfg")("Map")},dVn5:function(e,t){var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(n)||[]}},dppN:function(e,t,n){},dt0z:function(e,t){e.exports=function(e){return e}},e5cp:function(e,t,n){var r=n("fmRc"),a=n("or5M"),o=n("HDyB"),i=n("seXi"),c=n("QqLw"),s=n("Z0cm"),l=n("DSRE"),u=n("c6wG"),d=1,p="[object Arguments]",f="[object Array]",h="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,g,y){var b=s(e),w=s(t),E=b?f:c(e),S=w?f:c(t),C=(E=E==p?h:E)==h,x=(S=S==p?h:S)==h,_=E==S;if(_&&l(e)){if(!l(t))return!1;b=!0,C=!1}if(_&&!C)return y||(y=new r),b||u(e)?a(e,t,n,v,g,y):o(e,t,E,n,v,g,y);if(!(n&d)){var k=C&&m.call(e,"__wrapped__"),M=x&&m.call(t,"__wrapped__");if(k||M){var T=k?e.value():e,N=M?t.value():t;return y||(y=new r),g(T,N,n,v,y)}}return!!_&&(y||(y=new r),i(e,t,n,v,g,y))}},eaeY:function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=n("q1tI");n("17x9");var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentDidMount",value:function(){this.props.enabled&&this.bindHandlers()}},{key:"componentWillUnmount",value:function(){this.unbindHandlers()}},{key:"componentWillReceiveProps",value:function(e){this.props.enabled&&!e.enabled?this.unbindHandlers():!this.props.enabled&&e.enabled&&this.bindHandlers()}},{key:"getKeys",value:function(){this.props.target,window;return Object.keys(this.props).filter(function(e){return"on"===e.slice(0,2)}).map(function(e){return[e,e.slice(2).toLowerCase()]})}},{key:"getTarget",value:function(){var e=this.props,t="function"==typeof e.target?e.target():e.target;return t||(t=this.node&&this.node.ownerDocument),t}},{key:"bindHandlers",value:function(){this._adjustHandlers(i)}},{key:"unbindHandlers",value:function(){this._adjustHandlers(c)}},{key:"_adjustHandlers",value:function(e){var t=this.props,n=this.getTarget();if(n){var r=s?{passive:t.passive,capture:t.capture}:t.capture;this.getKeys().forEach(function(a){e(n,a[1],t[a[0]],r)})}}},{key:"render",value:function(){var e=this;return this.props.target?null:a.createElement("noscript",{ref:function(t){e.node=t}})}}]),t}();function i(e,t,n,r){return!e.addEventListener&&(t="on"+t),(e.addEventListener||e.attachEvent).call(e,t,n,r),n}function c(e,t,n,r){return!e.removeEventListener&&(t="on"+t),(e.removeEventListener||e.detachEvent).call(e,t,n,r),n}o.displayName="DocumentEvents",o.defaultProps={capture:!1,enabled:!0,passive:!1};var s=function(){try{var e=!1;return document.createElement("div").addEventListener("test",function(){},{get passive(){e=!0}}),e}catch(e){return!1}}();e.exports=o},edRh:function(e,t,n){},fIwL:function(e,t,n){},fRjM:function(e,t,n){},fSKh:function(e,t,n){},fW1p:function(e,t,n){var r=n("Y7ZC"),a=n("E8gZ")(!1);r(r.S,"Object",{values:function(e){return a(e)}})},fo6e:function(e,t){var n=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return n.test(e)}},foKU:function(e,t,n){"use strict";n.d(t,"a",function(){return M});var r=n("pVnL"),a=n.n(r),o=n("QILm"),i=n.n(o),c=n("lwsE"),s=n.n(c),l=n("7W2i"),u=n.n(l),d=n("W8MJ"),p=n.n(d),f=n("a1gu"),h=n.n(f),m=n("Nsbk"),v=n.n(m),g=n("PJYZ"),y=n.n(g),b=n("lSNA"),w=n.n(b),E=n("17x9"),S=n.n(E),C=n("q1tI"),x=n.n(C),_=MB.config.SCALES[0],k=MB.config.SCALES[MB.config.SCALES.length-1],M=function(e){function t(){var e,n,r;s()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return h()(r,(n=r=h()(this,(e=v()(t)).call.apply(e,[this].concat(o))),w()(w()(y()(y()(r)),"setElementRef",function(e){return r.$elem=e}),"handleWheel",function(e){e.preventDefault();var t=r.props,n=t.x,a=t.y,o=t.scale,i=t.onOffsetChange,c=Math.max(-1,Math.min(e.deltaY,1));if(e.ctrlKey||e.metaKey){var s=r.$elem.getBoundingClientRect(),l=s.top,u=(s.left+s.right)/2,d=(l+s.bottom)/2,p=o<=100?o-5*c:o-o*c*.05,f=e.pageX-u,h=e.pageY-d;r.handleZoom(p,f,h)}else i(n-e.deltaX,a-e.deltaY)}),n))}return p()(t,[{key:"handleZoom",value:function(e,t,n){var r=this.props,a=r.x,o=r.y,i=r.scale,c=r.onOffsetChange,s=r.onScaleChange,l=(e=Math.min(Math.max(e,_),k))/i;1!==l&&(c(t+l*(a-t),n+l*(o-n)),s(e))}},{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,r=e.scale,o=e.children,c=(e.onOffsetChange,e.onScaleChange,i()(e,["x","y","scale","children","onOffsetChange","onScaleChange"]));return x.a.createElement("div",a()({},c,{ref:this.setElementRef,onWheel:this.handleWheel}),o.map(function(e){return"function"==typeof e?e(t,n,r):e}))}}]),u()(t,e),t}(C.PureComponent);M.propTypes={x:S.a.number,y:S.a.number,scale:S.a.number,children:S.a.array,onScaleChange:S.a.func,onOffsetChange:S.a.func}},g33z:function(e,t,n){"use strict";var r=n("Wu5q"),a=n("n3ko");e.exports=n("raTm")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(a(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(a(this,"Map"),0===e?0:e,t)}},r,!0)},gCaL:function(e,t,n){"use strict";n.d(t,"c",function(){return p}),n.d(t,"b",function(){return f}),n.d(t,"a",function(){return h});var r=n("J4zp"),a=n.n(r),o=n("l00i"),i=n.n(o),c=n("980g"),s=n.n(c),l=n("MVZn"),u=n.n(l),d=n("0k54");function p(e,t,n,r){var a=u()({},e),o=n;return r.forEach(function(e){if(e){var n=e.dup();a[e.cid]=n;var r=f(e,t);o=Object(d.g)(r,o,function(e){return e.widget=n})}}),{widgetMap:a,widgetTreeData:o}}var f=function(e,t){for(var n=[e.cid];e.gid;)n.unshift(e.gid),e=t[e.gid];return n},h=function(e){var t=function(e,t){var n={},r={},o={};e.forEach(function(e){n[e.cid]=e,o[e.screen_cid]=o[e.screen_cid]||[],e.gid?(r[e.gid]=r[e.gid]||{gid:e.gid,screen_cid:e.screen_cid,children:[]},r[e.gid].children.push(e)):o[e.screen_cid].push(e)});var c={root:{cid:"root",children:[]}};s()(r).forEach(function(e){var t=e.gid,r=e.screen_cid,a=e.children;a.sort(v);var i=n[t];if(!i){if(1===a.length)return a[0].gid="",void o[r].push(a[0]);i=m(t,r,a),n[i.cid]=i,o[r].push(i)}c[t]={cid:t,gid:i.gid,widget:i,children:a.map(function(e){return e.cid})}}),i()(o).forEach(function(e){var n=a()(e,2),r=n[0],o=n[1],i=r===t?"root":r;c[i]={cid:i,children:o.sort(v).map(function(e){return e.cid})}});var l=[];for(var u in n)"group"===n[u].name&&void 0===c[u]&&(delete n[u],l.push(u));for(var d in c){var p=c[d].children;c[d].children=p.filter(function(e){return!l.includes(e)})}return{widgetMap:n,groupMap:c}}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:MB.currentScreen.cid),n=t.widgetMap,r=t.groupMap,o={cid:"root",children:[]};return r.root.children.forEach(function(e){return o.children.push(g(e,r,n))}),{widgetMap:n,groupMap:r,widgetTreeData:o}},m=function(e,t,n){var r=n[n.length-1],a=r.primary_fixed;return a!==Widget.FIXED_TYPE.not_fixed&&n.forEach(function(e){return e.primary_fixed=Widget.FIXED_TYPE.not_fixed}),new Widget({cid:e,name:"group",link_cids:e,screen_cid:t,z:r.z,primary_fixed:a})},v=function(e,t){return e.z-t.z||e.timestamp-t.timestamp};var g=function e(t,n,r){var a=r[t];if("group"===a.name){var o=n[t]||{children:[]};return{cid:a.cid,type:"group",widget:a,children:o.children.map(function(t){return e(t,n,r)})}}if("panel"===a.name){var i=a.ct().cscreens();return{cid:a.cid,type:"panel",widget:a,children:i.map(function(t){var a=n[t.cid]?n[t.cid].children:[];return{cid:t.cid,widget:t,type:"panel-screen",children:a.map(function(t){return e(t,n,r)})}})}}return{cid:a.cid,type:"widget",widget:a,children:[]}}},gQMU:function(e,t,n){var r=n("0ZTe")("toUpperCase");e.exports=r},gX9a:function(e,t,n){e.exports={"play-setting-menu":"_1FA8P7EgiQtr3ukFbj9cuo"}},h5AQ:function(e,t,n){n("hRZT"),e.exports=n("WEpk").Number.isInteger},hRZT:function(e,t,n){var r=n("Y7ZC");r(r.S,"Number",{isInteger:n("DNkW")})},hcHk:function(e,t,n){},hgQt:function(e,t,n){var r=n("Juji"),a=n("4sDh");e.exports=function(e,t){return null!=e&&a(e,t,r)}},jaNy:function(e,t,n){e.exports=n("UDep")},"jbM+":function(e,t,n){var r=n("R/W3");e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},jl5L:function(e,t,n){var r=n("Sxd8"),a=n("tLB3"),o=n("dt0z"),i=Math.min;e.exports=function(e){var t=Math[e];return function(e,n){if(e=a(e),n=null==n?0:i(r(n),292)){var c=(o(e)+"e").split("e"),s=t(c[0]+"e"+(+c[1]+n));return+((c=(o(s)+"e").split("e"))[0]+"e"+(+c[1]-n))}return t(e)}}},jybS:function(e,t,n){"use strict";n.d(t,"a",function(){return C});var r=n("cJHP"),a=n.n(r),o=n("lwsE"),i=n.n(o),c=n("7W2i"),s=n.n(c),l=n("W8MJ"),u=n.n(l),d=n("a1gu"),p=n.n(d),f=n("Nsbk"),h=n.n(f),m=n("lSNA"),v=n.n(m),g=n("17x9"),y=n.n(g),b=n("q1tI"),w=n.n(b),E=n("uavl"),S=n("JTWS"),C=function(e){function t(){return i()(this,t),p()(this,h()(t).apply(this,arguments))}return u()(t,[{key:"render",value:function(){var e=this.props,t=e.widget,n=e.postfix,r=e.top,o=e.left,i=Object(S.a)(t,n),c=t.top,s=t.left;a()(t,{top:r,left:o});var l=Object(S.b)(t,"p");a()(t,{top:c,left:s});var u=t.v&&Link.find(t.link_cids),d=u?u.cid:"",p=u&&"tap"!==u.gesture?u.gesture:"";return n&&"pg"===t.name&&!u?null:w.a.createElement("div",{"data-cid":t.cid,"data-link_cid":d,className:i,id:"widget".concat(t.cid).concat(n),style:l},Object(E.a)(t,!0),w.a.createElement("div",{className:"region gesture ".concat(p)}))}}]),s()(t,e),t}(b.PureComponent);v()(C,"propTypes",{widget:y.a.object,postfix:y.a.string,top:y.a.number.isRequired,left:y.a.number.isRequired})},kUAk:function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=function(e){var t=e.extractorList,n=[],r={};return{getOutput:function(){var e={fragList:n,urlMap:r};return n=[],r={},e},collect:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=function(e){return void 0===r[e]&&(r[e]={urlString:e,dataUrl:"",originUrl:a}),r[e]},i=t.reduce(function(e,t){return e.reduce(function(e,n){return t(e,n,o)},[])},[e]);n=n.concat(i)}}};t.createFragCollector=r;var a=function(e,t){return function(r,a,o){if("object"===n(a))return r.push(a),r;for(var i,c=0;null!==(i=e.exec(a));){var s=i[0],l=t.exec(s),u=l&&l[1];if(u){var d=i.index+l.index+l[0].indexOf(u),p=a.slice(c,d);r.push(p),r.push(o(u)),c=d+u.length}}return r.push(a.substr(c)),r}};t.createUrlExtractor=a;var o=a(/<img [^>]*>/g,/src=['"]([^'"]*)['"]/),i=/url\(['"]?([^)'"]*)['"]?\)/,c=a(/style=['"].*url\([^)]*\).*['"]/g,i);t.createHTMLFragCollector=function(){return r({extractorList:[o,c]})};var s=/url\([^)]*\)/g,l=a(s,i),u=a(s,/(\/?(\.?\.\/)*\b[-\w@:%_+.~#?&/=]+.(woff2|woff|ttf|svg))([?#][-\w%._#=]{1,256})?/g);t.createCSSFragCollector=function(){return r({extractorList:[l,u]})}},knB1:function(e,t,n){"use strict";t.a={prefixAgo:null,prefixFromNow:"从现在开始",suffixAgo:"之前",suffixFromNow:null,seconds:"不到 1 分钟",minute:"大约 1 分钟",minutes:"%d 分钟",hour:"大约 1 小时",hours:"大约 %d 小时",day:"1 天",days:"%d 天",month:"大约 1 个月",months:"%d 月",year:"大约 1 年",years:"%d 年",numbers:[],wordSeparator:""}},l0oT:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return o});var r=function(e){return Math.cos(e*Math.PI/180)},a=function(e){return Math.sin(e*Math.PI/180)},o=function(e,t,n){var r=t*Math.PI/180,a={x:n.x-e.x,y:n.y-e.y},o=a.x,i=a.y,c=o*Math.cos(r)-i*Math.sin(r),s=i*Math.cos(r)+o*Math.sin(r);return{x:c+e.x,y:s+e.y}}},"lm/5":function(e,t,n){var r=n("fmRc"),a=n("wF/u"),o=1,i=2;e.exports=function(e,t,n,c){var s=n.length,l=s,u=!c;if(null==e)return!l;for(e=Object(e);s--;){var d=n[s];if(u&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++s<l;){var p=(d=n[s])[0],f=e[p],h=d[1];if(u&&d[2]){if(void 0===f&&!(p in e))return!1}else{var m=new r;if(c)var v=c(f,h,p,e,t,m);if(!(void 0===v?a(h,f,o|i,c,m):v))return!1}}return!0}},lw2U:function(e,t,n){"use strict";var r=n("yLV6"),a=n.n(r),o=n("jaNy"),i=n.n(o),c=n("lwsE"),s=n.n(c),l=n("W8MJ"),u=n.n(l),d=function(){function e(){s()(this,e),this.timeoutMap=new i.a}return u()(e,[{key:"setTimeout",value:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n){var r=this,a=setTimeout(function(){t(),r.clearTimeout(e,t)},n);return this.setToken(e,t,a),a})},{key:"clearTimeout",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){var n=this.getToken(e,t);void 0!==n&&(clearTimeout(n),this.clearToken(e,t))})},{key:"clearTimeoutByKey",value:function(e){var t=this,n=this.timeoutMap.get(e);void 0!==n&&(n.forEach(function(n,r){return t.clearTimeout(e,r)}),this.timeoutMap.delete(e))}},{key:"clear",value:function(){var e=this;this.timeoutMap.forEach(function(t,n){return e.clearTimeoutByKey(n)})}},{key:"setToken",value:function(e,t,n){var r=this.timeoutMap.get(e);void 0===r&&(r=new i.a,this.timeoutMap.set(e,r)),r.set(t,n)}},{key:"getToken",value:function(e,t){var n=this.timeoutMap.get(e);if(n)return n.get(t)}},{key:"clearToken",value:function(e,t){var n=this.timeoutMap.get(e);n&&n.delete(t)}}]),e}(),p=function(){return(new Date).getTime()},f=function(){function e(){s()(this,e),this.mouseState={down:!1,moved:!1},this.scrollState={x:null,y:null,left:null,top:null,target:null},this.coolDownTime=p(),this.coolDownInterval=200}return u()(e,[{key:"isCoolDown",value:function(){var e=p()-this.coolDownTime;return this.coolDownTime+=e,e>this.coolDownInterval}},{key:"resetCoolDown",value:function(){this.coolDownTime-=this.coolDownInterval}},{key:"bindMobile",value:function(e){var t=e.onOrientationChange;window.onorientationchange&&window.addEventListener("orientationchange",t),window.addEventListener("resize",function(){"INPUT"!==document.activeElement.tagName&&t()})}},{key:"bindDesktop",value:function(e){var t=this,n=e.onAppMouseDown,r=e.onAppMouseMove;$("body").on("mousedown","#simulator",function(e){if(n(e,t.scrollState,t.mouseState))return!0;t.mouseState.down=!0,t.mouseState.moved=!1,t.scrollState.x=e.clientX,t.scrollState.y=e.clientY}).on("mousemove","#simulator",function(e){if(r(e,t.scrollState,t.mouseState))return!0;t.mouseState.moved=!0}),window.addEventListener("mouseup",function(){t.mouseState.down=!1,t.mouseState.moved=!1})}}]),e}(),h=n("980g"),m=n.n(h),v=n("MVZn"),g={useTransform:!1,disableTouch:!1,disablePointer:!0,preventDefault:!0,ignoreEventException:function(e){var t=$(e.target).closest(".widget");if(t.length){if(t.hasClass("webpage"))return!0;if(t.hasClass("map_view"))return!0;if(t.find("input").length)return!0}var n=$(e.target).closest(".ppanel");if(n.length){var r=Panel.find(n.data("cid")),a=r.mainState();if(a.height>r.height||a.width>r.width)return!0}return!1}},y=n.n(v)()({},g,{probeType:3,scrollbars:!0,mouseWheel:!0,disableMouse:!1,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0}),b=function(){function e(){s()(this,e),this.iScrollMap={}}return u()(e,[{key:"clear",value:function(){this.destroyScrollBar()}},{key:"setObjectUrl",value:function(e,t){e&&(e.contentWindow?e.contentWindow.location.replace(t):e.setAttribute("src",t))}},{key:"deviceOrient",value:function(){return $(window).width()>$(window).height()?"landscape":"portrait"}},{key:"initScrollBar",value:function(e){if(!this.iScrollMap[e]){var t=document.querySelector("#pscreen".concat(e," .screen-content"));if(t){var n=MB.isMobile()?g:y,r=new window.IScroll(t,n),a=document.querySelector("#sticky-container");a&&(r.on("scroll",function(e){var n=t.querySelector(".widgets");a.querySelector("#stickies").style.marginTop=n.style.top}),$(t).on("wheel",function(e){t.offsetHeight!==t.scrollHeight&&e.stopPropagation()})),this.iScrollMap[e]=r}}}},{key:"toggleScrollBar",value:function(e){m()(this.iScrollMap).forEach(function(t){e?t.enable():t.disable()})}},{key:"refreshScrollBar",value:function(e){this.iScrollMap[e]&&this.iScrollMap[e].refresh()}},{key:"resetScreenScrollState",value:function(e){var t=this.iScrollMap[e];t&&t.scrollTo(0,0);var n=document.querySelector("#stickies");n&&(n.style.marginTop=0)}},{key:"destroyScrollBar",value:function(){m()(this.iScrollMap).forEach(function(e){$(e.wrapper).off("wheel"),e.destroy()}),this.iScrollMap={}}},{key:"resetScrollState",value:function(){m()(this.iScrollMap).forEach(function(e){return e.scrollTo(0,0)});var e=document.querySelector("#stickies");e&&(e.style.marginTop=0)}},{key:"setScreenBg",value:function(e){var t=Screen.find(e.data("cid"));e.css({"background-color":t.bg(),"background-image":t.bgimage?"url(".concat(t.getRealBgImage(),")"):""})}},{key:"setupSplash",value:function(e,t){e.w()>e.dH()?(t.css("top",0-e.dW()),t.width(e.dH()),t.height(e.dW())):(t.css("top",0),t.width(e.dW()),t.height("101%"))}},{key:"screenPreview",value:function(e){return'\n      <div id="pscreen'.concat(e.cid,'" class="pcanvas ').concat(e.orient(),'" data-cid="').concat(e.cid,'" data-orientation="').concat(e.orient(),'">\n        <div class="screen-header"></div>\n        <div class="screen-content">\n          <div class="widgets">\n            <div class="scontainer"></div>\n          </div>\n        </div>\n        <div class="screen-footer"></div>\n      </div>\n    ')}}]),e}(),w=function(){function e(){s()(this,e)}return u()(e,[{key:"activeWidth",value:function(){return"portrait"===MB.currentScreen.orientation?MB.currentProject.width:MB.currentProject.height}},{key:"activeHeight",value:function(){return"portrait"===MB.currentScreen.orientation?MB.currentProject.height:MB.currentProject.width}},{key:"hideScreen",value:function(e){$(e).hide(),$(e).find(".iframe").each(function(e,t){MB.runner.runnerUtil.setObjectUrl(t,"about:blank")})}},{key:"doTransition",value:function(e,t,n,r){var a=this;n.enableTransition(r.delay()),t.enableTransition(r.delay()),(0===parseFloat(r.delay())||r.template&&-1!==e.indexOf("menu"))&&(e="none"),$.nextTick(function(){a[e](t,n,r)})}},{key:"none",value:function(e,t,n){t.addClass("active"),e.removeClass("active top"),this.hideScreen(e),MB.runner.doneTransition(t)}},{key:"slideIn",value:function(e,t,n,r,a,o){var i=this;e.transitionEnd(function(){e.removeClass("active"),t.addClass("active top"),i.hideScreen(e),MB.runner.doneTransition(t)}),e[n](r),t[n](a)}},{key:"slidebottom",value:function(e,t,n){this.slideIn(e,t,"translateY",0-this.activeHeight(),0,n)}},{key:"slideleft",value:function(e,t,n){this.slideIn(e,t,"translateX",0-this.activeWidth(),0,n)}},{key:"slidetop",value:function(e,t,n){this.slideIn(e,t,"translateY",this.activeHeight(),0,n)}},{key:"slideright",value:function(e,t,n){this.slideIn(e,t,"translateX",this.activeWidth(),0,n)}},{key:"slideMenu",value:function(e,t,n,r,a){t.zindex("2"),e.css("z-index","101"),e.transitionEnd(function(){MB.runner.doneTransition(t)}),e[n](r)}},{key:"leftmenu",value:function(e,t,n){this.slideMenu(e,t,"translateX",this.activeWidth()*n.menu_offset/100,n)}},{key:"rightmenu",value:function(e,t,n){this.slideMenu(e,t,"translateX",0-this.activeWidth()*n.menu_offset/100,n)}},{key:"fixedIn",value:function(e,t,n,r,a){var o=this;t.addClass("top"),t.css("z-index","101"),t.transitionEnd(function(){0===r&&(e.removeClass("active"),t.addClass("active"),o.hideScreen(e)),MB.runner.doneTransition(t),0!==r&&t.css("z-index","101")}),t[n](r)}},{key:"topin",value:function(e,t,n){this.fixedIn(e,t,"translateY",0,n)}},{key:"popin",value:function(e,t,n){this.fixedIn(e,t,"translateY",0,n)}},{key:"slideleft2",value:function(e,t,n){this.fixedIn(e,t,"translateX",0,n)}},{key:"slideright2",value:function(e,t,n){this.fixedIn(e,t,"translateX",0,n)}},{key:"leftdrawer",value:function(e,t,n){this.fixedIn(e,t,"translateX",this.activeWidth()*(n.menu_offset-100)/100,n)}},{key:"rightdrawer",value:function(e,t,n){this.fixedIn(e,t,"translateX",this.activeWidth()*(100-n.menu_offset)/100,n)}},{key:"fixedOut",value:function(e,t,n,r,a){var o=this;t.zindex("2"),e.transitionEnd(function(){e.removeClass("active"),t.addClass("active"),o.hideScreen(e),MB.runner.doneTransition(t)}),e[n](r)}},{key:"leftout",value:function(e,t,n){this.fixedOut(e,t,"translateX",0-this.activeWidth(),n)}},{key:"rightout",value:function(e,t,n){this.fixedOut(e,t,"translateX",this.activeWidth(),n)}},{key:"topout",value:function(e,t,n){this.fixedOut(e,t,"translateY",0-this.activeHeight(),n)}},{key:"popout",value:function(e,t,n){this.fixedOut(e,t,"translateY",this.activeHeight(),n)}},{key:"transitionHandler",value:function(e,t,n,r,a){switch("leftmenu"===e&&t.addClass("menu lmenu"),"rightmenu"===e&&t.addClass("menu rmenu"),"leftdrawer"===e&&n.addClass("drawer ldrawer"),"rightdrawer"===e&&n.addClass("drawer rdrawer"),e){case"popin":case"slidebottom":n.translate(0,a);break;case"topin":case"slidetop":n.translate(0,0-a);break;case"popout":case"none":case"leftout":case"rightout":case"topout":case"leftmenu":case"rightmenu":n.translate(0,0);break;case"slideright":case"slideleft2":case"leftdrawer":n.translate(0-r,0);break;case"slideleft":case"slideright2":case"rightdrawer":n.translate(r,0)}n[0].offsetHeight}}]),e}(),E=n("Kgbp"),S=n.n(E),C=n("cJHP"),x=n.n(C),_=n("17x9"),k=n.n(_),M=n("q1tI"),T=n.n(M),N=n("i8i4"),O=n.n(N),j=n("9DAG"),I=n("IB8Z"),R=n("gCaL"),L=n("2qqa"),D=function(){function e(){s()(this,e)}return u()(e,null,[{key:"updateScreenContentHeight",value:function(e){var t=document.querySelector("#pscreen".concat(e.cid)),n=t.querySelector(".widgets"),r=t.querySelector(".scontainer"),a=t.querySelector(".screen-header"),o=t.querySelector(".screen-footer"),i=e.headerHeight(),c=e.footerHeight();return a.style.height=i+"px",o.style.height=c+"px",n.style.height=e.height-(i+c)+"px",x()(r.style,{height:e.height+"px",marginTop:-i+"px"}),{$screen:t,$sheader:a,$sfooter:o,$scontainer:r}}},{key:"renderScreenContent",value:function(e,t,n,r){var a=this.updateScreenContentHeight(e),o=a.$screen,i=a.$sheader,c=a.$sfooter,s=a.$scontainer,l=Object(I.a)(Widget.irecords),u=Object(L.c)(e,n,t,l),d=Object(R.a)(u,e.cid).widgetTreeData;(O.a.render(T.a.createElement(j.a,{widgetTreeData:d}),s),O.a.render(T.a.createElement(A,{treeData:d,headerHeight:e.headerHeight()}),i),O.a.render(T.a.createElement(P,{treeData:d,footerHeight:e.footerHeight(),screenHeight:e.height}),c),r)&&S()(o.querySelectorAll(".widget, .group, .panel")).forEach(function(e){return e.style.transition=r});o.offsetWidth;var p=Object(L.b)(e,t,l),f=Object(R.a)(p,e.cid).widgetTreeData;O.a.render(T.a.createElement(j.a,{widgetTreeData:f}),s),O.a.render(T.a.createElement(A,{treeData:f,headerHeight:e.headerHeight()}),i),O.a.render(T.a.createElement(P,{treeData:f,footerHeight:e.footerHeight(),screenHeight:e.height}),c)}}]),e}(),A=function(e){var t=e.treeData,n=e.headerHeight,r=Object(L.d)(t,n);return T.a.createElement(j.a,{widgetTreeData:r})};A.propTypes={treeData:k.a.object,headerHeight:k.a.number};var P=function(e){var t=e.treeData,n=e.footerHeight,r=e.screenHeight,a=Object(L.a)(t,r,n);return T.a.createElement("div",{className:"footer-widgets",style:{marginTop:n-r}},T.a.createElement(j.a,{widgetTreeData:a}))};function B(e){e.Hammer=a.a,e.TimeoutBucket=d,e.EventBucket=f,e.RunnerUtil=b,e.TransitionUtil=w,e.ScreenRenderer=D}P.propTypes={treeData:k.a.object,footerHeight:k.a.number,screenHeight:k.a.number},n.d(t,"a",function(){return B})},lwmc:function(e,t,n){"use strict";var r=n("lwsE"),a=n.n(r),o=n("7W2i"),i=n.n(o),c=n("W8MJ"),s=n.n(c),l=n("a1gu"),u=n.n(l),d=n("Nsbk"),p=n.n(d),f=n("lSNA"),h=n.n(f),m=n("17x9"),v=n.n(m),g=n("q1tI"),y=n.n(g),b=n("PJYZ"),w=n.n(b),E=n("6XO9"),S=n("i6OX"),C=n("ctY3"),x=n("6x+O"),_=n("ujtX"),k=n.n(_),M=n("UbMB"),T=n.n(M).a.bind(k.a),N=function(e){function t(){var e,n,r;a()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return u()(r,(n=r=u()(this,(e=p()(t)).call.apply(e,[this].concat(i))),h()(h()(h()(h()(h()(h()(h()(w()(w()(r)),"setElementRef",function(e){return r.item=e}),"handleExpand",function(e){r.props.handleScreenItemActions.handleExpand(e,r.props.screen)}),"handleActivate",function(e){r.props.handleScreenItemActions.handleActivate(e,r.props.screen)}),"handleDown",function(e){var t=r.props.handleScreenItemActions.handleDown;t&&t(e,r.props.screen)}),"handleNameChange",function(e){var t=r.props.handleScreenItemActions.handleNameChange;t&&t(e,r.props.screen)}),"handleEdit",function(){var e=r.props.handleScreenItemActions.handleEdit;e&&e(r.props.screen)}),"handleBlur",function(){r.props.handleScreenItemActions.handleBlur(r.props.screen)}),n))}return s()(t,[{key:"componentDidMount",value:function(){if(this.props.isActive&&!Object(x.d)(this.item)){var e=document.querySelector(".rn-content-body"),t=e.getBoundingClientRect(),n=this.item.getBoundingClientRect().bottom;e.scrollTop+=n-t.bottom+20}}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this.props,t=e.screen,n=e.depth,r=e.isActive,a=e.isEditing,o=e.showExpander,i=e.renderItem,c=14*(n+1),s=!e.collapseKeySet.has(t.cid)?"caret-down":"caret-right";return y.a.createElement(E.Tooltip,{content:{hover:t.name},type:"block",duration:1e3,style:{width:"100%"}},y.a.createElement("div",{type:"linkable",ref:this.setElementRef,"data-cid":t.cid,onClick:this.handleActivate,onMouseDown:this.handleDown,onDoubleClick:this.handleEdit,style:{paddingLeft:c},className:T("rn-list-item",{active:r})},o&&y.a.createElement("a",{className:"expander",onClick:this.handleExpand,onDoubleClick:this.stopPropagation},y.a.createElement("i",{className:"fa fa-"+s})),y.a.createElement("div",{className:"screen-name"},y.a.createElement(S.b,{type:"dora",name:"file"}),y.a.createElement(C.a,{editing:a,className:"editable-span",value:MB.unescape(t.name),onChange:this.handleNameChange,onBlur:this.handleBlur})),!a&&i&&i(t)))}}]),i()(t,e),t}(g.PureComponent);N.propTypes={depth:v.a.number,screen:v.a.object,isActive:v.a.bool,isEditing:v.a.bool,showExpander:v.a.bool,renderItem:v.a.func,handleScreenItemActions:v.a.shape({handleEdit:v.a.func,handleExpand:v.a.func,handleActivate:v.a.func,handleBlur:v.a.func,handleDown:v.a.func,handleNameChange:v.a.func,setAttr:v.a.func}),collapseKeySet:v.a.object},N.contextTypes={handleDown:v.a.func},n.d(t,"a",function(){return O});var O=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return s()(t,[{key:"render",value:function(){var e=this.props,t=e.treeProps,n=e.isSearching,r=e.editingCid,a=e.activeCid,o=e.screenTreeMap,i=e.screenDataMap,c=e.collapseKeySet;return y.a.createElement("ol",{className:"screen-list"},0===o.root.length?y.a.createElement("div",{className:"not-match"},I18N.preview_panel.not_match):o.root.map(function(e){var s=e.cid;return y.a.createElement(j,{key:s,cid:s,depth:0,collapseKeySet:c,isSearching:n,editingCid:r,activeCid:a,screenDataMap:i,screenTreeMap:o,treeProps:t})}))}}]),i()(t,e),t}(g.PureComponent);h()(O,"propTypes",{treeProps:v.a.object,isSearching:v.a.bool,editingCid:v.a.string,activeCid:v.a.string,screenTreeMap:v.a.object,screenDataMap:v.a.object,collapseKeySet:v.a.object});var j=function(e){function t(){return a()(this,t),u()(this,p()(t).apply(this,arguments))}return s()(t,[{key:"render",value:function(){var e=this.props,n=e.cid,r=e.treeProps,a=e.depth,o=e.activeCid,i=e.editingCid,c=e.isSearching,s=e.screenTreeMap,l=e.screenDataMap,u=e.collapseKeySet,d=r.renderItem,p=r.handleScreenItemActions,f=l[n],h=!u.has(n),m=s[n],v=f.cid===o,g=f.cid===i,b=Boolean(!c&&m);return y.a.createElement("li",{className:"rn-content-item"},y.a.createElement(N,{depth:a,screen:f,isActive:v,isEditing:g,showExpander:b,renderItem:d,collapseKeySet:u,handleScreenItemActions:p}),m&&h&&y.a.createElement("ol",{type:"screen-list",className:"child-screens"},m.map(function(e){var n=e.cid;return y.a.createElement(t,{key:n,cid:n,depth:a+1,collapseKeySet:u,isSearching:c,editingCid:i,activeCid:o,screenDataMap:l,screenTreeMap:s,treeProps:r})})))}}]),i()(t,e),t}(g.PureComponent);h()(j,"propTypes",{cid:v.a.string,treeProps:v.a.object,depth:v.a.number,isSearching:v.a.bool,editingCid:v.a.string,activeCid:v.a.string,screenTreeMap:v.a.object,screenDataMap:v.a.object,collapseKeySet:v.a.object})},mbVZ:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("Ev6p"),a="Channel's Buffer overflow!",o=1,i=3,c=4,s={isEmpty:r.o,put:r.r,take:r.r};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments[1],n=new Array(e),r=0,s=0,l=0,u=function(t){n[s]=t,s=(s+1)%e,r++},d=function(){if(0!=r){var t=n[l];return n[l]=null,r--,l=(l+1)%e,t}},p=function(){for(var e=[];r;)e.push(d());return e};return{isEmpty:function(){return 0==r},put:function(d){if(r<e)u(d);else{var f=void 0;switch(t){case o:throw new Error(a);case i:n[s]=d,l=s=(s+1)%e;break;case c:f=2*e,n=p(),r=n.length,s=n.length,l=0,n.length=f,e=f,u(d)}}},take:d,flush:p}}var u={none:function(){return s},fixed:function(e){return l(e,o)},dropping:function(e){return l(e,2)},sliding:function(e){return l(e,i)},expanding:function(e){return l(e,c)}}},mfFm:function(e,t,n){e.exports={"global-attributes":"_2WW4d3N_h0ptLMSIJiNVZb","layer-name":"lHQ2gR47fywCXPyoNOQt-",header:"_3jioi4K2B2yOsbmLPodNyM",panel:"YjFkC1l7Pq0gsLgl2dq1C",container:"_3_XaUvUOzD1MeTPSGbtmJY",copyBtn:"M4cHnCN2XUVYXQ2Ez48Vk _2TAID7TnzAXoGA-jTBc04W","layer-load":"_3f1x0LwZiq_7c8_TaXvySo",spinner:"xKsPnP6rU53wBVIz85ai_","rotate-infinite":"_2ch38-nvB58TUdWQkKGJJo"}},mnpx:function(e,t,n){},mquD:function(e,t,n){e.exports={"comment-panel":"_2dY-aWly_WWZi-IGQ1xR4-","comment-title":"YqyjN9C59bWFJEndyU0x9","comment-thread":"_2JvGmMk3y1PjWCGDPVg4a3","content-reply":"_3VE5NwR9zvovJS1MW0BZbq",login:"_3t2Lcd3f0_H-u_GDe-KBQH",comment:"_2VqB6xZz3ZMhBswl_nFEOz","comment-content":"_2v8U22g6c4LkqK5BL4vOFl",edited:"_1unY7SoIkJpoCKI6YJj0dE","container-bottom":"_3z71HOTNMRJiMUXUxvQLa6",time:"dqXdK9pZPQyb9a-WoxDNQ","reply-sort":"_2bgB1qJyRonhAvn0gkm7vp","btn-reply":"_2CrlxaEt8G-J3ewI5c7TJD","header-container":"_1-DcnhePZGe-xicn8UM249","header-tool":"_3xcyCaTVLHlRdVbQjfMz9E","container-reply":"_2ApZU5bkYTTCyGA9Q2EwqQ",expand:"TuQgu47qydj8ZTQmbo3DZ","container-main":"_2OH87H-fOvv_HWhtjy1Arh","content-empty":"_3ICZ7qT9DBPhbMD02jZj25","add-comment":"_9237vxHyzd4yQZU3S8N9b","dropdown-reply":"_233Za55WRs0z9Ihd8UD-Rt","dropdown-on":"_6n2zhtMRn75CqBn6WWw3_","dropdown-off":"_3PfmWXeb9PKYb5ow8kDTMe","comment-focus":"hlPioZEAv4Td4VsmcHhIc","comment-noFocus":"_2j-cKmNGnUn_tT7eJlcXxe","reply-header":"xUcJzT-vOVVhL37FQnaC-","reply-content":"_1GkaiuxL0rWoniFDn2WBfK","remove-background":"e3k5YtTFT1_zohcDsL8Zv"}},mwIZ:function(e,t,n){var r=n("ZWtO");e.exports=function(e,t,n){var a=null==e?void 0:r(e,t);return void 0===a?n:a}},nLLt:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("lwsE"),a=n.n(r),o=n("W8MJ"),i=n.n(o),c=function(e){return e.reduce(function(e,t){var n,r=(n=t)instanceof Array?n:n?[n]:[];return r.length?e.reduce(function(e,t){return r.forEach(function(n){return e.push("".concat(t,"-").concat(n))}),e},[]):e},["@"])},s=function(){function e(){a()(this,e),this.permissionMap={}}return i()(e,[{key:"set",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];c(n).forEach(function(t){return e.permissionMap[t]=!0})}},{key:"check",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=c(n);return!!a.length&&a.every(function(t){return e.permissionMap[t]})}}]),e}(),l=["owner","admin","editor","viewer","guest"],u=l.reduce(function(e,t,n){return e[t]=n,e},{}),d=function(e){return l.filter(function(t,n){return u[t]<=u[e]})},p=new s,f=p.set.bind(p),h=p.check.bind(p);f("project",["delete","create"],d("owner")),f("project-update",d("editor")),f("project-read-whitelist",d("viewer")),f("project-read",d("guest")),f("team-project-delete",d("admin")),f("team-project-create",d("editor")),f("team-project-read-whitelist",d("viewer")),f("team-project-read",d("guest")),f("collaborator",["delete","create","update"],["editor","viewer"],d("owner")),f("collaborator-read",["editor","viewer"],d("viewer")),f("team-collaborator",["delete","create","update"],["admin"],d("owner")),f("team-collaborator",["delete","create","update"],["editor","viewer"],d("admin")),f("team-collaborator-read",["admin","editor","viewer"],d("viewer"))},naIL:function(e,t,n){e.exports={"screen-panel":"_2acqq9r0j1_EMjnbcJAZI7"}},nc5A:function(e,t,n){e.exports={search:"WRZ4Gj-rorUUJi1xYvpVR"}},nhzr:function(e,t,n){n("fW1p"),e.exports=n("WEpk").Object.values},oKLx:function(e,t,n){},oSKl:function(e,t,n){},oZtI:function(e,t,n){"use strict";var r=n("tw9P");n.d(t,"f",function(){return r.i}),n.d(t,"d",function(){return r.g}),n.d(t,"a",function(){return r.b}),n.d(t,"b",function(){return r.d}),n.d(t,"c",function(){return r.f}),n.d(t,"e",function(){return r.h}),n.d(t,"g",function(){return r.j})},or5M:function(e,t,n){var r=n("1hJj"),a=n("QoRX"),o=n("xYSL"),i=1,c=2;e.exports=function(e,t,n,s,l,u){var d=n&i,p=e.length,f=t.length;if(p!=f&&!(d&&f>p))return!1;var h=u.get(e);if(h&&u.get(t))return h==t;var m=-1,v=!0,g=n&c?new r:void 0;for(u.set(e,t),u.set(t,e);++m<p;){var y=e[m],b=t[m];if(s)var w=d?s(b,y,m,t,e,u):s(y,b,m,e,t,u);if(void 0!==w){if(w)continue;v=!1;break}if(g){if(!a(t,function(e,t){if(!o(g,t)&&(y===e||l(y,e,n,s,u)))return g.push(t)})){v=!1;break}}else if(y!==b&&!l(y,b,n,s,u)){v=!1;break}}return u.delete(e),u.delete(t),v}},p7Sh:function(e,t,n){e.exports={"thumbnail-container":"_1iU7yzdbdyvTcm4cDCjwwm"}},peh1:function(e,t,n){"use strict";function r(e,t){return e===t}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,n=null,a=null;return function(){return function(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,a=0;a<r;a++)if(!e(t[a],n[a]))return!1;return!0}(t,n,arguments)||(a=e.apply(null,arguments)),n=arguments,a}}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var i=0,c=r.pop(),s=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+n+"]")}return t}(r),l=e.apply(void 0,[function(){return i++,c.apply(null,arguments)}].concat(n)),u=a(function(){for(var e=[],t=s.length,n=0;n<t;n++)e.push(s[n].apply(null,arguments));return l.apply(null,e)});return u.resultFunc=c,u.recomputations=function(){return i},u.resetRecomputations=function(){return i=0},u}}t.__esModule=!0,t.defaultMemoize=a,t.createSelectorCreator=o,t.createStructuredSelector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})};var i=t.createSelector=o(a)},q09E:function(e,t,n){"use strict";var r=n("Ev6p"),a={done:!0,value:void 0},o={};function i(e){return r.n.channel(e)?"channel":Array.isArray(e)?String(e.map(function(e){return String(e)})):String(e)}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"iterator",i=void 0,c=t;function s(t,n){if(c===o)return a;if(n)throw c=o,n;i&&i(t);var r=e[c](),s=r[0],l=r[1],u=r[2];return i=u,(c=s)===o?a:l}return Object(r.q)(s,function(e){return s(null,e)},n,!0)}var s=n("tw9P"),l=n("92lH");function u(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var u={done:!1,value:Object(s.i)(e)},d=void 0,p=function(e){return d=e};return c({q1:function(){return["q2",u,p]},q2:function(){return d===l.a?[o]:["q1",(e=d,{done:!1,value:s.f.apply(void 0,[t].concat(r,[e]))})];var e}},"q1","takeEvery("+i(e)+", "+t.name+")")}function d(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var u={done:!1,value:Object(s.i)(e)},d=function(e){return{done:!1,value:s.f.apply(void 0,[t].concat(r,[e]))}},p=void 0,f=void 0,h=function(e){return p=e},m=function(e){return f=e};return c({q1:function(){return["q2",u,m]},q2:function(){return f===l.a?[o]:p?["q3",function(e){return{done:!1,value:Object(s.e)(e)}}(p)]:["q1",d(f),h]},q3:function(){return["q1",d(f),h]}},"q1","takeLatest("+i(e)+", "+t.name+")")}var p=n("mbVZ");function f(e,t,n){for(var a=arguments.length,u=Array(a>3?a-3:0),d=3;d<a;d++)u[d-3]=arguments[d];var f=void 0,h=void 0,m={done:!1,value:Object(s.a)(t,p.a.sliding(1))},v={done:!1,value:Object(s.d)(r.j,e)},g=function(e){return f=e},y=function(e){return h=e};return c({q1:function(){return["q2",m,y]},q2:function(){return["q3",{done:!1,value:Object(s.i)(h)},g]},q3:function(){return f===l.a?[o]:["q4",(e=f,{done:!1,value:s.f.apply(void 0,[n].concat(u,[e]))})];var e},q4:function(){return["q2",v]}},"q1","throttle("+i(t)+", "+n.name+")")}n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return f})},q3nj:function(e,t,n){"use strict";var r=n("MVZn"),a=n.n(r),o=n("o0o1"),i=n.n(o),c=n("oZtI"),s=n("t3Un"),l=function(e){return Object(s.b)("".concat("/api/v2/projects","/").concat(e,"/sketch_slices.json"))},u=function(e){return Object(s.b)("".concat("/api/v2/projects","/").concat(e,"/build/slices_zips.json"),null,{method:"POST"})},d=i.a.mark(h),p=i.a.mark(m),f=i.a.mark(v);function h(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)([m()]);case 2:case"end":return e.stop()}},d,this)}function m(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)("reducer:slice:init",v);case 2:case"end":return e.stop()}},p,this)}function v(e){var t,n,r,o,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.e)();case 2:if(t=e.sent,n=t.model.current.projectCid,e.prev=4,!n){e.next=14;break}return e.next=8,Object(c.b)(l,n);case 8:r=e.sent,o=r.slices,s=o.filter(g),r.slices=s,e.next=15;break;case 14:r={slices:[{id:1,name:"test",screen_cid:"sssss1232",image:"/uploads/images/14/149316/artboard_1506665060.png",src:"ssss",image_set:[{size:1,src:"src"}],image_set_zip:"src"},{id:2,name:"test",screen_cid:"sssss1232",image:"/uploads/images/14/149316/artboard_1506665060.png",image_set:[{size:1,src:"src"}],image_set_zip:"src"},{id:3,name:"test",screen_cid:"sssss1232",image:"/uploads/images/14/149316/artboard_1506665060.png",image_set:[{size:1,src:"src"}],image_set_zip:"src"}]};case 15:return e.next=17,Object(c.d)({type:"reducer:slice:success",payload:a()({},r)});case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e.catch(4),console.log(e.t0.stack),e.next=24,Object(c.d)({type:"reducer:slice:fail"});case 24:case"end":return e.stop()}},f,this,[[4,19]])}var g=function(e){var t=e.width,n=void 0===t?1:t,r=e.height;return n>0&&(void 0===r?1:r)>0},y=n("980g"),b=n.n(y),w=function(e){return window.MBArtboards?{artboards:b()(window.MBArtboards).map(function(e){return e.artboard})}:Object(s.b)("".concat("/api/v2/projects/").concat(e,"/artboards.json"))},E=i.a.mark(x),S=i.a.mark(_),C=i.a.mark(k);function x(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)([_()]);case 2:case"end":return e.stop()}},E,this)}function _(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)("reducer:artboards:init",k);case 2:case"end":return e.stop()}},S,this)}function k(e){var t,n,r,o,s,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.e)();case 2:if(t=e.sent,n=t.model,r=n.current.projectCid,o=n.screens,e.prev=4,s={},o.forEach(function(e){var t=e.width,n=e.height,r=e.cid;s[r]={width:t,height:n}}),!r){e.next=13;break}return e.next=10,Object(c.b)(w,r);case 10:l=e.sent,(u=l.artboards).length>0&&u.forEach(function(e){var t=e.width,n=e.height,r=e.screen_cid;s[r]={width:t,height:n}});case 13:return s={artboards:s},e.next=16,Object(c.d)({type:"reducer:artboards:success",payload:a()({},s)});case 16:e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(4),console.log(e.t0.stack),e.next=23,Object(c.d)({type:"reducer:artboards:fail"});case 23:case"end":return e.stop()}},C,this,[[4,18]])}var M=n("fvjX"),T=n("/MKj"),N=n("lwsE"),O=n.n(N),j=n("7W2i"),I=n.n(j),R=n("W8MJ"),L=n.n(R),D=n("a1gu"),A=n.n(D),P=n("Nsbk"),B=n.n(P),U=n("PJYZ"),F=n.n(U),z=n("lSNA"),W=n.n(z),q=n("17x9"),H=n.n(q),V=n("q1tI"),X=n.n(V),Z=n("M8nv"),G=n.n(Z),K=n("TSYQ"),Y=n.n(K),J=n("pVnL"),Q=n.n(J),ee=n("J4zp"),te=n.n(ee),ne=n("/5+U"),re=(n("zZYZ"),function(e){function t(){var e,n,r;O()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return A()(r,(n=r=A()(this,(e=B()(t)).call.apply(e,[this].concat(o))),W()(W()(W()(F()(F()(r)),"onMouseEnter",function(e){-1!==r.props.activeLayerID&&r.props.enterLayer(r.props.layer.id)}),"onMouseLeave",function(e){-1!==r.props.activeLayerID&&r.props.enterLayer(-1)}),"handleClick",function(){var e=r.props,t=e.requestSelectLayer,n=e.layer.id,a=e.handleShowlayerInfo;t(n),a(!0)}),n))}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.layer,n=e.activeLayerID,r=e.enteredLayerID,a=e.unit,o=e.ratio,i=t.id,c=t.src_width,s=t.src_height,l=i===n,u=i===r||-1===r,d=Y()("Layer",{"is-active":l,"is-focus":u}),p=Object(ne.a)(c,o),f=Object(ne.a)(s,o);return X.a.createElement("div",{className:d,"data-width":"".concat(p).concat(a),"data-height":"".concat(f).concat(a),"data-lid":i,onClick:this.handleClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},l&&X.a.createElement("span",{className:"LayerCorner left top"}),l&&X.a.createElement("span",{className:"LayerCorner left bottom"}),l&&X.a.createElement("span",{className:"LayerCorner right top"}),l&&X.a.createElement("span",{className:"LayerCorner right bottom"}))}}]),I()(t,e),t}(V.Component));W()(re,"propTypes",{layer:H.a.object,requestSelectLayer:H.a.func,enterLayer:H.a.func,handleShowlayerInfo:H.a.func,activeLayerID:H.a.oneOfType([H.a.number,H.a.string]),enteredLayerID:H.a.oneOfType([H.a.number,H.a.string]),unit:H.a.string,ratio:H.a.number});var ae=function(e){function t(){return O()(this,t),A()(this,B()(t).apply(this,arguments))}return L()(t,[{key:"render",value:function(){var e=this.props,n=e.layer,r=e.parentRect,a=e.treeProps,o=n.width,i=n.height,c=n.top,s=n.left,l=n.z,u=n.childrenLayers,d=n.rotation||0,p=Object(ne.g)({width:o,height:i,rotate:d,top:c,left:s}),f=te()(p,4),h=f[0],m={top:c,left:s,width:o,height:i},v=f[1],g=f[2],y=f[3],b={top:(h-r.top)/r.height*100+"%",left:(v-r.left)/r.width*100+"%",width:g/r.width*100+"%",height:y/r.height*100+"%",zIndex:l||0};return X.a.createElement("div",{"data-id":n.id,className:"layer-tree-node",style:b},X.a.createElement(re,Q()({layer:n},a)),u&&u.length>0&&u.map(function(e){return X.a.createElement(t,{key:e.id,layer:e,parentRect:m,treeProps:a})}))}}]),I()(t,e),t}(V.Component);W()(ae,"propTypes",{layer:H.a.object,parentRect:H.a.object,treeProps:H.a.object});var oe=n("RIqP"),ie=n.n(oe),ce=n("cJHP"),se=n.n(ce),le=n("SA+Z"),ue=n.n(le),de=(n("oKLx"),function(e){function t(){var e,n,r;O()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return A()(r,(n=r=A()(this,(e=B()(t)).call.apply(e,[this].concat(o))),W()(W()(F()(F()(r)),"state",{ifHideLayer:!1}),"onMouseLeave",function(){"number"==typeof r.props.activeLayerID?r.props.enterLayer("artboard-base"):r.props.enterLayer(r.props.currentScreen.cid)}),n))}return L()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.currentScreen,n=e.activeLayerID,r=this.props,a=r.currentScreen,o=r.enterLayer;t!=a&&o(-1),-1!==n&&n?this.setState({ifHideLayer:!1}):this.setState({ifHideLayer:!0})}},{key:"render",value:function(){var e=this.props,t=e.isShowLayerList,n=e.layers,r=e.currentScreen,a=e.unit,o=e.ratio,i=e.activeLayerID,c=e.enteredLayerID,s=e.enterLayer,l=e.requestSelectLayer,u=e.handleShowlayerInfo,d=this.state.ifHideLayer,p=function(e){var t=ue()(e),n=t[0],r={childrenLayers:[]},a={},o=[],i=[];t.slice(1).forEach(function(e){var t=e.id,n=e.panel_cid;"artboard-base"===t?se()(r,e):"number"==typeof t?r.childrenLayers.push(e):n?a[n]?a[n].push(e):a[n]=[e]:"panel"===e.name?o.push(e):i.push(e)}),o.forEach(function(e){return e.childrenLayers=a[e.cid]});var c=(r.childrenLayers.length?[r]:[]).concat(o,i).sort(function(e,t){return e.z-t.z||e.timestamp-t.timestamp});return[n].concat(ie()(c))}(n),f=pe(a,o,s,i,c,l,u),h={top:0,left:0,width:r.width,height:r.height};return X.a.createElement("div",{className:Y()("LayerList",{hiddenLayer:d&&t}),onMouseLeave:this.onMouseLeave},p.map(function(e){return X.a.createElement(ae,{key:e.id,layer:e,parentRect:h,treeProps:f})}))}}]),I()(t,e),t}(V.Component));W()(de,"propTypes",{isSpaceDown:H.a.bool,layers:H.a.array,requestSelectLayer:H.a.func,resetLayer:H.a.func,artboard:H.a.object,enterLayer:H.a.func,handleShowlayerInfo:H.a.func,currentScreen:H.a.object,activeLayerID:H.a.oneOfType([H.a.number,H.a.string]),enteredLayerID:H.a.oneOfType([H.a.number,H.a.string]),isShowLayerList:H.a.bool,unit:H.a.string,ratio:H.a.number,dispatch:H.a.func});var pe=Object(ne.h)(function(e,t,n,r,a,o,i){return{unit:e,ratio:t,enterLayer:n,activeLayerID:r,enteredLayerID:a,requestSelectLayer:o,handleShowlayerInfo:i}}),fe="REQUEST_SELECT_LAYER",he=function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:fe,payload:{layerID:e}}},me="SELECT_LAYER",ve=function(e){return{type:me,payload:{layerID:e}}},ge="ACTIVATE_LAYER",ye=function(e){return MB.event("点击了 Layer 元素","运行页"),{type:ge,payload:{layerID:e}}},be="ENTER_LAYER",we=Object(T.connect)(function(e){var t=e.container,n=t.common.keyFlags.isSpaceDown,r=t.layers,a=r.resourceByScreen,o=r.visibilityScreenID,i=r.activeLayerID,c=r.enteredLayerID,s=t.previewSetting,l=s.unit,u=s.ratio,d=s.isShowColorPicker,p=e.model,f=p.current.screenCid,h=p.screens.find(function(e){return e.cid===f}),m=a[o]&&a[o].layers,v=a[o]&&a[o].artboard;return{isSpaceDown:n,layers:m||[],artboard:v,currentScreen:h,activeLayerID:i,enteredLayerID:c,isShowLayerList:!d,unit:l,ratio:u}},function(e){return{requestSelectLayer:function(t){e(he(t))},enterLayer:function(t){e(function(e){return{type:be,payload:{layerID:e}}}(t))},handleShowlayerInfo:function(t){e({type:"reducer:preview-toolbar:update",payload:{isSelectLayer:t}})}}})(de),Ee=n("J2m7"),Se=n.n(Ee),Ce=(n("UZR7"),function(e){var t=e.layer,n=t.top,r=t.left,a=t.width,o=t.height,i=t.rotation,c=void 0===i?0:i,s=e.currentScreen,l=Object(ne.g)({width:a,height:o,left:r,top:n,rotate:c}),u=te()(l,4),d=u[0],p=u[1],f=u[2],h=u[3],m=s.width,v=s.height,g={top:"".concat(d/v*100,"%")},y={left:"calc(".concat((p+f)/m*100,"% - 1px)")},b={top:"calc(".concat((d+h)/v*100,"% - 1px)")},w={left:"".concat(p/m*100,"%")};return X.a.createElement("ul",{className:"LayerBoundings"},X.a.createElement("li",{className:"LayerBounding LayerBounding--top",style:g}),X.a.createElement("li",{className:"LayerBounding LayerBounding--right",style:y}),X.a.createElement("li",{className:"LayerBounding LayerBounding--bottom",style:b}),X.a.createElement("li",{className:"LayerBounding LayerBounding--left",style:w}))});Ce.propTypes={layer:H.a.object,currentScreen:H.a.object};var xe=Ce,_e=(n("fIwL"),function(e,t,n){return n>e&&n<t}),ke=function(e){var t=e.activeLayer,n=e.enteredLayer,r=e.currentScreen,a=e.unit,o=e.ratio;if(!t||!n||t.id===n.id)return null;var i=Object(ne.g)({width:t.width,height:t.height,top:t.top,left:t.left,rotate:t.rotation||0}),c=te()(i,4),s=c[0],l=c[1],u=c[2],d=c[3],p=Object(ne.g)({width:n.width,height:n.height,left:n.left,top:n.top,rotate:n.rotation||0}),f=te()(p,4),h=f[0],m=f[1],v=f[2],g=f[3],y={horizontal:{line1:[{display:l,src:t.src_left},{display:l+u,src:t.src_left+t.src_width}],line2:[{display:m,src:n.src_left},{display:m+v,src:n.src_left+n.src_width}]},vertical:{line1:[{display:s,src:t.src_top},{display:s+d,src:t.src_top+t.src_height}],line2:[{display:h,src:n.src_top},{display:h+g,src:n.src_top+n.src_height}]}},b={horizontal:[],vertical:[]},w={horizontal:{},vertical:{}};for(var E in y)for(var S=y[E].line1,C=y[E].line2,x=0;x<S.length;x++)for(var _=0;_<C.length;_++){var k=S[x].display>C[_].display?{start:C[_],end:S[x]}:{start:S[x],end:C[_]},M=k.start,T=k.end;_e(M.display,T.display,S[1-x].display)||_e(M.display,T.display,C[1-_].display)||!(T.display-M.display>0)||M.display===S[0].display&&T.display===S[1].display||M.display===C[0].display&&T.display===C[1].display||w[E][M.display]||(w[E][T.display]=!0,b[E].push({start:M,end:T}))}var N=[],O=r.width,j=r.height,I=function(e,t){var n=Object(ne.g)({width:e.width,height:e.height,top:e.top,left:e.left,rotate:e.ro}),r=te()(n,4),a=r[0],o=r[1],i=r[2],c=r[3],s=t.width,l=t.left,u=t.top,d=o+i,p=l+s,f=a+c,h=u+t.height,m=!1,v=!1,g=!1;return(o<=l&&d>=p&&a<=u&&f>=h||o>=l&&o<=p&&a>=u&&f<=h)&&(g=!0),(o>=l&&o<=p||l>=o&&l<=d)&&(m=!0),(a<=u&&f>=u||a>=u&&h>=a)&&(v=!0),{ifHorizontal:m,ifVertical:v,ifAllWraped:g}}(t,n),R=I.ifHorizontal,L=I.ifVertical,D=I.ifAllWraped,A=function(e){switch(e){case"horizontal":case"vertical":return delete b[e];case"all":return delete b.horizontal,void delete b.vertical;default:return}};!D&&R&&!L&&A("horizontal"),!D&&L&&!R&&A("vertical"),!D&&R&&L&&A("all");var P=function(e){N.push(b[e].map(function(t,n){var r;r="horizontal"===e?{left:"".concat(t.start.display/O*100,"%"),width:"".concat((t.end.display-t.start.display)/O*100,"%"),top:"".concat((d/2+s)/j*100,"%")}:{top:"".concat(t.start.display/j*100,"%"),height:"".concat((t.end.display-t.start.display)/j*100,"%"),left:"".concat((u/2+l)/O*100,"%")},se()(r,{zIndex:Math.pow(2,31)});var i=Object(ne.a)(t.end.src-t.start.src,o);return X.a.createElement("li",{key:"".concat(e).concat(n),className:"LayerDistance LayerDistance--".concat(e),"data-length":t.end.src-t.start.src,style:r},X.a.createElement("span",null,"".concat(i).concat(a)))}))};for(var B in b)P(B);return X.a.createElement("ul",{className:"LayerDistances"},Array.prototype.concat.apply([],N))};ke.propTypes={activeLayer:H.a.object,enteredLayer:H.a.object,currentScreen:H.a.object,unit:H.a.string,ratio:H.a.number};var Me=ke,Te=(n("9gsH"),function(e){var t=e.activeLayer,n=e.enteredLayer,r=e.currentScreen,a=e.unit,o=e.ratio;return X.a.createElement("div",{className:"MeasuresContainer"},n&&n!=t&&X.a.createElement(xe,{layer:n,currentScreen:r,unit:a,ratio:o}),X.a.createElement(Me,{activeLayer:t,enteredLayer:n,currentScreen:r,unit:a,ratio:o}))});Te.propTypes={activeLayer:H.a.object,enteredLayer:H.a.object,currentScreen:H.a.object,unit:H.a.string,ratio:H.a.number};var Ne=Te,Oe=Object(T.connect)(function(e){return a()({},function(e){var t=e.container,n=t.layers,r=n.resourceByScreen,a=n.visibilityScreenID,o=n.activeLayerID,i=n.enteredLayerID,c=t.previewSetting,s=c.ratio,l=c.unit,u=e.model,d=u.current.screenCid,p=u.screens,f=r[a];return f?{activeLayer:Se()(f.layers,function(e){return e.id===o}),enteredLayer:Se()(f.layers,function(e){return e.id===i}),currentScreen:p.find(function(e){return e.cid===d}),ratio:s,unit:l}:{activeLayer:{},enteredLayer:{},currentScreen:{}}}(e))})(Ne),je=function(e){function t(){var e,n,r;O()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return A()(r,(n=r=A()(this,(e=B()(t)).call.apply(e,[this].concat(o))),W()(F()(F()(r)),"checkIfNeedHideLayer",function(e){var t=r.props,n=t.isSpaceDown,a=t.requestSelectLayer,o=t.handleShowlayerInfo;!n&&e.target.contains(document.getElementById("simulator-container"))&&(a(-1),o(!1))}),n))}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.error,r=e.isActive,a=e.isSelectLayer,o=e.isShowColorPicker,i=e.activeLayerID;if(!r)return null;if(t)return null;if(n)return null;var c=-1!==i&&!o;return X.a.createElement("div",null,X.a.createElement(we,null),c&&X.a.createElement(Oe,null),a&&X.a.createElement(G.a,{onClick:this.checkIfNeedHideLayer}))}}]),I()(t,e),t}(V.PureComponent);je.propTypes={isActive:H.a.bool,isFetching:H.a.bool,isSpaceDown:H.a.bool,isSelectLayer:H.a.bool,isShowColorPicker:H.a.bool,activeLayerID:H.a.oneOfType([H.a.number,H.a.string]),requestSelectLayer:H.a.func,handleShowlayerInfo:H.a.func,error:H.a.string};var Ie="SET_VISIBILITY_SCREEN",Re="RECEIVE_RESOURCE_SUCCESS",Le=function(e,t){var n=t.document,r=t.layers,o=t.artboard;return{type:Re,payload:a()({screenID:e},n,{layers:r,artboard:o})}},De="RECEIVE_RESOURCE_ERROR",Ae=function(e,t){return{type:De,payload:{screenID:e,error:t}}},Pe=n("FjbR"),Be=n.n(Pe),Ue=n("cl8F"),Fe=n("qOCw"),ze=function(e,t){var n="".concat(e,"_").concat(MB.currentProject.device),r=e,a=Ue.a[n]||Ue.a[r];return a&&a[t]?a[t]:Ue.a[t]},We=function(e){return Be()(e)||"artboard-base"===e},qe=/<[^>]+>/gi,He=function(e){var t=e.model,n=t.current,r=n.screenCid,a=n.projectCid,o=t.screens,i=t.widgets,c=t.projects,s=o.find(function(e){return e.cid===r}),l=Ve(c,a).device,u=Xe(r),d=0;return i.concat(u).filter(function(e){return d||e.screen_cid!==s.cid||"status_bar"!==e.name||(d=e.height),e.screen_cid===s.cid&&!["pg","lr","sticky"].includes(e.name)&&e.v&&!("image_view"===e.name&&e.width===s.width&&e.height===s.height)}).map(function(e){var t,n;switch(e.name){case"status_bar":t=0;break;case"keyboard":case"tab_bar":t=s.height-e.height;break;case"navigation_bar":t=d;break;default:t=e.top}return e.top=t,n=e.name,["status_bar","keyboard","tab_bar"].includes(n)&&(e.width=s.width),Ye(e,l)}).sort(function(e,t){return e.z-t.z||e.timestamp-t.timestamp})},Ve=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),Xe=function(e){var t=window.Screen;return t?t.find(e).cpanels().reduce(function(t,n){var r=n.top,o=n.left,i=n.cid,c=n.mainState().cwidgets();return t.concat([n.__proto__]).concat(c.map(function(t){var n=t.__proto__;return a()({},n,{z:n.z,top:t.top+r,left:t.left+o,screen_cid:e,panel_cid:i,id:"".concat(i,"-").concat(n.id)})}))},[]):[]},Ze=/\\\w+/gi,Ge=function(e){return e?e.replace(Ze,"").trim():Ue.a},Ke=function(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)},Ye=function(e,t){var n,r,a={},o=e.name,i=e.ro,c=e.border_radius,s=e.bs,l=e.ha,u=e.va,d=e.lh,p=e.box_shadow,f=e.text_shadow,h=e.sc,m=e.ds,v=e.text;if(v&&(n=!!(r=v)&&r.replace(qe,""),a.text_styles=[{font_size:e.fs,color:Ge(e.tc||ze(o,"tc")),length:n.length,font_face:function(e,t){var n=Object(ne.i)(e)?"chinese":"english",r="iphone"===t||"ipad"===t?"ios":t,a=Ke()?"mac":"windows";return Je[a][r][n]}(v,t)}],a.text=n),l&&(a.alignment=l),u&&(a.vertical_alignment=u),d&&(a.line_height=d),c&&(a.bd_radius=c),i&&(a.rotation=i),a.bc=Ge(e.bc||ze(o,"bc")),s&&(a.borders=[{thickness:s,color:Ge(a.bc)}]),e.bg&&(a.bg_colors=[{value:Ge(e.bg)}]),"triangleb"!==o&&"triangletl"!==o&&"icon_button"!==o||(a.bg_colors=[{value:Ge(e.tc||ze(o,"tc"))}]),p){var g=JSON.parse(p)[0];a.shadows=[{offset_x:g[1],offset_y:g[2],blur_radius:g[3],spread:g[4],color:Ge(g[5].replace(Ze,""))}]}else h&&m&&(a.shadows=[{color:Ge(h.replace(Ze,"")),blur_radius:m}]);if(f){var y=JSON.parse(f)[0];a.textShadows=[{offset_x:y[0],offset_y:y[1],blur_radius:y[2],color:Ge(y[3].replace(Ze,""))}]}else e.ts&&(a.textShadows=[{color:Ge(e.tsc.replace(Ze,"")),blur_radius:e.ts}]);return"label"!==o&&"text_view"!==o||(a.hiddSpacing=!0),se()({},e,a)},Je={mac:{ios:{chinese:"PingFang SC",english:"-apple-system"},android:{chinese:"PingFang SC",english:"Roboto"},web:{chinese:"PingFang SC",english:"Roboto"}},windows:{ios:{chinese:"Microsoft Yahei",english:"Arial"},android:{chinese:"Microsoft Yahei",english:"Roboto"},web:{chinese:"Microsoft Yahei",english:"Roboto"}}},Qe=n("yXPU"),$e=n.n(Qe),et=function(){var e=$e()(i.a.mark(function e(t,n){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.artboard_id&&n.find(function(e){return e.screen_cid===t.cid&&"image_view"===e.name&&e.image&&-1!==e.image.indexOf(String("/".concat(t.artboard_asset_id,"/")))}))){e.next=13;break}if(!window.MBArtboards){e.next=6;break}i=t.cid,a=window.MBArtboards[i],e.next=9;break;case 6:return e.next=8,o=t.artboard_id,Object(s.b)("".concat("/apis/sketch","/artboards/").concat(o,".json"));case 8:a=e.sent;case 9:nt(a,r),tt(a),e.next=14;break;case 13:a={artboard:{top:0,left:0,width:t.width,height:t.height},layers:[],document:{document_colors:[],text_styles:[],global_colors:[]}};case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}var o,i},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),tt=function(e){e.layers.some(function(e){return e.z})?e.layers.sort(function(e,t){return e.z-t.z}):e.layers.sort(function(e,t){return parseInt(t.width)*parseInt(t.height)-parseInt(e.width)*parseInt(e.height)})},nt=function(e,t){se()(e.artboard,{widgetZ:t.z,widgetTop:t.top,widgetLeft:t.left,widgetWidth:t.width,widgetHeight:t.height}),e.layers.push({id:"artboard-base",name:e.artboard.name,top:0,left:0,z:t.z,width:e.artboard.width,height:e.artboard.height,bg_colors:[{value:t.bg}],timestamp:t.timestamp+1})},rt=i.a.mark(lt),at=i.a.mark(ut),ot=i.a.mark(dt),it=i.a.mark(pt),ct=i.a.mark(mt),st=[];function lt(e){var t,n,r,o,s,l,u,d,p,f,h,m,v;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.e)();case 2:if(t=e.sent,n=t.container.layers,r=n.resourceByScreen,o=n.visibilityScreenID,s=t.model,l=s.current.screenCid,u=s.screens,d=s.widgets,p=u.find(function(e){return e.cid===l}),r[o]&&!r[o].error){e.next=26;break}if(st.includes(o)){e.next=26;break}return st.push(o),e.prev=8,e.next=11,Object(c.b)(et,p,d);case 11:return f=e.sent,h=He(t),m=[{type:"screen",id:p.cid,name:p.name,top:0,left:0,width:p.width,height:p.height,src_left:0,src_top:0,src_width:f.artboard.width,src_height:f.artboard.height,bg_colors:[{value:Ge(p.bgcolor)}]}].concat(f.layers).concat(h).reduce(function(e,t){var n=t.id,r=t.top,o=t.left,i=t.width,c=t.height,s=We(n)?f.artboard.widgetWidth/f.artboard.width:1,l=r*s,u=o*s,d=i*s,h=c*s,m=Math.min(Math.max(u,0),p.width),v=Math.min(Math.max(u+d,0),p.width),g=Math.min(Math.max(l,0),p.height),y=Math.min(Math.max(l+h,0),p.height);return v-m!=0&&y-g!=0&&e.push(a()({},t,{left:m,top:g,width:v-m,height:y-g,src_top:Number(parseFloat(Math.max(r,0)).toFixed(2)),src_left:Number(parseFloat(Math.max(o,0)).toFixed(2)),src_width:Number(parseFloat(Math.min(o+i,f.artboard.width)-Math.max(o,0)).toFixed(2)),src_height:Number(parseFloat(Math.min(r+c,f.artboard.height)-Math.max(r,0)).toFixed(2))})),e},[]),v=a()({},f,{layers:m}),st.splice(st.indexOf(o),1),e.next=18,Object(c.d)(Le(o,v));case 18:e.next=26;break;case 20:return e.prev=20,e.t0=e.catch(8),console.log(e.t0.stack),st.splice(st.indexOf(o),1),e.next=26,Object(c.d)(Ae(o,e.t0.message));case 26:case"end":return e.stop()}},rt,this,[[8,20]])}function ut(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)(Ie,lt);case 2:case"end":return e.stop()}},at,this)}function dt(e){var t,n,r,a,o,s;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.layerID,i.next=3,Object(c.e)();case 3:return n=i.sent,r=n.container.layers,a=r.resourceByScreen,o=r.visibilityScreenID,s=ht(a[o].layers,t),ft&&console.log("[makeSureWithSliceId]",s),i.next=9,Object(c.d)(ve(s));case 9:return i.next=11,Object(c.d)(ye(s));case 11:case"end":return i.stop()}},ot,this)}function pt(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.g)(fe,dt);case 2:case"end":return e.stop()}},it,this)}var ft=!1,ht=function(e,t){var n=Se()(e,{id:t});if(!n||!n.parent||n.image_set_zip)return t;for(;n;){var r=Se()(e,{id:n.parent});if(!r||!r.image_set_zip||!r.parent)return t;if(r.image_set_zip)return n.parent;n=r.parent}};function mt(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[ut(),pt()];case 2:case"end":return e.stop()}},ct,this)}var vt={"-1":{isFetching:!1,layers:[],error:""}};var gt={visibilityScreenID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"-1",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:return t.payload.screenID;default:return e}},resourceByScreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:case De:return se()({},e,W()({},t.payload.screenID,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,layers:[],error:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return se()({},e,{isFetching:!1,layers:t.payload.layers,error:void 0,artboard:t.payload.artboard,documentColor:t.payload.document_colors,globalColor:t.payload.global_colors,globalText:t.payload.text_styles});case De:return se()({},e,{isFetching:!1,layers:[],error:t.payload.error});default:return e}}(e[t.payload],t)));case"container:layers:clear":return vt;default:return e}}};var yt={selectedLayerID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return t.payload.layerID===e?-1:t.payload.layerID;case Ie:return-1;default:return e}},activeLayerID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return t.payload.layerID;case Ie:return-1;default:return e}},enteredLayerID:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return t.payload.layerID;default:return e}}},bt=Object(M.combineReducers)(a()({},gt,yt)),wt=Object(T.connect)(function(e){var t=e.container,n=t.layers,r=t.common.keyFlags.isSpaceDown,a=t.previewSetting,o=a.toolbarActiveItem,i=a.isSelectLayer,c=a.isShowColorPicker,s=n.activeLayerID,l=n.resourceByScreen[n.visibilityScreenID]||{},u=l.isFetching,d=void 0===u||u,p=l.error;return{isActive:"inspect"==o,isSpaceDown:r,isSelectLayer:i,isShowColorPicker:c,isFetching:d,activeLayerID:s,error:void 0===p?"":p}},function(e){return{requestSelectLayer:function(t){e(he(t))},handleShowlayerInfo:function(t){e({type:"reducer:preview-toolbar:update",payload:{isSelectLayer:t}})}}})(je),Et={screenSearch:""};var St=n("1iCU"),Ct={ratio:1,emPixel:16,unit:"px",colorUnit:"hex",language:"css",toolbarActiveItem:St.c,isShowColorPicker:!1,isSelectLayer:!1,userPickColor:Object(ne.f)(),focusColor:null,loadSliceUrl:""};var xt={artboards:[],error:!1};var _t={slices:[],loading:!0,error:!1};var kt=[0,1,2,3,4,5,6,7].map(function(e){return{create:!!(1&e),update:!!(2&e),delete:!!(4&e)}}),Mt={owner:!0,admin:!0,editor:!0,viewer:!0},Tt={owner:!0,admin:!0},Nt={allowComment:!1,denyMessage:""},Ot=function(){return Nt},jt=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INVALID_ID_0",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"INVALID_ID_1",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4?arguments[4]:void 0,i=Nt.allowComment,c=o&&"owner"===o.role,s=r===n,l="owner"===e,u=i&&Mt[e]||!1,d=i&&u&&s;return t=null===a?i&&(d||Tt[e]||!1)||s:i&&(c?l:"admin"===e)||s||l,kt[(u?1:0)+(d?2:0)+(t?4:0)]},It=n("cAqp"),Rt=n.n(It).a["comment-marker"],Lt=function(e){function t(e){var n;O()(this,t),n=A()(this,B()(t).call(this,e));var r={isDragging:!1,position:{left:0,top:0}},o=a()({},At,{mousemove:Object(ne.j)(function(e){var t=n.props,r=t.offsetLeft,a=t.offsetTop,o=(0,t.markerOperations.getMarkerPosition)(e);(n.state.isDragging||function(e,t,n){var r=e-n.left,a=t-n.top;return r*r+a*a>=Pt}(r,a,o))&&n.setState({isDragging:!0,position:o})}),mouseup:Object(ne.j)(function(e){if(c(),n.state.isDragging){var t=n.props,a=t.commentThreadCid,o=t.markerOperations,i=o.doUpdateCommentThread,s=(0,o.getMarkerPosition)(e);i({cid:a,left:s.left,top:s.top})}else setTimeout(function(){var e=n.props,t=e.isSelect,r=e.commentThreadCid;(0,e.markerOperations.setSelectCommentThreadCid)(t?null:r)},0);n.setState(r)}),mouseleave:function(){c(),n.props.markerOperations.setFocusCommentThreadCid(null),n.setState(r)}}),i=a()({},At,{mouseup:o.mouseup}),c=function(){return n.props.markerOperations.removeContainerEventListener(n.props.isEditable?o:i)};return n.markerListenerMap={onMouseDown:Object(ne.j)(function(){return n.props.markerOperations.addContainerEventListener(n.props.isEditable?o:i)}),onMouseEnter:Object(ne.j)(function(){return n.props.markerOperations.setFocusCommentThreadCid(n.props.commentThreadCid)}),onMouseLeave:Object(ne.j)(function(){return n.props.markerOperations.setFocusCommentThreadCid(null)}),onMouseUp:Dt,onDoubleClick:Dt,onClick:Dt},n.isFocused=!1,n.setElementRef=function(e){return n.elementRef=e},n.elementRef=null,n.state=r,n}return L()(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isFocus,n=e.markerOperations.doFocusAtElement;t&&!this.isFocused&&n(this.elementRef),this.isFocused=t}},{key:"render",value:function(){var e=this.props,t=e.offsetLeft,n=e.offsetTop,r=e.isFocus,a=e.isFade,o=e.commentMarkerIndex,i=this.state,c=i.isDragging,s=i.position,l=r?"focus":!r&&a?"fade":"",u=c?s:{left:"".concat(t,"px"),top:"".concat(n,"px")};return X.a.createElement("div",{className:"".concat(Rt," ").concat(l),style:u},X.a.createElement("span",Q()({ref:this.setElementRef,tabIndex:o},this.markerListenerMap),o))}}]),I()(t,e),t}(V.PureComponent);W()(Lt,"propTypes",{commentMarkerIndex:H.a.number,commentThreadCid:H.a.string,offsetLeft:H.a.number,offsetTop:H.a.number,isEditable:H.a.bool,isSelect:H.a.bool,isFocus:H.a.bool,isFade:H.a.bool,markerOperations:H.a.object});var Dt=Object(ne.j)(),At={mouseup:Dt,mousedown:Dt,mousemove:Dt,mouseleave:Dt,mouseout:Dt,click:Dt,dblclick:Dt},Pt=225;var Bt=20,Ut=function(e){function t(e){var n;return O()(this,t),(n=A()(this,B()(t).call(this,e))).addCommentThreadListener=Object(ne.j)(function(e){var t=n.props,r=t.getContentElement,a=t.isActive,o=t.currentUserRole,i=t.dispatch;a&&jt(o).create&&Ft(e,r().getBoundingClientRect())&&i({type:"entry:comment-threads:add",payload:n.markerOperations.getMarkerPosition(e)})}),n.markerOperations={addContainerEventListener:function(e){for(var t in e)n.props.getContentElement().addEventListener(t,e[t])},removeContainerEventListener:function(e){for(var t in e)n.props.getContentElement().removeEventListener(t,e[t])},setFocusCommentThreadCid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.props.dispatch({type:"container:comment:focus",payload:{focus:e,from:"mask"}})},setSelectCommentThreadCid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.props.dispatch({type:"container:comment:select",payload:{select:e,from:"mask"}})},doUpdateCommentThread:function(e){var t=e.cid,r=e.top,a=e.left;return n.props.dispatch({type:"entry:comment-threads:update",payload:{cid:t,top:r,left:a}})},doFocusAtElement:function(e){return n.props.dispatch({type:"entry:focus-element",payload:{focusType:"external",element:e}})},getMarkerPosition:function(e){var t=n.props.queryCurrentScreenContainerElement().getBoundingClientRect(),r=n.props.getContentElement().getBoundingClientRect();return{left:Object(ne.k)(e.clientX,r.left+Bt,r.right-Bt)-t.left,top:Object(ne.k)(e.clientY,r.top+Bt,r.bottom-Bt)-t.top}}},n}return L()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.getContentElement;n!==e.isActive&&r()&&(n?r().addEventListener("dblclick",this.addCommentThreadListener):r().removeEventListener("dblclick",this.addCommentThreadListener))}},{key:"componentWillUnmount",value:function(){var e=this.props.getContentElement;e()&&e().removeEventListener("dblclick",this.addCommentThreadListener)}},{key:"render",value:function(){var e=this;if(!this.props.isActive)return null;var t=this.props,n=t.commentContainer,r=n.select,a=n.focus,o=t.scale,i=t.commentThreadList,c=t.userId,s=t.currentUserRole;return X.a.createElement("div",null,i.map(function(t,n){var i=t.cid,l=t.left,u=t.top,d=t.user_id,p=r===i,f=p||a===i,h=r&&!p||a&&!f;return X.a.createElement(Lt,{key:i,commentMarkerIndex:n+1,commentThreadCid:i,offsetLeft:l*o,offsetTop:u*o,isEditable:jt(s,c,d).update,isSelect:p,isFocus:f,isFade:h,markerOperations:e.markerOperations})}))}}]),I()(t,e),t}(V.PureComponent);W()(Ut,"propTypes",{getContentElement:H.a.func.isRequired,scale:H.a.number,queryCurrentScreenContainerElement:H.a.func.isRequired,isActive:H.a.bool,commentContainer:H.a.object,commentThreadList:H.a.array,userId:H.a.number,currentUserRole:H.a.string,dispatch:H.a.func});var Ft=function(e,t){var n=t.left,r=t.top,a=t.width,o=t.height;return n<=e.clientX&&r<=e.clientY&&n+a>=e.clientX&&r+o>=e.clientY},zt={focus:null,select:null,from:null};var Wt=n("zkrS"),qt=n("6XO9"),Ht=n("i8i4"),Vt=n.n(Ht),Xt=n("Ku8Y"),Zt=n.n(Xt),Gt=Zt.a["editable-span"],Kt=Zt.a["reply-textarea"],Yt=function(e){function t(e){var n;return O()(this,t),(n=A()(this,B()(t).call(this,e))).getEditableTextAreaRef=function(e){return n.textarea=e&&e.querySelector("textarea")},n.focusTextarea=function(){if(n.textarea){n.textarea.focus&&n.textarea.focus();var e=n.textarea.value.length;n.textarea.setSelectionRange(e,e)}},n}return L()(t,[{key:"componentDidMount",value:function(){this.focusTextarea()}},{key:"render",value:function(){var e=this.props,t=e.editingValue,n=e.placeholder,r=e.btnSureClass;return X.a.createElement("div",{ref:this.getEditableTextAreaRef,className:Zt.a.container},X.a.createElement(qt.Textarea,{className:"".concat(Gt," textarea"),value:t,placeholder:n||"",onChange:this.props.onEditUpdate,onKeyDown:this.props.onEditKeyPress}),X.a.createElement("div",{className:Zt.a["btn-sort"]},X.a.createElement(qt.Button,{className:Zt.a["btn-cancel"],onClick:this.props.toggleEdit},Wt.a.I18N.preview.comment.cancelEdit),X.a.createElement(qt.Button,{className:r,onClick:this.props.onEditFinish},Wt.a.I18N.preview.comment.updateEdit)))}}]),I()(t,e),t}(V.PureComponent);W()(Yt,"propTypes",{editingValue:H.a.string,placeholder:H.a.string,toggleEdit:H.a.func,btnSureClass:H.a.string,onEditUpdate:H.a.func,onEditKeyPress:H.a.func,onEditFinish:H.a.func});var Jt=function(e){function t(e){var n;return O()(this,t),(n=A()(this,B()(t).call(this,e))).toggleEditing=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.setState({isEditing:e,editingValue:n.props.getValue()}),e&&setTimeout(n.focusTextarea,0)},n.startEditing=function(){return n.toggleEditing(!0)},n.onEditUpdate=function(e){return n.setState({editingValue:e})},n.onEditKeyPress=function(e){return $t(e)&&(!n.props.isMultiLine||!e.shiftKey)&&n.onEditFinish()},n.onEditFinish=function(){var e=n.state.editingValue.trim();e!==(n.props.getValue()||"")&&n.props.onValueChange(e),n.props.toggleEdit()},n.state={isEditing:e.isEditing,editingValue:""},e.initEditing&&setTimeout(n.startEditing,50),n}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.isEditLocked,r=e.getValue,a=e.toggleEdit,o=this.state,i=o.isEditing,c=o.editingValue,s=r()||"",l="".concat(Zt.a["btn-sure"]," ").concat(c.length&&Zt.a.active);return n?X.a.createElement("span",{className:"".concat(Gt," span")},s):i?X.a.createElement(Yt,{editingValue:c,placeholder:t,toggleEdit:a,btnSureClass:l,onEditUpdate:this.onEditUpdate,onEditKeyPress:this.onEditKeyPress,onEditFinish:this.onEditFinish}):X.a.createElement("span",{className:"".concat(Gt," span")},s)}}]),I()(t,e),t}(V.PureComponent);W()(Jt,"propTypes",{onValueChange:H.a.func,getValue:H.a.func,placeholder:H.a.string,isMultiLine:H.a.bool,initEditing:H.a.bool,isEditLocked:H.a.bool,isEditing:H.a.bool,toggleEdit:H.a.func});var Qt=function(e){function t(e){var n;return O()(this,t),(n=A()(this,B()(t).call(this,e))).onEditUpdate=function(e){var t=e,r=n.props.handleActive;t.length?r(!0):r(!1),!n.props.isEditLocked&&n.setState({editingValue:t})},n.onEditKeyPress=function(e){return $t(e)&&(!n.props.isMultiLine||!e.shiftKey)&&n.onEditFinish(e)},n.onEditFinish=Object(ne.j)(function(){var e=n.getEditingValue();e&&n.props.onValueChange(e),n.setState(function(){return{editingValue:""}},function(){n.props.handleActive(!1)}),setTimeout(function(){return n.setState({editingValue:""})})}),n.getEditingValue=function(){return(n.state.editingValue||"").trim()},n.focus=function(){n.setState({disabled:!1}),n.textarea&&n.textarea.focus()},n.disabledEdit=function(){return n.setState({disabled:!0})},n.textarea=null,n.state={editingValue:"",disabled:!1},n}return L()(t,[{key:"componentDidMount",value:function(){var e=Vt.a.findDOMNode(this);this.textarea=e.querySelector("textarea"),this.focus()}},{key:"componentDidUpdate",value:function(){if(this.props.isAutoHeight&&this.textarea){this.textarea.style.height="auto";var e=Math.max(this.textarea.scrollHeight+2,this.textarea.offsetHeight,this.props.minHeight);this.textarea.style.height="".concat(e,"px")}}},{key:"render",value:function(){var e=this.props.placeholder,t=void 0===e?"":e,n=this.state,r=n.editingValue,a=n.disabled;return X.a.createElement(qt.Textarea,{disabled:a,rows:1,className:Kt,value:r,placeholder:t,onChange:this.onEditUpdate,onKeyDown:this.onEditKeyPress})}}]),I()(t,e),t}(V.PureComponent);W()(Qt,"propTypes",{onValueChange:H.a.func,placeholder:H.a.string,handleActive:H.a.func,isMultiLine:H.a.bool,isEditLocked:H.a.bool,isAutoHeight:H.a.bool,minHeight:H.a.number});var $t=function(e){return"Enter"===e.key||13===e.which||13===e.keyCode},en=function(e){var t=e.avatar,n=e.width,r=e.height,a=e.name,o=e.index;e.isDot;return X.a.createElement("div",{className:Zt.a.avatarInform},X.a.createElement("img",{className:Zt.a.avatar,src:t,width:n,height:r}),X.a.createElement("div",{className:Zt.a["avatar-slide"]},o&&X.a.createElement("span",{className:Zt.a.index},"#".concat(o," ")),X.a.createElement("span",{className:"name"},a)))};en.propTypes={avatar:H.a.string.isRequired,width:H.a.number,height:H.a.number,name:H.a.string,index:H.a.number,isDot:H.a.bool},en.defaultProps={width:24,height:24};var tn=n("i6OX"),nn=n("mquD"),rn=n.n(nn),an=n("UbMB"),on=n.n(an),cn=on.a.bind(rn.a),sn=function(e){var t=e.onDelete;return X.a.createElement(qt.Tooltip,{content:{hover:I18N.preview.comment.modify_delete},duration:1e3},X.a.createElement(qt.Dropdown,{opener:X.a.createElement(tn.b,{type:"dora",name:"trash",className:rn.a.modify}),menuList:[I18N.preview.comment.modify_delete],menuX:"left",menuClassName:"comment-delete",arrowed:!0,onSelect:t}))};sn.propTypes={onDelete:H.a.func.isRequired};var ln=function(e){var t=e.onSelect;return X.a.createElement(qt.Tooltip,{content:{hover:I18N.preview.setting},duration:1e3},X.a.createElement(qt.Dropdown,{opener:X.a.createElement(tn.b,{name:"cog",type:"dora",className:rn.a.edit}),menuList:[I18N.preview.comment.modify_edit],menuX:"left",arrowed:!0,menuClassName:"comment-setting",onSelect:t}))};ln.propTypes={onSelect:H.a.func.isRequired};var un=function(e){var t=e.hasUser,n=e.hasSelectCommentThread;return X.a.createElement("div",{className:cn("content-empty")},X.a.createElement("img",{src:"".concat("/images/preview/no-comment@2x.png")}),X.a.createElement("h3",{className:cn("add-comment")},I18N.preview.comment.add_comment),X.a.createElement("span",null,Ot().allowComment?t?Wt.a.I18N.preview.comment.thread_none_tip_signin:n?Wt.a.I18N.preview.comment.reply_none_tip:Wt.a.I18N.preview.comment.thread_none_tip:Ot().denyMessage))};un.propTypes={hasUser:H.a.bool,hasSelectCommentThread:H.a.bool};var dn="#8D9EA7",pn="#5B6B73",fn=function(e){function t(){var e;return O()(this,t),e=A()(this,B()(t).call(this)),W()(W()(F()(F()(e)),"unMountShow",function(){e.setState({animate:!1})}),"handleAnimateEnd",function(){e.props.isReply||e.setState({show:!1})}),e.state={backgroundColor:dn,disabled:!0,show:!1,animate:!1},e.handleActive=function(t){e.setState({backgroundColor:t?pn:dn,disabled:!t})},e}return L()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;if(!e.isReply)return this.unMountShow();this.setState({show:!0}),setTimeout(function(){t.setState({animate:!0})},0)}},{key:"componentDidUpdate",value:function(e,t){this.props.isReply&&t.show===this.state.show&&wn(this.containerRef)}},{key:"render",value:function(){var e=this,t=this.props,n=t.setReplyTextareaRef,r=t.onValueChange,a=t.doReply,o=this.state,i=o.backgroundColor,c=o.disabled,s=o.show,l=o.animate,u=cn("dropdown-reply",{"dropdown-on":l,"dropdown-off":!l});return s?X.a.createElement("div",{className:u,onTransitionEnd:this.handleAnimateEnd,ref:function(t){return e.containerRef=t}},X.a.createElement(Qt,{ref:n,onValueChange:r,handleActive:this.handleActive,placeholder:Wt.a.I18N.preview.comment.comment_placeholder,minHeight:60,isMultiLine:!0,isAutoHeight:!0}),X.a.createElement(qt.Button,{onClick:a,style:{backgroundColor:i,cursor:c?"not-allowed":"pointer"},disabled:c},Wt.a.I18N.preview.comment.comment_create)):null}}]),I()(t,e),t}(V.PureComponent);fn.propTypes={setReplyTextareaRef:H.a.func.isRequired,onValueChange:H.a.func.isRequired,doReply:H.a.func.isRequired,isReply:H.a.bool.isRequired};var hn=function(e){var t=e.permission,n=(e.comment,e.isFolded),r=e.setEditableSpanComponent,a=e.onValueChange,o=e.getValue,i=e.isEdit,c=e.toggleEdit;return X.a.createElement("div",{className:cn("comment-content",{folded:n})},X.a.createElement(Jt,{ref:r,onValueChange:a,getValue:o,placeholder:Wt.a.I18N.preview.comment.comment_placeholder,isEditLocked:!t.update,isEditing:i,toggleEdit:c,isMultiLine:!0}))};hn.propTypes={permission:H.a.object,comment:H.a.object,isFolded:H.a.bool,isEdit:H.a.bool,setEditableSpanComponent:H.a.func,onValueChange:H.a.func,getValue:H.a.func,toggleEdit:H.a.func,handleActive:H.a.func};var mn=function(e){var t=e.markIndex,n=e.information,r=e.onSelect,a=e.onDelete,o=e.permission,i=e.ifShowBtn,c=e.className,s=void 0===c?"":c,l=e.showByEnter,u=n.avatar,d=n.name;return X.a.createElement("div",{className:"".concat(cn("header-container")," ").concat(s)},X.a.createElement("div",{className:cn("header-info")},X.a.createElement(en,{avatar:u,name:d,index:t})),(o.update||o.delete)&&i&&l&&X.a.createElement("div",{className:cn("header-tool")},o.update&&X.a.createElement(ln,{onSelect:r}),o.delete&&X.a.createElement(sn,{onDelete:a})))};mn.propTypes={markIndex:H.a.number,information:H.a.object,permission:H.a.object,onSelect:H.a.func,onDelete:H.a.func,ifShowBtn:H.a.bool,className:H.a.string,showByEnter:H.a.bool};var vn="collaborator",gn=function(e,t){return e?"guest"===t.userRole?"not_collaborator":vn:"not_signin"},yn=function(e){var t=e.userId,n=e.currentState,r=e.permission;return gn(t,n)===vn&&r.create},bn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120;return e.length>t},wn=function(e){if(e){var t=e.getBoundingClientRect().bottom+En,n=document.getElementById("comment-thread"),r=n.scrollTop,a=n.scrollHeight;t+r>a?setTimeout(function(){return n.scrollTop=r+En},300):t>Sn&&(n.scrollTop=r+En)}},En=120,Sn=window.innerHeight,Cn=on.a.bind(rn.a),xn=function(e){var t=e.replyList,n=e.commentOperations,r=(e.current,e.currentState),a=e.doCreateComment;return t.map(function(e,t){var o=e.user_id,i=e.cid,c=n.getCollaborator(o),s=c.name,l=c.avatar;return X.a.createElement(_n,{key:i,name:s,avatar:l,comment:e,permission:n.getPermission(o),currentState:r,commentOperations:n,doCreateComment:a})})};xn.propTypes={replyList:H.a.array,commentOperations:H.a.object,permission:H.a.object,current:H.a.object,currentState:H.a.object,doCreateComment:H.a.func};var _n=function(e){function t(e){var n;O()(this,t),n=A()(this,B()(t).call(this,e)),W()(W()(W()(W()(F()(F()(n)),"doCreateComment",function(e){n.props.doCreateComment(e,!0),n.state.isReply&&n.toggleReply()}),"getCommentMessage",function(){return n.props.comment&&n.props.comment.message}),"handleSetting",function(e){0===Number(e)&&(n.toggleEditing(),MB.event("二次编辑","运行页"))}),"toggleEditing",function(){n.toggleEditState(),n.editableSpanComponent&&n.editableSpanComponent.toggleEditing(!n.state.isEdit)});var r=e.commentOperations,o=e.comment;return n.editableSpanComponent=null,n.setEditableSpanComponent=function(e){return n.editableSpanComponent=e},n.setReplyTextareaRef=function(e){return n.replyTextareaRef=e},n.doReply=function(e){n.replyTextareaRef&&n.replyTextareaRef.onEditFinish(e)},n.doUpdateComment=function(e){return r.doUpdateComment(a()({},o,{message:e}))},n.doDeleteComment=function(){return r.doDeleteComment(o)},n.toggleReply=function(){return n.setState(function(e){return{isReply:!e.isReply}})},n.toggleFolded=function(){return n.setState(function(e){return{isFolded:!e.isFolded}})},n.toggleEditState=function(){return n.setState(function(e){return{isEdit:!e.isEdit}})},n.state={isReply:!1,isFolded:!1,isEdit:!1,showByEnter:!0},n}return L()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.nextComment,n=t&&bn(t.message);n!=this.state.isFolded&&this.setState({isFolded:n})}},{key:"render",value:function(){var e=this.props,t=e.comment,n=e.name,r=e.avatar,a=e.permission,o=e.currentState,i=t.message,c=t.updated_at,s=t.user_id,l=this.state,u=l.isReply,d=l.isFolded,p=l.isEdit,f=l.showByEnter,h=yn({userId:s,currentState:o,permission:a});return X.a.createElement("div",{className:"".concat(Cn("container-reply"),"  ").concat(p&&Cn("remove-background"))},X.a.createElement(mn,{onDelete:this.doDeleteComment,onSelect:this.handleSetting,permission:a,information:{avatar:r,name:n},className:Cn("reply-header"),ifShowBtn:!p,showByEnter:f}),X.a.createElement("div",{className:"".concat(Cn("container-main")," ").concat(Cn("reply-content"))},i&&X.a.createElement(hn,{permission:a,onValueChange:this.doUpdateComment,getValue:this.getCommentMessage,setEditableSpanComponent:this.setEditableSpanComponent,isEdit:p,toggleEdit:this.toggleEditing,comment:t,isFolded:d})),!this.state.isEdit&&X.a.createElement("div",{className:Cn("container-bottom")},X.a.createElement("div",{className:rn.a.time},Wt.a.L10N.parseTimeAgo(1e3*c)),h&&X.a.createElement("div",{className:Cn("reply-sort"),onClick:this.toggleReply},X.a.createElement(tn.b,{type:"dora",name:"reply",className:Cn("btn-reply")}),u?Wt.a.I18N.preview.comment.cancel_reply:Wt.a.I18N.preview.comment.comment_create)),X.a.createElement(fn,{isReply:u,setReplyTextareaRef:this.setReplyTextareaRef,onValueChange:this.doCreateComment,doReply:this.doReply}))}}]),I()(t,e),t}(V.PureComponent);W()(_n,"propTypes",{comment:H.a.object,commentOperations:H.a.object,currentState:H.a.object,name:H.a.string,avatar:H.a.string,permission:H.a.object,doCreateComment:H.a.func,nextComment:H.a.object});var kn=on.a.bind(rn.a),Mn=function(e){function t(e){var n;O()(this,t),n=A()(this,B()(t).call(this,e)),W()(W()(W()(W()(W()(W()(W()(F()(F()(n)),"handleSetting",function(e){0==Number(e)&&(n.toggleEditing(),MB.event("二次编辑","运行页"))}),"toggleSelect",function(){var e=n.props,t=e.selectCid,r=e.commentOperations,a=e.commentThreadCid;t||r.setFocusCommentThreadCid(a)}),"cancelSelect",function(){var e=n.props,t=e.selectCid,r=e.commentOperations;t||n.state.isEdit||r.cancelSelect()}),"doUpdateComment",function(e){var t=n.props,r=t.commentOperations,o=t.commentList[0];o&&r.doUpdateComment(a()({},o,{message:e}))}),"doCreateComment",function(e,t){var r=n.props,a=r.commentThreadCid;r.commentOperations.doCreateComment(e,a),!t&&n.toggleReply()}),"getCommentMessage",function(){return n.props.commentList[0]&&n.props.commentList[0].message}),"handleRenderMoreComments",function(e){e.stopPropagation(),n.toggleRenderMore(),MB.event("展开评论","运行页")});var r=n.props,o=r.commentOperations,i=r.commentThreadCid,c=r.commentList[0];return n.setReplyTextareaRef=function(e){return n.replyTextareaRef=e},n.setCommentRef=function(e){return n.commentRef=e},n.doReply=function(e){n.replyTextareaRef&&n.replyTextareaRef.onEditFinish(e)},n.doDeleteThread=function(){return o.doDeleteCommentThread(i)},n.toggleEditing=function(){n.toggleEditState(),n.editableSpanComponent&&n.editableSpanComponent.toggleEditing(!n.state.isEdit)},n.setEditableSpanComponent=function(e){return n.editableSpanComponent=e},n.editableSpanComponent=null,n.toggleFolded=function(){return n.setState(function(e){return{isFolded:!e.isFolded}})},n.toggleReply=function(){return n.setState(function(e){return{isReply:!e.isReply}})},n.toggleEditState=function(){return n.setState(function(e){return{isEdit:!e.isEdit}})},n.toggleRenderMore=function(){return n.setState(function(e){return{renderMore:!e.renderMore}})},n.state={isFolded:c&&bn(c.message)||!1,isReply:!1,renderMore:!1,isEdit:!1,showByEnter:!0},n}return L()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.commentList,n=t[0]&&bn(t[0].message);n!=this.state.isFolded&&this.setState({isFolded:n})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.focusCid===e.commentThreadCid;!this.props.fromComment&&t&&this.commentRef&&this.commentRef.scrollIntoView()}},{key:"render",value:function(){var e=this.props,t=e.commentList,n=e.userId,r=e.currentState,a=e.commentThreadCid,o=e.permission,i=e.commentMarkerIndex,c=e.commentOperations,s=e.focusCid,l=e.fromComment,u=this.state,d=u.isReply,p=u.renderMore,f=u.isFolded,h=u.isEdit,m=u.showByEnter,v=s===a,g=t[0]||null,y=g&&c.getCollaborator(g.user_id),b=t.slice(1)||[],w=b.length>2,E=t.length,S="".concat(rn.a.comment," thread-initial entry ").concat(l?"":null==s?"":kn(v?"comment-focus":"comment-noFocus")),C=yn({userId:n,currentState:r,permission:o});return 0==E?null:X.a.createElement("div",{ref:this.setCommentRef,className:S,onMouseEnter:this.toggleSelect,onMouseLeave:this.cancelSelect},X.a.createElement("div",null,X.a.createElement(mn,{markIndex:i,onSelect:this.handleSetting,onDelete:this.doDeleteThread,permission:o,information:y,ifShowBtn:!h,showByEnter:m}),X.a.createElement("div",{className:kn("container-main")},g&&X.a.createElement(hn,{permission:o,comment:g,isFolded:f,isEdit:h,toggleEdit:this.toggleEditing,getValue:this.getCommentMessage,setEditableSpanComponent:this.setEditableSpanComponent,onValueChange:this.doUpdateComment}),!this.state.isEdit&&X.a.createElement("div",{className:"".concat(kn("container-bottom"))},g&&X.a.createElement("div",{className:rn.a.time},Wt.a.L10N.parseTimeAgo(1e3*g.updated_at)),C&&X.a.createElement("div",{className:kn("reply-sort"),onClick:this.toggleReply},X.a.createElement(tn.b,{type:"dora",name:"reply",className:kn("btn-reply")}),d?Wt.a.I18N.preview.comment.cancel_reply:Wt.a.I18N.preview.comment.comment_create)))),X.a.createElement(fn,{isReply:d,doReply:this.doReply,onValueChange:this.doCreateComment,setReplyTextareaRef:this.setReplyTextareaRef}),w?X.a.createElement(xn,Q()({doCreateComment:this.doCreateComment,replyList:b.slice(0,2)},this.props)):X.a.createElement(xn,Q()({doCreateComment:this.doCreateComment,replyList:b},this.props)),p&&X.a.createElement(xn,Q()({doCreateComment:this.doCreateComment,replyList:b.slice(2)},this.props)),w&&X.a.createElement("div",{className:rn.a.expand,onClick:this.handleRenderMoreComments},p?I18N.preview.comment.fold:I18N.preview.comment.unfold))}}]),I()(t,e),t}(V.PureComponent);W()(Mn,"propTypes",{focusCid:H.a.oneOfType([H.a.string,H.a.object]),selectCid:H.a.oneOfType([H.a.string,H.a.object]),permission:H.a.object,fromComment:H.a.bool,commentList:H.a.array,commentMarkerIndex:H.a.number,commentThreadCid:H.a.string,commentOperations:H.a.object,userId:H.a.number,scrollRef:H.a.object,commentThreadList:H.a.array,currentState:H.a.object});var Tn=on.a.bind(rn.a),Nn=function(e){function t(e){var n;O()(this,t),n=A()(this,B()(t).call(this,e)),W()(W()(W()(W()(W()(W()(F()(F()(n)),"autoTextareaFocus",function(){return setTimeout(function(){return n.replyTextareaRef&&n.replyTextareaRef.focus()},200)}),"checkIsNewCreateComment",function(){var e=n.props;return!e.commentListMap[e.commentContainer.select]}),"doReply",function(e){n.replyTextareaRef&&n.replyTextareaRef.onEditFinish(e),n.scrollRef&&Rn(n.scrollRef)}),"doCreateCommentThread",function(e){e&&(n.props.dispatch({type:"entry:comment-threads:add",payload:{top:0,left:0,message:e,cancelSelect:!0}}),Rn(n.scrollRef))}),"doCreateComment",function(e){n.commentOperations.doCreateComment(e),Rn(n.scrollRef)}),"renderContentReply",function(e){if(!Ot().allowComment)return null;var t=n.checkIsNewCreateComment(),r=n.props,a=r.userId,o=r.currentState,i=n.state,c=i.backgroundColor,s=i.disabled,l=gn(a,o);return X.a.createElement("div",{className:Tn("content-reply")},l===vn&&X.a.createElement(Qt,{ref:n.setReplyTextareaRef,onValueChange:e&&t?n.doCreateComment:n.doCreateCommentThread,placeholder:Wt.a.I18N.preview.comment.comment_placeholder,handleActive:n.handleActive,minHeight:20,isMultiLine:!0,isAutoHeight:!0}),l===vn&&X.a.createElement(qt.Button,{onClick:n.doReply,style:{backgroundColor:c,cursor:s?"not-allowed":"pointer"},disabled:s},Wt.a.I18N.preview.comment.thread_create),"not_signin"===l&&X.a.createElement(qt.Button,{className:rn.a.login,onClick:On},Wt.a.I18N.preview.comment.tip_signin),"not_collaborator"===l&&X.a.createElement("span",null,Wt.a.I18N.preview.comment.tip_not_collaborator))});var r=n.props,a=r.currentState.screenCid;return(0,r.dispatch)({type:"unread-comment:set-read",payload:{screenCid:a}}),n.commentOperations={cancelSelect:function(){n.props.dispatch({type:"container:comment:select",payload:{select:null}})},getPermission:function(e){var t=n.commentOperations.getCollaborator(e);return jt(n.props.currentState.userRole,n.props.userId,e,n.props.currentState.teamCid,t)},getCollaborator:function(e){var t=n.props,r=t.collaboratorsState,a=t.currentState,o=a.projectCid,i=a.teamCid;return Ln(r,o,i)[e]||{name:jn,avatar:In}},setFocusCommentThreadCid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return n.props.dispatch({type:"container:comment:focus",payload:{focus:e,from:"comment"}})},toggleSelectCommentThread:function(e){(0,n.props.dispatch)({type:"container:comment:select",payload:{select:e||null}})},doDeleteCommentThread:function(e){n.props.dispatch({type:"entry:comment-threads:delete",payload:{cid:e}})},doDeleteComment:function(e){return n.props.dispatch({type:"comments:delete",payload:e})},doUpdateComment:function(e){return n.props.dispatch({type:"entry:comments:update",payload:e})},doCreateComment:function(e,t){var r=n.props,a=r.selectCommentThread,o=r.dispatch,i=t||a.cid;e&&i&&o({type:"entry:comments:add",payload:{thread_cid:i,message:e}})},renderEmptyCommentList:function(){return X.a.createElement(un,{hasUser:"not_signin"===gn(n.props.userId,n.props.currentState),hasSelectCommentThread:Boolean(n.props.selectCommentThread)})}},n.setReplyTextareaRef=function(e){n.replyTextareaRef=e},n.setScrollRef=function(e){return n.scrollRef=e},n.replyTextareaRef=null,n.scrollRef=null,n.state={backgroundColor:dn,disabled:!0},n.handleActive=function(e){n.state.disabled===e&&n.setState({backgroundColor:e?pn:dn,disabled:!e})},n}return L()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.unreadCommentState.unreadCountScreenMap,n=e.currentState.screenCid,r=e.dispatch;t[n]&&r({type:"unread-comment:set-read",payload:{screenCid:n}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.commentThreadList,r=t.commentListMap,a=t.currentScreenName,o=t.commentContainer,i=o.focus,c=o.select,s=o.from,l=t.selectCommentThread,u=t.unreadCommentState.unreadCountThreadMap,d=this.props,p=d.userId,f=d.currentState,h=n.length;return X.a.createElement("div",{className:Tn("comment-panel")},h?[X.a.createElement("div",{key:"title",className:Tn("comment-title")},"".concat(a," (").concat(h,") ")),X.a.createElement("div",{key:"comment",ref:this.setScrollRef,className:Tn("comment-thread"),id:"comment-thread"},n.map(function(t,n){var a=t.cid,o=t.user_id,l=r[a]||[],d=u[a]||0,h=e.commentOperations.getPermission(o),m=n+1,v="comment"===s;return X.a.createElement(Mn,{key:a,commentThreadCid:a,commentMarkerIndex:m,focusCid:i,selectCid:c,fromComment:v,unreadCount:d,commentOperations:e.commentOperations,userId:p,permission:h,currentState:f,commentList:l,scrollRef:e.scrollRef})}))]:this.commentOperations.renderEmptyCommentList(),this.renderContentReply(l))}}]),I()(t,e),t}(V.PureComponent);W()(Nn,"propTypes",{commentContainer:H.a.object,currentState:H.a.object,collaboratorsState:H.a.array,unreadCommentState:H.a.object,commentThreadList:H.a.array,selectCommentThread:H.a.object,commentListMap:H.a.object,currentScreenName:H.a.string,userId:H.a.number,dispatch:H.a.func});var On=function(){window.location.href="/signin?next=".concat(window.location.pathname)},jn="用户已退出协作",In="/images/avatar.png",Rn=function(e){return e&&setTimeout(function(){return e.scrollTop=e.scrollHeight-e.offsetHeight},0)},Ln=Object(ne.h)(function(e,t,n){return e.reduce(function(e,r){return r.project_cid!==t&&r.team_cid!==n||(e[r.user_id]=r),e},{})}),Dn=Object(T.connect)(function(e){var t=e.model,n=t.commentThreads,r=t.screens,a=t.comments,o=t.user,i=t.current,c=t.collaborators,s=t.unreadComment,l=e.container;return{commentContainer:l.comment,currentState:i,collaboratorsState:c,unreadCommentState:s,commentThreadList:An(n,i.screenCid),selectCommentThread:Pn(n,i.screenCid,l.comment.select),commentListMap:Bn(a),currentScreenName:Un(r,i.screenCid),userId:o.id}})(Nn),An=Object(ne.h)(function(e,t){return e.filter(function(e){return e.screen_cid===t})}),Pn=Object(ne.h)(function(e,t,n){return n&&e.find(function(e){return e.cid===n&&e.screen_cid===t})||null}),Bn=Object(ne.h)(function(e){return e.reduce(function(e,t){return void 0===e[t.thread_cid]?e[t.thread_cid]=[t]:e[t.thread_cid].push(t),e},{})}),Un=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid==t}).name}),Fn=Object(T.connect)(function(e){var t=e.model,n=t.current,r=t.user,a=t.commentThreads,o=e.container;return{queryCurrentScreenContainerElement:zn(n.screenCid),scale:o.common.scale/100,isActive:"comment"==o.previewSetting.toolbarActiveItem,commentContainer:o.comment,commentThreadList:An(a,n.screenCid),currentUserRole:n.userRole,userId:r.id}})(Ut),zn=Object(ne.h)(function(e){return function(){return document.querySelector("#pscreen".concat(e," .scontainer"))}}),Wn={open:!1,event:{}},qn=n("6ZRU"),Hn={isSpaceDown:!1},Vn={offset:{x:0,y:0},scale:100,keyFlags:Hn,viewport:{width:0,height:0}};var Xn={alert:qn.a.reducers,common:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"preview:set:canvas:offset":return a()({},e,{offset:r.offset});case"preview:set:scale":return a()({},e,{scale:r.scale});case"preview:set:key:flags":return a()({},e,{keyFlags:a()({},Hn,r)});case"preview:reset:key:flags":return a()({},e,{keyFlags:Hn});case"preview:scrollbar:viewport":return a()({},e,{viewport:r});default:return e}},comment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"container:comment:focus":return a()({},e,{focus:r.focus,from:r.from});case"container:comment:select":return a()({},e,{focus:r.select&&e.focus,select:r.select,from:r.from})}return e},layers:bt,slices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"reducer:slice:success":return a()({},e,r,{loading:!1});case"reducer:slice:fail":return a()({},e,r,{error:!0});default:return e}},screens:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"reducer:preview-panel:search":return a()({},e,r);case"reducer:preview-panel:reset":return Et;default:return e}},artboards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"reducer:artboards:success":return a()({},e,r);case"reducer:artboards:fail":return a()({},e,r,{error:!0});default:return e}},previewSetting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"reducer:preview-toolbar:sub-bar:active":case"reducer:preview-toolbar:update":return a()({},e,r);case"reducer:preview-toolbar:active-item:init":return a()({},e,{toolbarActiveItem:St.c});default:return e}},eventSignUpModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"event-sign-up:close:modal":return a()({open:!1},e);case"event-sign-up:set:event":return t.payload;default:return e}}},Zn=n("eTac"),Gn=n.n(Zn),Kn={info:{name:"lisankebook",desc:"李三科送给你的专属福利，现在注册墨刀即可享受一个月个人版会员",successTip:"注册成功，恭喜你获得墨刀一个月个人版会员"},checker:function(){return function(){var e=location.search;0===e.indexOf("?")&&(e=e.substr(1));var t={};return e.split("&").forEach(function(e){var n=e.split("="),r=te()(n,2),a=r[0],o=r[1];a&&(t[a]=!o||decodeURIComponent(o))}),t}().utm_source===Kn.info.name}},Yn=[Kn];var Jn=n("bNtH"),Qn=n("4dyd"),$n=n("/OM1"),er=n.n($n),tr=function(e){function t(){var e,n,r;O()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return A()(r,(n=r=A()(this,(e=B()(t)).call.apply(e,[this].concat(o))),W()(W()(F()(F()(r)),"handleResize",function(){return r.props.dispatch({type:"entry:update:scrollbar:viewport"})}),"handleScroll",function(e){return r.props.dispatch({type:"entry:preview:set:canvas:offset",payload:{offset:e}})}),n))}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.canvasOffset,n=e.screen,r=e.scale,a=e.viewport,o=a.width,i=a.height,c={x:Math.max(3.5*o,n.width*r/100*2),y:Math.max(3.5*i,n.height*r/100*2)};return X.a.createElement("div",{className:er.a.scroll_bar_container,id:"preview_scrollBar_viewport"},X.a.createElement(Jn.a,{canvasOffset:t,viewportWidth:o,viewportHeight:i,canvasRange:c,onScroll:this.handleScroll}),X.a.createElement(Qn.a,{onResize:this.handleResize}))}}]),I()(t,e),t}(V.PureComponent);W()(tr,"propTypes",{canvasOffset:H.a.object,dispatch:H.a.func,scale:H.a.number,screen:H.a.object,viewport:H.a.object});var nr=Object(T.connect)(function(e){var t=e.container.common,n=t.offset,r=t.scale,a=t.viewport,o=e.model,i=o.current.screenCid;return{canvasOffset:n,scale:r,screen:o.screens.find(function(e){return e.cid===i}),viewport:a}})(tr),rr=n("foKU"),ar=n("An9T"),or=n.n(ar),ir=function(e){function t(){return O()(this,t),A()(this,B()(t).apply(this,arguments))}return L()(t,[{key:"render",value:function(){var e=this.props,t=(e.project,e.shellType),n=function(e,t,n){switch(e){case"device":var r=MB.currentProject,a=r.deviceShell()||r.defaultShell();if(!a.bg)return null;var o=n?"".concat(a.bg,"_land"):a.bg,i=n?[-a.left,-a.top,a.height,a.width]:[-a.top,-a.left,a.width,a.height],c=te()(i,4),s=c[0],l=c[1],u=c[2],d=c[3],p=MB.isOffline();return{top:s,left:l,width:u,height:d,backgroundImage:"url(".concat(p?".":"","/images/devices/").concat(o,".png)")};case"default":case"none":return null}}(t,0,e.isLandscape),r="device"===t&&null===n?"none":t;return X.a.createElement("div",{className:"".concat(or.a.shell," ").concat(r),style:n})}}]),I()(t,e),t}(V.PureComponent);ir.propTypes={project:H.a.object,shellType:H.a.string,isLandscape:H.a.bool};var cr=function(e){function t(){return O()(this,t),A()(this,B()(t).apply(this,arguments))}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.project,n=e.screen,r=e.isLite,a=e.isImmersive,o=e.viewportWidth,i=e.viewportHeight,c=t.splash,s=void 0===c?"":c,l=function(e,t,n,r,a){var o;if(r){var i,c=Math.min(n.width,n.height),s=Math.max(n.width,n.height),l=Math.min(t.width,t.height),u=Math.max(t.width,t.height),d=e.width!==l,p=d!==n.width>n.height;d?(i=s/u,o={width:u,height:Math.min(l,c/i),transform:"".concat(p?"translate(-100%) rotate(-90deg)":""," scale(").concat(i,")"),transformOrigin:p?"top right":"top left"}):(i=c/l,o={width:l,height:Math.min(u,s/i),transform:"".concat(p?"translate(-100%) rotate(-90deg)":""," scale(").concat(i,")"),transformOrigin:p?"top right":"top left"})}else if(a)o={width:e.width,height:e.height};else{var f="landscape"===e.orientation,h=t.width,m=t.height,v=f?[m,h]:[h,m],g=te()(v,2);o={width:g[0],height:g[1]}}return o}(n,t,{width:o,height:i},r,a),u="".concat(n.orientation," ").concat(t.device," ").concat(t.model);return X.a.createElement("div",{id:"simulator",className:u,style:l},X.a.createElement("div",{id:"app"}),X.a.createElement("div",{className:"splash"},s&&X.a.createElement("img",{src:s}),X.a.createElement("div",{className:"loading"},X.a.createElement("div",{className:"spinner"}))))}}]),I()(t,e),t}(V.PureComponent);cr.propTypes={screen:H.a.object,project:H.a.object,isLite:H.a.bool,isImmersive:H.a.bool,viewportWidth:H.a.number,viewportHeight:H.a.number,dispatch:H.a.func};var sr=Object(T.connect)(function(e){var t=e.model,n=t.current,r=t.projects,a=t.screens,o=e.container.previewSetting.toolbarActiveItem,i=lr(r,n.projectCid),c=ur(a,n.screenCid),s=o==St.b,l=o==St.a,u=MB.isFullScreen(),d=s||l||"none"===i._shell_type||u,p=MB.isMobile(),f=MB.isEmbedded(),h=p||f&&!u,m=f&&"landscape"===Project.find(i.cid).homeScreen().orientation?[i.height,i.width]:[i.width,i.height],v=f?m:[window.innerWidth,window.innerHeight],g=te()(v,2);return{screen:c,project:i,isLite:h,isImmersive:d,viewportWidth:g[0],viewportHeight:g[1]}})(cr),lr=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),ur=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),dr=(n("v8PR"),10),pr="hidden",fr="visible",hr="lightgray",mr="black",vr="#fff",gr=function(e){function t(e){var n;O()(this,t),n=A()(this,B()(t).call(this,e)),W()(W()(W()(W()(W()(W()(W()(W()(W()(W()(W()(W()(F()(F()(n)),"cancelColorPicker",function(e){n.imageCanvas.contains(e.target)||n.cancelPickerMode()}),"cancelPickerMode",function(){return n.props.dispatch({type:"reducer:preview-toolbar:update",payload:{isShowColorPicker:!1}})}),"renderImageCanvas",function(){var e=n.imageCanvas.getBoundingClientRect(),t=e.width,r=e.height;n.lastCanvasRect={width:t,height:r},n.imageCanvas.width=t,n.imageCanvas.height=r,n.imageCtx.drawImage(n.image,0,0,t,r)}),"calculateCenterPoint",function(e){var t=n.image.getBoundingClientRect(),r=t.left,a=t.top;n.centerPoint={centerX:Math.floor(e.clientX-r),centerY:Math.floor(e.clientY-a)}}),"handleMove",function(e){n.image.complete&&n.state.visibility===pr&&n.setState({visibility:fr}),n.calculateCenterPoint(e);var t=n.props,r=t.glassHeight,a=t.glassWidth,o=t.scale,i=n.centerPoint,c=i.centerX,s=i.centerY,l=Math.floor(c-a/2),u=Math.floor(s-r/2);n.setState({glassLeft:l,glassTop:u}),s<0&&n.clearGlassRect(),n.glassCtx.clearRect(0,0,a,r),o<1&&console.warn("Can't make the galss scale less than 1, It will make bed invision"),Er(n.glassCtx,!1),n.glassCtx.drawImage(n.imageCanvas,Math.floor(c-a/2/n.finallyScale),Math.floor(s-r/2/n.finallyScale),Math.floor(a/n.finallyScale),Math.floor(r/n.finallyScale),-dr/2,-dr/2,a,r),wr(n.glassCtx,hr,dr,dr),Sr(n.glassCtx),Cr(n.glassCtx,mr,Math.floor((a-dr)/2),Math.floor((r-dr)/2),dr,dr),n.getColor()}),"getColor",function(){var e=n.centerPoint,t=e.centerX,r=e.centerY,a=n.imageCtx.getImageData(t,r,1,1).data,o=yr(a),i=o.rgba,c=o.R,s=o.G,l=o.B;n.setState({color:i,R:c,G:s,B:l}),n.color=i}),"handleClick",function(){n.getColor();var e=n.color,t=Object(ne.m)(e),r=t.history,a=t.focusColor;clearTimeout(n.timeoutToken),n.props.dispatch({type:"reducer:preview-toolbar:update",payload:{userPickColor:r,focusColor:a}}),n.timeoutToken=setTimeout(function(){n.props.dispatch({type:"reducer:preview-toolbar:update",payload:{userPickColor:r,focusColor:null}})},1e3)}),"clearGlassRect",function(){var e=n.props,t=e.glassHeight,r=e.glassWidth;n.glassCtx.clearRect(0,0,r,t),n.setState({visibility:pr})}),"handleMouseLeave",function(){n.clearGlassRect()}),"handleKeyDown",function(e){"escape"===e.key.toLowerCase()&&(n.clearGlassRect(),n.cancelPickerMode())}),"handleLoad",function(){n.renderImageCanvas()}),"handleError",function(){n.cancelPickerMode()});var r=n.props.scale;return n.iamgeContainerRef=function(e){return n.image=e},n.getImageCanvasRef=function(e){return n.imageCanvas=e},n.glassCanvasRef=function(e){return n.glassCanvas=e},n.finallyScale=dr*(r<1?1:r),n.state={visibility:pr,glassLeft:0,glassTop:0,color:vr,R:0,G:0,B:0},n}return L()(t,[{key:"componentDidMount",value:function(){xr&&(this.image.crossOrigin="Anonymous"),this.imageCtx=this.imageCanvas.getContext("2d"),this.glassCtx=this.glassCanvas.getContext("2d")}},{key:"componentDidCatch",value:function(e){console.log(e),this.cancelPickerMode()}},{key:"componentDidUpdate",value:function(){if(this.imageCanvas){var e=this.imageCanvas.getBoundingClientRect(),t=e.width,n=e.height,r=this.lastCanvasRect||{width:0,height:0},a=r.width,o=r.height;a==t&&o==n||(this.clearGlassRect(),this.renderImageCanvas())}else this.handleError()}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.glassWidth,a=e.glassHeight,o=e.src,i=this.state,c=i.visibility,s=i.glassLeft,l=i.glassTop,u=i.color,d=i.R,p=i.G,f=i.B;return X.a.createElement("div",{className:"mb-picker-container"},X.a.createElement("img",{ref:this.iamgeContainerRef,className:"mb-picker-image",width:t,height:n,src:o,onLoad:this.handleLoad,onError:this.handleError}),X.a.createElement("canvas",{ref:this.getImageCanvasRef,onMouseMove:this.handleMove,onMouseLeave:this.handleMouseLeave,onClick:this.handleClick,style:{width:t,height:n,opacity:0}}),X.a.createElement("div",{className:"mb-glass",style:{width:r,height:a,visibility:c,left:s,top:l}},X.a.createElement("div",{className:"shadow"}),X.a.createElement("canvas",{ref:this.glassCanvasRef,width:r,height:a,style:{width:r,height:a}}),X.a.createElement("div",{style:{top:a/2+15},className:"mb-glass-text"},X.a.createElement("div",{className:"mb-rgba-color"},"R:".concat(d," G:").concat(p," B:").concat(f," ").concat(String(br(u).hex).toUpperCase())))),X.a.createElement(G.a,{onKeyDown:this.handleKeyDown,onClick:this.cancelColorPicker}))}}]),I()(t,e),t}(V.PureComponent);W()(W()(gr,"propTypes",{src:H.a.string,width:H.a.oneOfType([H.a.string,H.a.number]),height:H.a.oneOfType([H.a.string,H.a.number]),glassHeight:H.a.number,glassWidth:H.a.number,scale:H.a.number,dispatch:H.a.func}),"defaultProps",{src:"/sec3.png",width:1300,height:769,glassWidth:200,glassHeight:200,scale:1,pickColor:function(e){return console.log(e)}});var yr=function(e){return e[3]=parseFloat(e[3]/255),{rgba:"rgba(".concat(e.join(", "),")"),R:e[0],G:e[1],B:e[2]}},br=function(e){var t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d)?)[\s+]?/i);return t&&t.length>=4?{hex:"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2),o:+t[4]}:e},wr=function(e,t,n,r){e.strokeStyle=t,e.lineWidth=.5;for(var a=n+5.5;a<e.canvas.width-n;a+=n)e.beginPath(),e.moveTo(a,0),e.lineTo(a,e.canvas.height),e.stroke();for(var o=r+5.5;o<e.canvas.height-n;o+=r)e.beginPath(),e.moveTo(0,o),e.lineTo(e.canvas.width,o),e.stroke()},Er=function(e,t){e.mozImageSmoothingEnabled=t,e.webkitImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t,e.imageSmoothingEnabled=t},Sr=function(e){e.beginPath(),e.strokeStyle="#8D9EA7",e.lineWidth=8,e.arc(100,100,96,0,2*Math.PI),e.stroke(),e.strokeStyle="#D4D7DC",e.lineWidth=5,e.arc(100,100,96,0,2*Math.PI),e.stroke()},Cr=function(e,t,n,r,a,o){e.beginPath(),n+=.5,r+=.5,e.strokeStyle=t,e.lineWidth=1,e.moveTo(n,r),e.lineTo(n+a,r),e.lineTo(n+a,r+o),e.lineTo(n,r+o),e.lineTo(n,r),e.stroke(),e.beginPath(),e.lineWidth=1,e.strokeStyle="white",e.moveTo(n-1,r-1),e.lineTo(n+a+1,r-1),e.lineTo(n+a+1,r+1+o),e.lineTo(n-1,r+o+1),e.lineTo(n-1,r-1),e.stroke()},xr=!1,_r=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),kr=Object(T.connect)(function(e){var t=e.model,n=t.current,r=t.projects,a=_r(r,n.projectCid),o=Mr(a.access_token,n.screenCid);return{scale:1,width:"100%",height:"100%",src:"".concat(o,"&").concat(Date.now())}})(gr),Mr=function(e,t){return"/snapshot.png?access-token=".concat(e,"&screen-cid=").concat(t,"&mode=zoom-1.00")},Tr=n("uavl"),Nr=n("JTWS"),Or=(n("dAiO"),function(e){function t(){return O()(this,t),A()(this,B()(t).apply(this,arguments))}return L()(t,[{key:"render",value:function(){var e=this.props.screen,t=e.cid,n=e.state_cid,r=Widget.select(function(e){return"sticky"===e.name&&e.screen_cid===t}).map(function(e){var t=e.dup();return t.setState(n),t});return X.a.createElement("div",{id:"sticky-container",onClick:this.handleClick},X.a.createElement("div",{id:"stickies"},r.map(function(e){return X.a.createElement(jr,{key:e.cid,sticky:e})})))}}]),I()(t,e),t}(V.PureComponent));Or.propTypes={screen:H.a.object};var jr=function(e){function t(){var e,n,r;O()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return A()(r,(n=r=A()(this,(e=B()(t)).call.apply(e,[this].concat(o))),W()(F()(F()(r)),"handleClick",function(e){var t=r.props.sticky;Link.find(t.link_cids)&&MB.runner.pj(e,"tap")}),n))}return L()(t,[{key:"render",value:function(){var e=this.props.sticky,t=Object(Nr.a)(e,"p"),n=Object(Nr.b)(e,"p"),r=Link.find(e.link_cids)?e.link_cids:"";return X.a.createElement("div",{key:e.cid,"data-cid":e.cid,"data-link_cid":r,id:"widget".concat(e.cid,"p"),className:t,style:n,onClick:this.handleClick},Object(Tr.a)(e))}}]),I()(t,e),t}(V.PureComponent);jr.propTypes={sticky:H.a.object};var Ir=n("upRB"),Rr=Object(T.connect)(function(e){return{screen:Object(Ir.c)(e)}})(Or),Lr=(n("fSKh"),function(e){function t(e){var n;return O()(this,t),n=A()(this,B()(t).call(this,e)),W()(W()(W()(W()(W()(W()(W()(F()(F()(n)),"getContentElementRef",function(){return document.querySelector("#simulator-container")}),"handleKeyDown",function(e){var t=e.target.matches("input")||e.target.matches("textarea");32===e.keyCode&&!t&&(e.preventDefault(),n.props.dispatch({type:"preview:set:key:flags",payload:{isSpaceDown:!0}}))}),"handleKeyUp",function(e){n.props.dispatch({type:"preview:reset:key:flags"})}),"handleMouseDown",function(e){n.props.isSpaceDown&&n.handleDrag(e)}),"handleDrag",function(e){var t=e.clientX,r=e.clientY,a=n.props.canvasOffset,o=a.x,i=a.y,c=function(e){var a={x:o+(e.clientX-t),y:i+(e.clientY-r)};n.props.dispatch({type:"entry:preview:set:canvas:offset",payload:{offset:a}})};document.addEventListener("mousemove",c),document.addEventListener("mouseup",function e(t){document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e)})}),"handleScaleChange",function(e){n.props.dispatch({type:"entry:preview:set:scale",payload:{scale:e}})}),"handleOffsetChange",function(e,t){n.props.dispatch({type:"entry:preview:set:canvas:offset",payload:{offset:{x:e,y:t}}})}),n}return L()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.scale,r=t.canvasOffset,a=t.project,o=t.screen,i=t.isSpaceDown,c=t.isLayerActive,s=t.isCommentActive,l=t.isColorPickerActive,u=r.x,d=r.y,p="landscape"===o.orientation,f=c||s,h=f?"none":a._shell_type,m=a.width,v=a.height,g=p?[v,m]:[m,v],y=te()(g,2),b=y[0],w=y[1],E={width:b,height:w,minWidth:b,minHeight:w,transform:"matrix(1, 0, 0, 1, ".concat(u,", ").concat(d,")")},S={transform:"scale(".concat(n/100,")")},C={width:"".concat(n,"%"),height:"".concat(n,"%")},x={width:o.width*n/100,height:o.height*n/100},_=Y()({"wait-drag":i,"is-immersive":f,"is-layer-active":c,"is-screen-expanded":f||"none"===a._shell_type});return X.a.createElement(rr.a,{x:u,y:d,scale:n,id:"simulator-container",className:_,onMouseDown:this.handleMouseDown,onScaleChange:this.handleScaleChange,onOffsetChange:this.handleOffsetChange},function(t,n,r){return X.a.createElement("div",{key:"1",className:Y()("screen-viewport",{"is-geely":"geely_center_control"===a.model}),style:E},X.a.createElement("div",{className:"zoom-area",style:S},X.a.createElement(sr,null),!f&&X.a.createElement(ir,{project:a,shellType:h,isLandscape:p}),X.a.createElement(Rr,null)),X.a.createElement("div",{className:"no-zoom-area-wrapper",style:C},X.a.createElement("div",{className:"no-zoom-area",style:x},X.a.createElement("div",{id:"ui-layers",className:"ui-layers ".concat(c?"is-active":"")},l&&X.a.createElement(kr,null),c&&!l&&X.a.createElement(wt,null)),X.a.createElement("div",{id:"ui-comment-marker-panel"},X.a.createElement(Fn,{getContentElement:e.getContentElementRef})))))},X.a.createElement(G.a,{onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp}))}}]),I()(t,e),t}(V.PureComponent));Lr.propTypes={scale:H.a.number,canvasOffset:H.a.object,screen:H.a.object,project:H.a.object,isSpaceDown:H.a.bool,isLayerActive:H.a.bool,isCommentActive:H.a.bool,isColorPickerActive:H.a.bool,dispatch:H.a.func};var Dr=Object(T.connect)(function(e){var t=e.model,n=t.current,r=t.projects,a=t.screens,o=e.container,i=o.common,c=i.scale,s=i.offset,l=i.keyFlags.isSpaceDown,u=o.previewSetting,d=u.toolbarActiveItem,p=u.isShowColorPicker,f=Ar(r,n.projectCid),h=n.screenCid;return{scale:c,canvasOffset:s,screen:Pr(a,h),project:f,isSpaceDown:l,isLayerActive:"inspect"==d,isCommentActive:"comment"==d,isColorPickerActive:p}})(Lr),Ar=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),Pr=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),Br=n("QILm"),Ur=n.n(Br),Fr=(n("WcC0"),function(e){function t(){return O()(this,t),A()(this,B()(t).apply(this,arguments))}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.menuClassName,r=Ur()(e,["className","menuClassName"]);return X.a.createElement(qt.Select,Q()({className:Object(qt.trimList)(["ToolbarSelect",t]),menuClassName:Object(qt.trimList)(["ToolbarSelectMenu",n])},r,{placeholder:" ",unstyled:!0,size:"small",menuX:"center"}))}}]),I()(t,e),t}(V.PureComponent));W()(Fr,"propTypes",{className:H.a.string,menuClassName:H.a.string});var zr=n("a1Ia"),Wr=n.n(zr),qr=on.a.bind(Wr.a),Hr=function(e){function t(e){var n;return O()(this,t),n=A()(this,B()(t).call(this,e)),W()(W()(W()(W()(W()(W()(W()(W()(F()(F()(n)),"updateSubToolbar",function(e){n.props.dispatch({type:"reducer:preview-toolbar:update",payload:a()({},e)})}),"pickColor",function(e){e.nativeEvent.stopImmediatePropagation(),MB.event("在标注模式中使用了自定义取色","运行页"),n.updateSubToolbar({isShowColorPicker:!0,showLayerList:!1,isSelectLayer:!1})}),"updateDeviceUnit",function(e){var t=n.props.emPixel,r=$r(e,t);n.updateSubToolbar(r?{unit:e,ratio:r}:{unit:e}),MB.event("在".concat(e,"下切换倍率为").concat(r),"运行页")}),"updateLanguage",function(e){MB.event("代码切换".concat(e),"运行页"),n.updateSubToolbar({language:e})}),"updateColorUnit",function(e){n.updateSubToolbar({colorUnit:e})}),"updateEmPixel",function(e){var t=Number(e);n.updateSubToolbar({emPixel:t,ratio:t}),n.setState({customEmPixel:""});var r=n.props.unit;MB.event("在".concat(r,"下切换倍率为").concat(t),"运行页")}),"onTypingEmPixel",function(e){if(e){n.setState({customEmPixel:e}),n.updateSubToolbar({emPixel:e,ratio:e});var t=n.props.unit;MB.event("在".concat(t,"在设置自定义倍率").concat(e),"运行页")}}),"handleMobileChange",function(e){var t=n.props.unit;n.updateSubToolbar({ratio:Number(e)}),MB.event("在".concat(t,"下切换倍率为").concat(e),"运行页")}),n.state={showLogin:!1,customEmPixel:""},n}return L()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.unit;this.props.unit!==t&&t===Vr&&this.updateSubToolbar({ratio:1})}},{key:"render",value:function(){var e=this.props,t=e.unit,n=e.emPixel,r=e.ratio,a=e.language,o=e.isShowColorPicker,i=e.colorUnit,c=e.isLogin,s=this.state.customEmPixel,l=t===Zr||t===Xr,u=t===Vr,d=t===Zr?Qr:Jr,p=[{value:10,label:"10px"},{value:12,label:"12px"},{value:14,label:"14px"},{value:16,label:"16px"},{value:n,label:"".concat(n,"px")},X.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},X.a.createElement(qt.InputNumber,{size:"small",min:1,max:99,precision:0,value:s,placeholder:I18N.custom,onChange:this.onTypingEmPixel}))];return X.a.createElement("div",{className:qr("sub-toolbar","preview-sub-toolbar")},X.a.createElement("div",{className:"mode"},X.a.createElement(tn.b,{name:"cursor",type:"dora",className:Object(qt.trimList)(["cursor",!o&&"is-active"])}),X.a.createElement(qt.Tooltip,{arrowed:!0,position:"bottom",duration:1500,className:Object(qt.trimList)(["picker",o&&"is-active"]),tipClassName:"marign-top-20",content:{click:c?null:I18N.preview.guide_login,hover:I18N.preview.color_picker}},X.a.createElement(tn.b,{name:"tube",type:"dora",onClick:this.pickColor}))),X.a.createElement("div",{className:"param"},X.a.createElement(Fr,{className:"color-unit",menuClassName:"PreviewSubToolbarSelectMenu",value:i,optionList:Yr,onChange:this.updateColorUnit}),X.a.createElement(Fr,{menuClassName:"PreviewSubToolbarSelectMenu",placeholder:" ",optionList:Kr,value:a,onChange:this.updateLanguage}),X.a.createElement(Fr,{className:"device-unit",menuClassName:"PreviewSubToolbarSelectMenu",optionList:Gr,value:t,onChange:this.updateDeviceUnit}),l?X.a.createElement(Fr,{menuClassName:"PreviewSubToolbarSelectMenu",optionList:d,value:r,onChange:this.handleMobileChange}):u?X.a.createElement("span",{className:"px-ratio"},"@1x"):X.a.createElement(Fr,{className:"em-pixel",menuClassName:"PreviewSubToolbarSelectMenu scale-select-menu",optionList:p,value:n,onChange:this.updateEmPixel})))}}]),I()(t,e),t}(V.PureComponent);W()(Hr,"propTypes",{unit:H.a.string,language:H.a.string,ratio:H.a.number,colorUnit:H.a.string,isShowColorPicker:H.a.bool,emPixel:H.a.number,isLogin:H.a.bool,dispatch:H.a.func});var Vr="px",Xr="pt",Zr="dp",Gr=[Vr,"em","rem",Zr,Xr],Kr=[{value:"swift",label:"Swift"},{value:"android",label:"Android"},{value:"css",label:"CSS"},{value:"less",label:"Less"},{value:"sass",label:"Sass"},{value:"stylus",label:"Stylus"}],Yr=[{value:"hex",label:"Hex"},{value:"rgb",label:"RGB"},{value:"rgba",label:"RGBA"},{value:"argb",label:"ARGB"}],Jr=[1,2,3].map(function(e){return{value:e,label:"@".concat(e,"x")}}),Qr=[.75,1,1.5,2,3,4].map(function(e){return{value:e,label:"@".concat(e,"x")}}),$r=function(e,t){return"em"===e||"rem"===e?t:1},ea=Object(T.connect)(function(e){var t=e.model.user,n=e.container.previewSetting;return{isLogin:Boolean(t.id),unit:n.unit,emPixel:n.emPixel,ratio:n.ratio,language:n.language,isShowColorPicker:n.isShowColorPicker,colorUnit:n.colorUnit}})(Hr),ta=n("DqDi"),na=n("Lyer"),ra=n("EDI8"),aa=n.n(ra),oa=on.a.bind(aa.a),ia=MB.config.SCALES,ca=function(e){function t(){var e;return O()(this,t),e=A()(this,B()(t).call(this)),W()(W()(W()(W()(F()(F()(e)),"handleZoomIn",function(){var t=e.props,n=t.scale,r=t.dispatch,a=ia.findIndex(function(e){return e>n});r({type:"entry:preview:set:scale",payload:{scale:ia[a]||ia[ia.length-1]}})}),"handleZoomOut",function(){var t=e.props,n=t.scale,r=t.dispatch,a=ia.findIndex(function(e){return e>=n});r({type:"entry:preview:set:scale",payload:{scale:ia[a-1]||ia[0]}})}),"handleResetScale",function(){(0,e.props.dispatch)({type:"entry:preview:set:scale",payload:{scale:100}})}),"handleKeyDown",function(t){sa(t,e.handleZoomIn,e.handleZoomOut,e.handleResetScale)}),e.state={isGuideShow:!1},e}return L()(t,[{key:"componentDidMount",value:function(){var e=this;this.openGuideTimer=setTimeout(function(){e.setState({isGuideShow:!0})},600)}},{key:"componentWillUnmout",value:function(){clearTimeout(this.openGuideTimer)}},{key:"render",value:function(){var e=this.props,t=e.scale,n=e.project,r=this.state.isGuideShow,a=t<400,o=t>20;return X.a.createElement(na.a,{id:"preview-zoom",localeKey:"zoom",X:"left",isOpen:r,gotItBtn:!0,noCloseBtn:!0},X.a.createElement("div",{className:oa("zoom-count","preview-zoom-btn",{template:n.template})},X.a.createElement("a",{id:"zoomout",disabled:!o,title:I18N.zoomout,onClick:this.handleZoomOut,className:"fs-16"},X.a.createElement(tn.b,{type:"dora",name:"minus_fc"})),X.a.createElement("span",null,"".concat(Math.round(t),"%")),X.a.createElement("a",{id:"zoomin",disabled:!a,title:I18N.zoomin,onClick:this.handleZoomIn,className:"fs-16"},X.a.createElement(tn.b,{type:"dora",name:"plus_fc"})),X.a.createElement(G.a,{onKeyDown:this.handleKeyDown})))}}]),I()(t,e),t}(V.PureComponent);W()(ca,"propTypes",{scale:H.a.number,project:H.a.object,dispatch:H.a.func});var sa=function(e,t,n,r){(e.ctrlKey||e.metaKey)&&(187==e.keyCode&&(e.preventDefault(),t()),189==e.keyCode&&(e.preventDefault(),n()),48==e.keyCode&&(e.preventDefault(),r()))},la=n("S8MF"),ua=function(e){function t(){var e;return O()(this,t),e=A()(this,B()(t).call(this)),W()(W()(F()(F()(e)),"handleShare",function(){e.setState({isSharingModalOpen:!0}),MB.event("点击了分享按钮","运行页")}),"onCloseSharingModal",function(){return e.setState({isSharingModalOpen:!1})}),e.state={isSharingModalOpen:!1},e}return L()(t,[{key:"render",value:function(){var e=this.props.dispatch,t=this.state.isSharingModalOpen;return X.a.createElement(qt.Tooltip,{position:"bottom",duration:1e3,content:{hover:I18N.preview.share},tipClassName:"marign-top-20"},X.a.createElement(tn.b,{type:"dora",name:"share",className:"share-icon",onClick:this.handleShare}),X.a.createElement(la.a,{dispatch:e,isOpen:t,onClose:this.onCloseSharingModal,app:MB.project()}))}}]),I()(t,e),t}(V.PureComponent);ua.propTypes={dispatch:H.a.func};var da=n("gX9a"),pa=n.n(da),fa=on.a.bind(pa.a),ha=[{value:"device",label:I18N.device_shell},{value:"default",label:I18N.default_shell},{value:"none",label:I18N.none_shell}],ma=function(e){function t(){var e,n,r;O()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return A()(r,(n=r=A()(this,(e=B()(t)).call.apply(e,[this].concat(i))),W()(W()(F()(F()(r)),"handleSelectChange",function(e){var t=e;r.props.dispatch({type:"projects:update-local",payload:a()({},r.props.project,{_shell_type:t})}),MB.currentProject._shell_type=t,setTimeout(function(){MB.runner.reload()})}),"handleCheckChange",function(e,t,n){r.props.dispatch({type:"projects:update-local",payload:a()({},r.props.project,{_highlight:n})}),MB.currentProject._highlight=n}),n))}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.project,n=e.disabled,r=!!t._highlight,a=X.a.createElement(qt.Tooltip,{position:"bottom",tipClassName:"marign-top-20",duration:1e3,content:{hover:n?null:I18N.preview.setting}},X.a.createElement(tn.b,{name:"cog",type:"dora"}));return X.a.createElement(qt.Dropdown,{disabled:n,menuClassName:fa("play-setting-menu"),opener:a,menuX:"right",menu:X.a.createElement(va,{onSelect:this.handleSelectChange,value:t._shell_type,onCheck:this.handleCheckChange,isChecked:r})})}}]),I()(t,e),t}(V.PureComponent);W()(ma,"propTypes",{project:H.a.object,disabled:H.a.bool,dispatch:H.a.func});var va=function(e){function t(){return O()(this,t),A()(this,B()(t).apply(this,arguments))}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.onCheck,r=e.value,a=e.isChecked;return X.a.createElement("div",null,X.a.createElement(Fr,{size:"small",optionList:ha,value:r,onChange:t}),X.a.createElement("hr",null),X.a.createElement(qt.Check,{label:I18N.highlight_clickable,size:"small",onChange:n,isChecked:a}))}}]),I()(t,e),t}(V.PureComponent);va.propTypes={onSelect:H.a.func.isRequired,onCheck:H.a.func.isRequired,value:H.a.string,isChecked:H.a.bool.isRequired};var ga=ma,ya=n("rtgd"),ba=n.n(ya),wa=function(e){function t(e){var n;return O()(this,t),n=A()(this,B()(t).call(this,e)),W()(F()(F()(n)),"handleTabChange",function(e){var t=n.props.dispatch,r=St.d[e];t({type:"entry:preview:select",payload:{toolbarActiveItem:St.d[e]}}),MB.event("".concat(St.g[r]),"运行页")}),e.dispatch({type:"reducer:preview-toolbar:active-item:init"}),_a()&&n.props.dispatch({type:"entry:preview:select",payload:{toolbarActiveItem:St.b}}),n}return L()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.toolbarActiveItem,n=e.loadSliceUrl;t!=this.props.toolbarActiveItem&&this.props.dispatch({type:"reducer:preview-toolbar:update",payload:{isShowColorPicker:!1,isSelectLayer:!1}}),n!=this.props.loadSliceUrl&&xa(n)}},{key:"render",value:function(){var e=this.props,t=e.scale,n=e.project,r=e.dispatch,a=e.toolbarActiveItem,o=e.existUnreadComment,i=St.d.indexOf(a)||0,c=a!=St.c,s=n.name||"",l=!Sa(),u=!MB.isOffline(),d=u?St.e:St.f,p=u&&o,f=X.a.createElement(ca,{scale:t,project:n,dispatch:r});return n.template?f:X.a.createElement("header",{className:ba.a["preview-toolbar"]},X.a.createElement("div",{className:"toolbar-left"},!l&&X.a.createElement("a",{title:I18N.back,onClick:Ea},X.a.createElement(tn.b,{name:"back_fc",type:"dora",className:"fs-16"})),X.a.createElement("span",{className:"project-name",title:s},s)),X.a.createElement("div",{className:"toolbar-main"},f,X.a.createElement("div",{className:"toolbar-main-wrapper"},X.a.createElement(ta.b,{tabs:d,activeIndex:i,onChange:this.handleTabChange,className:"preview-toolbar-nav",hideBorder:!0}),p&&X.a.createElement("span",{className:"unread"}))),X.a.createElement("div",{className:"toolbar-right"},X.a.createElement(ga,{dispatch:r,project:n,disabled:c}),X.a.createElement("span",{className:"line"}),X.a.createElement(ua,{dispatch:r})))}}]),I()(t,e),t}(V.PureComponent);W()(wa,"propTypes",{scale:H.a.number,project:H.a.object,toolbarActiveItem:H.a.string,existUnreadComment:H.a.bool,loadSliceUrl:H.a.string,dispatch:H.a.func});var Ea=function(){Sa()&&MB.designer.backDesign()},Sa=function(){return!MB.f.inSharing&&"file:"!==window.location.protocol},Ca=function(e){return Object(s.b)(e,null,{method:"POST"})},xa=function(){var e=$e()(i.a.mark(function e(t){var n,r,a,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,a=1;case 2:if(!n){e.next=16;break}return e.next=5,Object(ne.n)(Math.min(2e3*a++,1e4));case 5:return e.next=7,Ca(t);case 7:if(o=e.sent,c=o.url,"ok"===o.status&&(n=!1,r=c),!(a>20)){e.next=14;break}return Object(ne.d)(),e.abrupt("return",!1);case 14:e.next=2;break;case 16:return Object(ne.e)({url:"/".concat(r),name:name,type:"zip"}),e.abrupt("return",!0);case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_a=function(){return new URLSearchParams(location.search).has("inspect")},ka=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),Ma=Object(T.connect)(function(e){var t=e.model,n=t.current,r=n.screenCid,a=n.projectCid,o=t.unreadComment.unreadCountScreenMap,i=t.projects,c=e.container,s=c.common.scale,l=c.previewSetting,u=l.toolbarActiveItem,d=l.loadSliceUrl;return{scale:s,project:ka(i,a),toolbarActiveItem:u,existUnreadComment:!!o[r],loadSliceUrl:d}})(wa),Ta=n("XQpQ"),Na=n("0/XF"),Oa=n("l00i"),ja=n.n(Oa),Ia=n("lwmc"),Ra=function(e){function t(e){var n;return O()(this,t),n=A()(this,B()(t).call(this,e)),W()(W()(W()(W()(W()(F()(F()(n)),"handleExpand",function(e,t){e.stopPropagation();var r=n.state.collapseKeySet,a=t.cid,o=new Gn.a(r);r.has(a)?o.delete(a):o.add(a),n.setState({collapseKeySet:o})}),"handleActivate",function(e,t){e.stopPropagation(),n.props.activeCid!==t.cid?(n.props.dispatch({type:"entry:sync-runner:set-screen",payload:{cid:t.cid}}),n.props.dispatch({type:"preview:set:canvas:offset",payload:{offset:{x:0,y:0}}})):n.handleExpand(e,t)}),"handleKeyDown",function(e){(e.ctrlKey||e.metaKey)&&(186==e.keyCode&&(e.preventDefault(),n.resetExpandAll()),222==e.keyCode&&(e.preventDefault(),n.closeExpanedAll()))}),"resetExpandAll",function(){n.setState({collapseKeySet:new Gn.a})}),"closeExpanedAll",function(){var e=(n.props.screenTreeData||{}).childListMap,t=new Gn.a;ja()(e).map(function(e){var n=te()(e,2),r=n[0],a=n[1];Array.isArray(a)&&a.length&&t.add(r)}),n.setState({collapseKeySet:t})}),n.state={collapseKeySet:new Gn.a},n.treeProps={renderItem:e.renderCommentIcon,handleScreenItemActions:{handleExpand:n.handleExpand,handleActivate:n.handleActivate}},n}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.activeCid,n=e.isSearching,r=e.screenTreeMap,a=e.screenDataMap;return X.a.createElement(X.a.Fragment,null,X.a.createElement(Ia.a,{collapseKeySet:this.state.collapseKeySet,activeCid:t,isSearching:n,screenTreeMap:r,screenDataMap:a,treeProps:this.treeProps}),X.a.createElement(G.a,{onKeyDown:this.handleKeyDown}))}}]),I()(t,e),t}(V.PureComponent);W()(Ra,"propTypes",{activeCid:H.a.string,isSearching:H.a.bool,screenTreeData:H.a.object,screenTreeMap:H.a.object,screenDataMap:H.a.object,renderCommentIcon:H.a.func,dispatch:H.a.func});var La=n("L0cU"),Da=function(e){function t(e){var n;return O()(this,t),n=A()(this,B()(t).call(this,e)),W()(F()(F()(n)),"handleActivateScreen",function(e){var t=n.props,r=t.activeCid,a=t.dispatch;e!==r&&a({type:"entry:sync-runner:set-screen",payload:{cid:e}})}),n.treeProps={renderItem:e.renderCommentIcon},n}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.activeCid,n=function e(t,n,r){var a=r[t]?[r[t]]:[];return n[t]&&n[t].forEach(function(t){var o=t.cid,i=e(o,n,r);a.push.apply(a,ie()(i))}),a}("root",e.screenTreeMap,e.screenDataMap);return X.a.createElement(La.a,{screenList:n,projectToken:MB.currentProject.access_token,activeScreenCid:t,onClickScreenItem:this.handleActivateScreen,treeProps:this.treeProps})}}]),I()(t,e),t}(V.PureComponent);W()(Da,"propTypes",{activeCid:H.a.string,screenTreeMap:H.a.object,screenDataMap:H.a.object,renderCommentIcon:H.a.func,dispatch:H.a.func});var Aa=n("sEfC"),Pa=n.n(Aa),Ba=function(e,t,n){for(var r=[],o=0,i=ja()(e),c=0;c<i.length;c++){var s=te()(i[c],2),l=s[0],u=s[1];t&&t.length>0&&u.toLowerCase().includes(t)&&r.push(a()({},n[l],{index:o++}))}return r},Ua=n("naIL"),Fa=n.n(Ua),za=function(e){function t(e){var n;O()(this,t),n=A()(this,B()(t).call(this,e)),W()(W()(W()(W()(W()(F()(F()(n)),"handleSearch",function(e){n.debounceSearch(e.toLowerCase()),n.setState({keyword:e})}),"debounceSearch",Pa()(function(e){MB.event("使用了页面搜索","运行页"),n.props.dispatch({type:"reducer:preview-panel:search",payload:{screenSearch:e}})},300)),"handleListView",function(){var e=n.props.toolbarActiveItem;MB.event("在".concat(St.g[e],",点击了列表"),"运行页"),n.setState({imageMode:!1})}),"handleThumbnailView",function(){var e=n.props.toolbarActiveItem;MB.event("在".concat(St.g[e],",点击了缩略图"),"运行页"),n.setState({imageMode:!0})}),"renderCommentIcon",function(e){var t=n.props.screenCommentThreadCountMap;if((t&&t[e.cid]||0)>=1&&!MB.isOffline())return X.a.createElement("span",{className:"toggle-comment"},X.a.createElement(tn.b,{type:"dora",name:"comment"}))});var r=e.screenTreeData,a=r.nodeMap,o=r.screenNameCidMap,i=e.screenSearch;return n.state={keyword:"",imageMode:e.isDemo,searchScreenKeyMap:Ba(o,i,a)||[]},n}return L()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.screenSearch,n=this.props,r=n.screenTreeData,a=r.nodeMap,o=r.screenNameCidMap;if(t!=n.screenSearch){var i=Ba(o,t,a)||[];this.setState({searchScreenKeyMap:i})}}},{key:"render",value:function(){var e=this.props,t=e.screenTreeData,n=e.currentScreenCid,r=e.screenSearch,a=e.dispatch,o=this.state,i=o.imageMode,c=o.keyword,s=o.searchScreenKeyMap,l=r.length>0,u=l?{root:s}:t.childListMap;return X.a.createElement("div",{className:Fa.a["screen-panel"]},X.a.createElement("div",{className:"search-box"},X.a.createElement(Na.a,{value:c,placeholder:I18N.preview.search,onChange:this.handleSearch}),X.a.createElement("div",{className:"screen-mode-tab"},X.a.createElement(qt.Tooltip,{className:"view-mode-icon",content:{hover:I18N.preview.list_mode},duration:1e3,position:"bottom",tipClassName:"marign-top-20"},X.a.createElement(tn.b,{type:"dora",name:"list",className:i?"fs-color-gray":"",onClick:this.handleListView})),X.a.createElement(qt.Tooltip,{className:"view-mode-icon",content:{hover:I18N.preview.image_mode},duration:1e3,position:"bottom",tipClassName:"marign-top-20"},X.a.createElement(tn.b,{type:"dora",name:"cover",className:i?"":"fs-color-gray",onClick:this.handleThumbnailView})))),X.a.createElement("div",{className:"screen-list-container rn-content-body"},i?X.a.createElement(Da,{activeCid:n,screenTreeMap:u,screenDataMap:t.nodeMap,renderCommentIcon:this.renderCommentIcon,dispatch:a}):X.a.createElement(Ra,{activeCid:n,isSearching:l,screenTreeData:t,screenTreeMap:u,screenDataMap:t.nodeMap,renderCommentIcon:this.renderCommentIcon,dispatch:a})))}}]),I()(t,e),t}(V.PureComponent);W()(za,"propTypes",{screenTreeData:H.a.object,screenCommentThreadCountMap:H.a.object,currentScreenCid:H.a.string,screenNameCidMap:H.a.object,screenSearch:H.a.string,toolbarActiveItem:H.a.string,isDemo:H.a.bool,noSearch:H.a.bool,dispatch:H.a.func});var Wa,qa=Object(T.connect)(function(e){return{screenTreeData:Va(e.model.screens,e.model.current.projectCid),screenCommentThreadCountMap:Ha(e.model.commentThreads),currentScreenCid:e.model.current.screenCid,screenSearch:e.container.screens.screenSearch}})(za),Ha=Object(ne.h)(function(e){return e.reduce(function(e,t){return e[t.screen_cid]=(e[t.screen_cid]||0)+1,e},{})}),Va=Object(ne.h)(function(e,t){var n={},r={},a=W()({},"root",[]);return e.forEach(function(e){if(e.project_cid===t){var o=e.cid,i=e.position,c=e.parent_cid||"root";n[o]=e,r[o]=String(e.name).toLowerCase(),void 0===a[c]&&(a[c]=[]),a[c].push({cid:o,position:i})}}),b()(a).forEach(function(e){return e.sort(function(e,t){return n[e.cid].position-n[t.cid].position})}),{rootCid:"root",nodeMap:n,childListMap:a,screenNameCidMap:r}}),Xa=n("8fIB"),Za=n.n(Xa),Ga=function(e,t){return new Za.a(function(n){e.src=t,e.onload=function(){return n(e)},e.onerror=n})},Ka=(Wa=Za.a.resolve("QUEUE_HEAD"),{pushTask:function(e){var t=Wa.then(e).catch(console.log);return Wa=t,t}}).pushTask,Ya=function(e){function t(){var e,n,r;O()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return A()(r,(n=r=A()(this,(e=B()(t)).call.apply(e,[this].concat(o))),W()(F()(F()(r)),"getElementRef",function(e){return r.imageRef=e}),n))}return L()(t,[{key:"componentDidMount",value:function(){var e=this;Ka($e()(i.a.mark(function t(){var n,r,a,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.src,a=n.adjustImage,t.next=3,Ga(e.imageRef,r);case 3:o=t.sent,a&&o&&Object(ne.b)({image:o,adjust:a});case 5:case"end":return t.stop()}},t,this)}))).catch(function(e){return console.error(e)})}},{key:"render",value:function(){var e=this.props,t=(e.src,e.adjustImage,Ur()(e,["src","adjustImage"]));return X.a.createElement("img",Q()({alt:"",ref:this.getElementRef},t))}}]),I()(t,e),t}(V.PureComponent);Ya.propTypes={src:H.a.string,adjustImage:H.a.number};var Ja=n("2s0x"),Qa=n.n(Ja),$a=on.a.bind(Qa.a),eo=!1,to=function(e){function t(e){var n;O()(this,t),n=A()(this,B()(t).call(this,e)),W()(W()(W()(W()(W()(F()(F()(n)),"handleActiveLayer",function(e){n.setState({activeLayerId:e})}),"downloadSlice",$e()(i.a.mark(function e(){var t,r,a,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,r=t.projectCid,a=t.projectName,o=t.isLogin,!0!==n.state.download&&o){e.next=3;break}return e.abrupt("return");case 3:return n.startLoadSlice(),e.next=6,so(r,a);case 6:c=e.sent,n.endLoadSlice(c);case 8:case"end":return e.stop()}},e,this)}))),"startLoadSlice",function(){n.startTime=Date.now(),n.setState({download:!0}),MB.event("点击下载全部切图","运行页")}),"endLoadSlice",function(e){e&&(MB.event("下载全部切图时长".concat(Date.now()-n.startTime),"运行页"),n.setState({download:!1}))}),"requestLayer",function(e){var t=n.props.dispatch;t({type:"REQUEST_SELECT_LAYER",payload:{layerID:e}}),t({type:"reducer:preview-toolbar:update",payload:{isSelectLayer:!0}})}),eo=!1,n.state={download:!1,activeLayerId:null};var r=n.props,a=r.loading,o=r.dispatch;return a&&o({type:"reducer:slice:init"}),n}return L()(t,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.projectCid,n=e.dispatch,r=this.state.download,a="/api/v2/projects/".concat(t,"/build/slices_zips.json");r&&(eo=!0,n({type:"reducer:preview-toolbar:update",payload:{loadSliceUrl:a}}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.download,r=t.activeLayerId,a=this.props,o=a.slicesMap,i=a.loading,c=a.error,s=a.currentScreenCid,l=a.isLogin;return c||i?X.a.createElement(io,null):0===o.length?X.a.createElement(co,null):X.a.createElement("div",{className:$a("slice-container")},o.map(function(t){var n=t.name,a=t.id,o=t.screen_cid,i=t.image,c=t.image_set;return X.a.createElement(no,{key:a,src:i,name:n,currentScreenCid:s,id:a,imageSet:c,screenCid:o,requestLayer:e.requestLayer,activeLayer:e.handleActiveLayer,activeLayerId:r})}),X.a.createElement(ro,{onClick:this.downloadSlice,isLoading:n,isLogin:l}))}}]),I()(t,e),t}(V.PureComponent);to.propTypes={slicesMap:H.a.array.isRequired,loading:H.a.bool,error:H.a.bool,currentScreenCid:H.a.string,isLogin:H.a.bool,projectCid:H.a.string,projectName:H.a.string,dispatch:H.a.func};var no=function(e){function t(){var e;return O()(this,t),e=A()(this,B()(t).call(this)),W()(W()(W()(W()(W()(W()(W()(F()(F()(e)),"isIncurrentScreen",function(){return e.props.screenCid===e.props.currentScreenCid}),"handleClick",function(){var t=e.props,n=t.id,r=t.requestLayer;(0,t.activeLayer)(n),e.isIncurrentScreen()?r(n):console.warn("Not in current Screen")}),"handleOnload",function(){e.setState({imageLoad:!0})}),"handleError",function(){throw new Error("image load fail")}),"handleMouseEnter",function(){e.setState({loadSingleSlice:!0})}),"handleMouseLeave",function(){e.setState({loadSingleSlice:!1})}),"handleSingleDownload",function(t){t.persist(),t.stopPropagation(),e.delaySingleDownload()}),e.state={imageLoad:!1,loadSingleSlice:!1},e.imageRef=function(t){return e.$image=t},e.delaySingleDownload=Pa()(function(){var t=e.props,n=t.imageSet,r=t.name;Object(ne.e)({url:n,name:r,type:"zip"}),MB.event("在切图列表中下载单张切图","运行页")},500,{leading:!0}),e}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.src,r=e.activeLayerId,a=e.id,o=this.state,i=o.imageLoad,c=o.loadSingleSlice,s=i?"opacity-1":"opacity-0",l={display:i?"block":"none"},u=$a("slice-item",{active:r===a});return X.a.createElement(qt.Tooltip,{type:"block",content:{click:this.isIncurrentScreen()?null:I18N.preview_panel.not_incurrent_screen}},X.a.createElement("div",{className:u,onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},X.a.createElement("div",{className:"slice-item-wrap",style:{background:"url(/images/preview/slice-bg.png) left top",backgroundSize:"cover"}},!i&&X.a.createElement("img",{src:"/images/preview/image-load-gif.gif",alt:"Loading..."}),X.a.createElement(Ya,{style:l,src:n,alt:t,adjustImage:38,className:"".concat(s),onLoad:this.handleOnload,onError:this.handleError})),X.a.createElement("div",{className:"slice-item-content"},X.a.createElement("span",{className:"slice-item-name textEllipsis"},t),c&&X.a.createElement(tn.b,{name:"export",type:"dora",onClick:this.handleSingleDownload}))))}}]),I()(t,e),t}(V.PureComponent);no.propTypes={name:H.a.string,src:H.a.string.isRequired,id:H.a.number.isRequired,imageSet:H.a.string.isRequired,screenCid:H.a.string.isRequired,requestLayer:H.a.func.isRequired,activeLayer:H.a.func,activeLayerId:H.a.number,currentScreenCid:H.a.string.isRequired};var ro=function(e){var t=e.onClick,n=e.isLoading,r=e.isLogin?null:I18N.preview.guide_login;return X.a.createElement(qt.Tooltip,{content:{click:r},type:"block",position:"top",arrowed:!1,className:$a("download"),onClick:t},I18N.preview_panel.download,n?X.a.createElement(oo,null):X.a.createElement(tn.b,{type:"dora",name:"export",className:$a("icon-download")}))};ro.propTypes={onClick:H.a.func,isLoading:H.a.bool,isLogin:H.a.bool};var ao=function(){return X.a.createElement("div",{className:$a("layer-load")},X.a.createElement("span",{className:$a("spinner")}))},oo=function(){return X.a.createElement("div",{className:$a("download-slice-load")},X.a.createElement(ao,null))},io=function(){return X.a.createElement("div",{className:$a("slice-load-wrap")},X.a.createElement(ao,null))},co=function(){return X.a.createElement("div",{className:$a("no-slice")},X.a.createElement("img",{src:"/images/preview/no-slice@2x.png"}),X.a.createElement("span",null,I18N.preview_panel.no_slice),X.a.createElement("span",null,I18N.preview_panel.slice_in_sketch),X.a.createElement("a",{href:"https://s3.cn-north-1.amazonaws.com.cn/modao/sketch/MockingBot.sketchplugin.zip"},X.a.createElement("img",{src:"/images/preview/ic_sketch@2x.png",alt:"sketch"}),I18N.preview_panel.download_sketch))},so=function(){var e=$e()(i.a.mark(function e(t,n){var r,a,o,c,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,o=1;case 2:if(!r){e.next=22;break}if(!eo){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,u(t);case 7:if(c=e.sent,s=c.url,"ok"!==c.status){e.next=15;break}r=!1,a=s,e.next=17;break;case 15:return e.next=17,Object(ne.n)(Math.min(2e3*o++,1e4));case 17:if(!(o>20)){e.next=20;break}return Object(ne.d)(),e.abrupt("return",!1);case 20:e.next=2;break;case 22:return Object(ne.e)({url:"/".concat(a),name:n,type:"zip"}),e.abrupt("return",!0);case 24:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),lo=Object(T.connect)(function(e){var t=e.model,n=t.current,r=n.screenCid,a=n.projectCid,o=t.user,i=e.container.slices;return{slicesMap:i.slices,loading:i.loading,error:i.error,isLogin:!!o.id,projectCid:a,currentScreenCid:r}})(to),uo=n("GEF2"),po=n.n(uo),fo=on.a.bind(po.a),ho=function(e){function t(e){var n;return O()(this,t),n=A()(this,B()(t).call(this,e)),W()(W()(W()(F()(F()(n)),"handleBackToOrigin",function(){n.props.dispatch({type:"preview:set:canvas:offset",payload:{offset:{x:0,y:0}}})}),"handleTabChange",function(e){n.setState({activeIndex:e})}),"toggleMinimized",function(){var e=n.props.toolbarActiveItem;n.setState(function(e){return{isMinimized:!e.isMinimized}}),MB.event("".concat(St.g[e],",点击了").concat(n.state.isMinimized?"展开":"收起","列表"),"运行页")}),n.state={isMinimized:MB.isUIChina(),activeIndex:0},n}return L()(t,[{key:"componentWillReceiveProps",value:function(e){"inspect"!==e.toolbarActiveItem&&this.setState({activeIndex:0})}},{key:"render",value:function(){var e=this.props,t=e.isDemo,n=e.project,r=e.screensCount,a=e.toolbarActiveItem,o=e.isLoggedIn,i=e.isDisplaced,c=this.state,s=c.isMinimized,l=c.activeIndex,u=[{type:"dora",label:"".concat(I18N.preview.pages," (").concat(r,")"),icon:"file_text"},{type:"dora",label:I18N.preview.images,icon:"slice"}],d="inspect"==a&&!MB.isOffline(),p=d?u:u.slice(0,1),f=fo("preview-panel",{minimized:s},{"is-uichina":MB.isUIChina()}),h=fo("preview-panel-nav",{"single-nav":!d});return X.a.createElement("div",{className:fo("preview-panel-wrapper"),style:{width:s?0:240}},X.a.createElement("div",{className:fo("reset-btn",{"is-show":i}),onClick:this.handleBackToOrigin},I18N.click_to_origin),X.a.createElement("div",{className:f},X.a.createElement(ta.b,{tabs:p,activeIndex:l,onChange:this.handleTabChange,className:h,hideBorder:!0}),X.a.createElement("div",{className:"preview-panel-nav-line",style:{opacity:d?0:1}}),0==l?X.a.createElement(qa,{toolbarActiveItem:a,isDemo:t}):X.a.createElement(lo,{projectName:n.name}),X.a.createElement("div",{className:fo("panel-toggle-minimize",{minimized:s}),onClick:this.toggleMinimized},X.a.createElement(tn.b,{type:"fa",name:"angle-right",className:"toggle-icon"}))),X.a.createElement(Ta.b,{isLoggedIn:o,isDemo:t}))}}]),I()(t,e),t}(V.PureComponent);W()(ho,"propTypes",{project:H.a.object.isRequired,screensCount:H.a.number.isRequired,toolbarActiveItem:H.a.string.isRequired,isLoggedIn:H.a.bool,isDisplaced:H.a.bool,isDemo:H.a.bool,dispatch:H.a.func});var mo=Object(T.connect)(function(e){var t=e.model,n=t.user,r=t.current.projectCid,a=t.projects,o=t.screens,i=e.container,c=i.common.offset,s=i.previewSetting.toolbarActiveItem,l=!!n.id,u=Boolean(c.x||c.y),d=go(a,r),p=vo.has(d.access_token);return{isLoggedIn:l,isDisplaced:u,screensCount:o.reduce(function(e,t){return t.project_cid===r?e+1:e},0),project:d,isDemo:p,toolbarActiveItem:s}})(ho),vo=new Gn.a(["demo","cS1AXKF5jtrJePbEKiYcdcHosQPdzrk","workout","sI3GY2tDz76RrZ4MGFiIcZTZpAHyluC","UMQzYmknxWeHNvvVyeyJDuSkgyvi6Xw","9Py1L5RdC8ZPRSmnWEt4uuUUSDUAxkM"]),go=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),yo=n("XrEr"),bo=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e=e.toString(),"pt"!==n?e.replace(t,n):r?Object(yo.d)(e):e.replace(t,"")},wo={px:{x:"left",y:"top",width:"width",height:"height",lineHeight:"line-height",opacity:"opacity",border:"border",borderRadius:"border-radius",borderColor:"border-color",borderWidth:"border-width",backgroundColor:"background-color",color:"color",fontSize:"font-size",fontFamily:"font-family",fontStyle:"font-style",textAlign:"text-align",shadows:"box-shadow",innerShadows:"inner-shadow"},dp:{x:"left",y:"top",width:"layout_width",height:"layout_height",border:"border",opacity:"opacity",color:"textColor",fontSize:"textSize",fontFamily:"font-family",fontStyle:"font-style",textAlign:"gravity",backgroundColor:"background",borderRadius:"radius",borderColor:"border-color",lineHeight:"line-height",borderWidth:"border-width",shadows:"box-shadow",innerShadows:"inner-shadow"},pt:{x:"x",y:"y",width:"width",height:"height",opacity:"opacity",border:"border",backgroundColor:"backgroundColor",color:"text-color",textAlign:"alignment",fontSize:"fontSize",fontFamily:"fontFamily",fontStyle:"font-style",borderRadius:"cornerRadius",borderColor:"borderColor",borderWidth:"border-width",lineHeight:"lineSpacing"}},Eo=n("RUem"),So=function(e){var t=e.layer,n=e.unit,r=e.ratio,o=e.showGlobal,i=e.userPickColor,c=void 0===i?[]:i,s=e.globalColor,l=void 0===s?[]:s,u=e.globalText,d=void 0===u?[]:u,p=e.documentColor,f=void 0===p?[]:p,h=e.screenColor,m=void 0===h?[]:h,v=e.language,g=e.colorUnit,y=e.dispatch,b=t.src_left,w=t.src_top,E=t.src_width,S=t.src_height,C=t.bd_radius,x=t.line_height,_=t.bg_colors,k=void 0===_?[]:_,M=t.borders,T=void 0===M?[]:M,N=t.i,O=t.name,j=t.padding,I=void 0===j?0:j,R=t.hiddSpacing,L=void 0!==R&&R,D=t.text_styles,A=void 0===D?[]:D,P=t.alignment,B=t.vertical_alignment,U=t.image,F=t.text,z=t.letter_spacing,q=t.image_set_zip,H=t.shadows,V=void 0===H?[]:H,Z=t.inner_shadows,G=void 0===Z?[]:Z,K=t.rotation,Y=t.textShadows,J=void 0===Y?[]:Y,Q=t.image_set,$=void 0===Q?[]:Q,ee=T.length>0,te=k.length>0,ne=!!U,re=A.length>0&&F&&Object(Fe.e)(F).length,ae=V.length>0||J.length>0,oe=G.length>0,ie=q,ce={left:b,top:w,width:E,height:S,borderRadius:C,opacity:t.o,rotation:K,ratio:r,unit:n},le=Object(Fe.b)(ce),ue=le.adapterTop,de=le.adapterLeft,pe=le.adapterWidth,fe=le.adapterHeight,he=le.radius,me=le.opacity,ve=le.rotate,ge={lineHeight:x,letterSpacing:z,unit:n,ratio:r},ye=Object(Fe.d)(ge),be=ye.lineHeight,we=ye.letterSpacing,Ee="number"==typeof N?N?"italic":"normal":void 0,Se={textStyles:A,background:k,borders:T,shadows:V,innerShadows:G,colorUnit:g,ratio:r,unit:n},Ce=Object(Fe.c)(Se),xe=t.o&&100!=t.o?t.o/100:null,_e=function(e){var t=e.attr,n=e.language,r=e.unit,a=Object(Fe.f)(n),o=t.width,i=t.height,c=t.lineHeight,s=t.opacity,l=t.borderRadius,u=t.borderWidth,d=t.borderColor,p=t.backgroundColor,f=t.color,h=t.fontSize,m=t.fontFamily,v=t.fontStyle,g=t.boxShadow,y=t.textAlign,b=t.x,w=t.y,E=b&&W()({},wo[a].x,bo(b,r,a)),S=w&&W()({},wo[a].y,bo(w,r,a)),C=o&&W()({},wo[a].width,bo(o,r,a)),x=i&&W()({},wo[a].height,bo(i,r,a)),_=c&&W()({},wo[a].lineHeight,bo(c,r,a)),k=s&&W()({},wo[a].opacity,bo(s,r,a)),M=l&&W()({},wo[a].borderRadius,bo(l,r,a)),T=p&&W()({},wo[a].backgroundColor,bo(p,r,a,!0)),N=f&&W()({},wo[a].color,bo(f,r,a,!0)),O=h&&W()({},wo[a].fontSize,bo(h,r,a)),j=m&&W()({},wo[a].fontFamily,bo(m,r,a)),I=v&&W()({},wo[a].fontStyle,bo(v,r,a)),R=g&&W()({},wo[a].shadows,g),L=u&&W()({},wo[a].borderWidth,bo(u,r,a)),D=d&&W()({},wo[a].borderColor,bo(d,r,a,!0)),A=y&&W()({},wo[a].textAlign,y);return se()({},E,S,C,x,_,k,M,L,D,T,N,O,I,A,R,j)}({attr:a()({x:de,y:ue,width:pe,height:fe,lineHeight:be,textAlign:P,opacity:xe,borderRadius:he},Ce),language:v,unit:n}),ke=ne?"ImageView":re?"TextView":"View";return o?X.a.createElement(Eo.h,{adapterWidth:pe,adapterHeight:fe,documentColor:f,globalText:d,globalColor:l,screenColor:m,userPickColor:c,colorUnit:g,dispatch:y}):X.a.createElement("div",null,X.a.createElement(Eo.j,{value:O}),X.a.createElement(Eo.b,{adapterTop:ue,adapterLeft:de,adapterWidth:pe,adapterHeight:fe,rotate:ve,radius:he,opacity:me,unit:n,colorUnit:g}),re&&X.a.createElement(Eo.m,{textStyles:A,alignment:P,vertical_alignment:B,lineHeight:be,letterSpacing:we,ratio:r,unit:n,o:t.o,padding:I,fontStyle:Ee,colorUnit:g,hiddSpacing:L,text:Object(Fe.e)(F)}),te&&X.a.createElement(Eo.g,{backgroundColorSort:k,colorUnit:g}),ee&&X.a.createElement(Eo.c,{borderSort:T,ratio:r,unit:n,colorUnit:g}),ae&&X.a.createElement(Eo.l,{shadows:V,textShadows:J,colorUnit:g,unit:n,ratio:r}),oe&&X.a.createElement(Eo.l,{shadows:G,colorUnit:g,unit:n,ratio:r,isInnerShaow:!0}),ie&&X.a.createElement(Eo.i,{imageSetZip:q,name:t.name,imageSet:$}),X.a.createElement(Eo.d,{code:_e,whichAndView:ke,language:v,text:Object(Fe.e)(F)||""}))};So.propTypes={userPickColor:H.a.array,screenColor:H.a.array,documentColor:H.a.array,globalText:H.a.array,globalColor:H.a.array,colorUnit:H.a.string,layer:H.a.object,getLayerRef:H.a.func,showGlobal:H.a.bool,unit:H.a.string,ratio:H.a.number,language:H.a.string,dispatch:H.a.func};var Co=So,xo=n("sxGJ"),_o=n.n(xo),ko=n("xn7q"),Mo=n.n(ko),To=function(e){function t(){var e;return O()(this,t),(e=A()(this,B()(t).call(this))).getScrollLayerRef=function(t){return e.layerRef=t},e.state={error:!1},e}return L()(t,[{key:"componentDidMount",value:function(){this.clipBoard=new _o.a('[data-type="copy"]')}},{key:"componentWillUnmount",value:function(){$(this.layerRef).perfectScrollbar("destroy"),this.clipBoard.destroy()}},{key:"componentWillReceiveProps",value:function(e){e.screenCid!=this.props.screenCid&&this.props.dispatch({type:"reducer:preview-toolbar:update",payload:{isSelectLayer:!1}})}},{key:"componentDidUpdate",value:function(e){e.layer!=this.props.layer&&$(this.layerRef).perfectScrollbar({suppressScrollX:!0}),e.layer&&this.props.layer&&e.layer.id!=this.props.layer.id&&this.layerRef&&(this.layerRef.scrollTop=0)}},{key:"componentDidCatch",value:function(e){this.setState({error:!0}),console.error(e)}},{key:"render",value:function(){var e=this.props,n=e.isSelectLayer,r=e.layer,a=this.state.error;return X.a.createElement("div",{className:Mo.a.previewPanelLayer},r?X.a.createElement("div",{className:Mo.a.layerInfo,ref:this.getScrollLayerRef},a?X.a.createElement(t.Error,null):X.a.createElement(Co,Q()({},this.props,{showGlobal:!n}))):X.a.createElement(Eo.k,null))}}]),I()(t,e),t}(V.PureComponent);W()(W()(To,"Error",function(){return X.a.createElement("div",null,"Sorry!Error happend, Please refresh it")}),"propTypes",{colorUnit:H.a.string.isRequired,isSelectLayer:H.a.bool.isRequired,unit:H.a.string.isRequired,ratio:H.a.number.isRequired,layer:H.a.object,screenCid:H.a.string,dispatch:H.a.func.isRequired});var No=Object(T.connect)(function(e){var t=e.container,n=t.layers,r=n.activeLayerID,o=n.visibilityScreenID,i=n.resourceByScreen,c=t.previewSetting,s=e.model,l=s.current,u=l.screenCid,d=l.projectCid,p=s.projects,f=c.isSelectLayer,h=jo(p,d).device,m=Io(f,i,o,r),v=Oo(i,o,h);return a()({},c,{layer:m},v,{screenCid:u})})(To),Oo=Object(ne.h)(function(e,t,n){var r=[],a=[],o=[],i=[],c=e[t];if(c){var s=c.layers,l=Object(Fe.g)(s);r=l.screenColor,i=l.globalText,a=c.documentColor,o=c.globalColor}return{screenColor:r,documentColor:a,globalColor:o,globalText:i}}),jo=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),Io=Object(ne.h)(function(e,t,n,r){var o=t[n];if(!o||o.layers&&0==o.layers.length)return null;var i=o.layers;return e?Se()(i,function(e){return e.id===r}):a()({},i[0])}),Ro=n("zAG7"),Lo=n("7Qib"),Do=(n("oSKl"),function(e){function t(){var e,n,r;O()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return A()(r,(n=r=A()(this,(e=B()(t)).call.apply(e,[this].concat(i))),W()(W()(W()(W()(W()(W()(F()(F()(r)),"state",{formData:{name:"",email:"",pwd:""},submitErrMsg:"",submitted:!1}),"handleFormDataChange",function(e){return function(t){return r.setState({formData:a()({},r.state.formData,W()({},e,t))})}}),"handleEmailChange",function(e){return r.setState({formData:a()({},r.state.formData,{email:e})})}),"resetSubmitErrMsg",function(){return r.setState({submitErrMsg:""})}),"verifyEmail",function(e){return Ro.a.test(e)}),"handleSignUp",function(){var e=r.props.event,t=r.state.formData,n=t.name,a=t.email,o=t.pwd;if(r.resetSubmitErrMsg(),!r.verifyEmail(a))return r.setState({submitErrMsg:"请输入正确的 Email 地址"});Object(Lo.b)("/events/sign_up.json",{username:n,email:a,password:o,locale:"zh-CN",event:e.name}).then(function(){return Object(Lo.b)("/sessions.json",{email:a,password:o}).then(function(){return r.setState({submitted:!0})})},function(e){return r.setState({submitErrMsg:e.detail})})}),n))}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.inMobile,n=e.isOpen,r=e.event,a=this.state,o=a.formData,i=o.name,c=o.email,s=o.pwd,l=a.submitErrMsg,u=a.submitted,d=!!i&&!!c&&!!s;return X.a.createElement(qt.Modal,{className:"sign-up-modal ".concat(t?"modal-in-mobile":""),maskClassName:"modal-mask",title:"注册墨刀帐户",isOpen:n},u?X.a.createElement("div",{className:"award-view"},X.a.createElement("img",{className:"award",src:"/images/event/award.png"}),X.a.createElement("p",{className:"success-tip"},r.successTip)):X.a.createElement("div",{className:"sign-up-view"},X.a.createElement("p",{className:"event-desc"},r.desc),X.a.createElement("div",{className:"input-entry"},X.a.createElement(tn.b,{className:"icon",type:"mb",name:"user"}),X.a.createElement(qt.Input,{className:"input",placeholder:"姓名",defaultValue:i,onChange:this.handleFormDataChange("name")})),X.a.createElement("div",{className:"input-entry"},X.a.createElement(tn.b,{className:"icon",type:"mb",name:"mail"}),X.a.createElement(qt.InputEmail,{className:"input",placeholder:"Email 地址",defaultValue:c,onChange:this.handleEmailChange})),X.a.createElement("div",{className:"input-entry"},X.a.createElement(tn.b,{className:"icon",type:"mb",name:"lock"}),X.a.createElement(qt.Input,{className:"input",placeholder:"密码",type:"password",defaultValue:s,onChange:this.handleFormDataChange("pwd")})),!!l&&X.a.createElement("p",{className:"error-msg"},"* ".concat(l)),X.a.createElement(qt.Button,{className:"primary-button",type:"primary",isDisabled:!d,onClick:this.handleSignUp},"注册"),X.a.createElement("p",{className:"agree-terms"},"点击「注册」按钮将视为您同意墨刀",X.a.createElement("a",{href:"/tos",target:"_blank"},"使用条款"))))}}]),I()(t,e),t}(V.PureComponent));Do.propTypes={event:H.a.object,isOpen:H.a.bool,inMobile:H.a.bool};var Ao=function(e){function t(){return O()(this,t),A()(this,B()(t).apply(this,arguments))}return L()(t,[{key:"render",value:function(){var e=this.props,t=e.open,n=e.event,r=e.loggedIn,a=e.inMobile,o=e.dispatch;return X.a.createElement("div",null,t&&!r&&X.a.createElement(Do,{inMobile:a,event:n,isOpen:t,onClose:function(){return o("event-sign-up:close:modal")}}))}}]),I()(t,e),t}(V.PureComponent);Ao.propTypes={open:H.a.bool,inMobile:H.a.bool,event:H.a.object,loggedIn:H.a.bool,dispatch:H.a.func};var Po=Object(T.connect)(function(e){return a()({},e.container.eventSignUpModal,{loggedIn:!!e.model.user.id,inMobile:MB.isMobile()})})(Ao),Bo=n("XpKX"),Uo=n.n(Bo),Fo=on.a.bind(Uo.a),zo=window,Wo=zo.MB,qo=zo.I18N,Ho=new Gn.a(["ai@mockingbot.com","ethantw@me.com"]),Vo=function(e){function t(e){var n;O()(this,t),n=A()(this,B()(t).call(this,e)),W()(F()(F()(n)),"handleClick",function(){Ko(),n.setState({showLoadtip:!1})});var r=e.dispatch;return r({type:"entry:init:preview:scale"}),r({type:"reducer:artboards:init"}),r({type:"preview:set:canvas:offset",payload:{offset:{x:0,y:0}}}),Zo(e),r({type:"entry:unread-comment:init"}),n.state={showLoadtip:!0},n}return L()(t,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"entry:preview:clear"})}},{key:"componentDidMount",value:function(){var e=function(){var e=Yn.find(function(e){return(0,e.checker)()});return e?e.info:null}();if(e){var t={open:!0,event:e};this.props.dispatch({type:"event-sign-up:set:event",payload:t})}}},{key:"componentWillUpdate",value:function(e){this.props.project!==e.project&&Zo(e)}},{key:"render",value:function(){var e=this.props,t=e.isLite,n=e.project,r=n.owner_email,a=n.master,o=e.previewSetting,i=e.isProjectFromOtherFreeUser,c=this.state.showLoadtip;if(t)return X.a.createElement(X.a.Fragment,null,X.a.createElement(sr,null),X.a.createElement(Po,null));var s=o.toolbarActiveItem,l=s==St.b,u=s==St.a,d=!Wo.isElectron()&&!Wo.isOffline()&&l&&c&&Go(),p=!a&&"preview"===s&&(Ho.has(r)||i);return X.a.createElement("div",{className:Fo({"is-offline-mode":Wo.isOffline(),"is-uichina":Wo.isUIChina()})},X.a.createElement(Ma,null),l&&X.a.createElement(ea,null),X.a.createElement("div",{className:Fo("adjust-container","preview-content-container")},u&&X.a.createElement(Dn,null),l&&X.a.createElement(No,null),X.a.createElement(Dr,null),X.a.createElement(nr,null),X.a.createElement(mo,null)),p||Wo.isUIChina()&&X.a.createElement("a",{className:"powered-by",href:"/",target:"_blank"},X.a.createElement("img",{className:"zh",src:"/images/preview/watermark_zh.svg",alt:qo.preview.powered_by_modao}),X.a.createElement("img",{className:"en",src:"/images/preview/watermark_en.svg",alt:qo.preview.powered_by_modao})),X.a.createElement(Xo,{isActive:d,onClick:this.handleClick}),X.a.createElement(Po,null))}}]),I()(t,e),t}(V.Component);W()(Vo,"propTypes",{isLite:H.a.bool,project:H.a.object,previewSetting:H.a.object,layer:H.a.object,isProjectFromOtherFreeUser:H.a.bool,userId:H.a.number,dispatch:H.a.func});var Xo=function(e){var t=e.isActive,n=e.onClick;return t?X.a.createElement("div",{className:"download-client-tip"},X.a.createElement(tn.b,{type:"fa",name:"info-circle",className:"download-client-tip-icon"}),X.a.createElement("span",{className:"download-text"},X.a.createElement("a",{href:"/downloads",rel:"noopener noreferrer",target:"_blank"},qo.preview.client_load_a)," ",qo.preview.client_load_tip),X.a.createElement(tn.b,{type:"dora",name:"times_fc",className:"download-client-close-icon",onClick:n})):null};Xo.propTypes={isActive:H.a.bool.isRequired,onClick:H.a.func.isRequired};var Zo=function(e){var t,n,r,a=e.project,o=e.isProjectFromOtherFreeUser;return t={allowComment:a.limitation.commentable,denyMessage:Wo.renewMsg("cant_comment",{role:o?a.team_cid?"team":"project":"user"})},n=t.allowComment,r=t.denyMessage,se()(Nt,{allowComment:n,denyMessage:r})},Go=function(){return!Wo.localStorageDelegate.getItem("close_client_load_tip")},Ko=function(){return Wo.localStorageDelegate.setItem("close_client_load_tip","true")},Yo=Object(ne.h)(function(e,t){return e.find(function(e){return e.cid===t})}),Jo=Object(ne.h)(function(e,t){return t!==e.owner_id&&e.expired}),Qo=Object(T.connect)(function(e){var t=e.model,n=t.current,r=t.projects,a=e.container.previewSetting,o=a.toolbarActiveItem,i=Yo(r,n.projectCid),c=MB.isMobile()||MB.isEmbedded();return{isLayerActive:o===St.b,isCommentActive:o===St.a,previewSetting:a,isProjectFromOtherFreeUser:Jo(i,n.userId),isLite:c,project:i}})(Vo);n.d(t,"c",function(){return $o}),n.d(t,"a",function(){return Qo}),n.d(t,"b",function(){return Xn});var $o={layerSaga:mt,sliceSaga:h,artboardsSaga:x}},qOCw:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"e",function(){return p}),n.d(t,"b",function(){return f}),n.d(t,"d",function(){return m}),n.d(t,"g",function(){return v}),n.d(t,"c",function(){return y}),n.d(t,"f",function(){return E});n("eTac");var r=n("RIqP"),a=n.n(r),o=n("wig9"),i=n.n(o),c=n("7tbW"),s=n.n(c),l=n("XrEr"),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Number(parseFloat((1/t*e).toFixed(2)))+n},d=/<[^>]+>/gi,p=function(e){return!!e&&e.replace(d,"")},f=function(e){var t=e.width,n=e.height,r=e.left,a=e.top,o=e.opacity,i=e.borderRadius,c=e.rotation,s=e.ratio,l=e.unit,d=u(r,s,l),p=u(a,s,l),f=u(t,s,l),m=u(n,s,l),v=i?String(i).split(",").map(function(e){return u(parseInt(e)||0,s,l)}).join(" "):null,g=h(c)?null:"".concat(c,"°");return{adapterLeft:d,adapterTop:p,adapterWidth:f,adapterHeight:m,radius:v,opacity:h(o)?null:"".concat(o,"%"),rotate:g}},h=function(e){return null===e||isNaN(e)||0===e},m=function(e){var t=e.lineHeight,n=e.letterSpacing,r=e.unit,a=e.ratio;return{lineHeight:t=h(t)?null:u(t,a,r),letterSpacing:n=h(n)?null:u(n,a,r)}},v=function(e){var t=[],n=[];return e.forEach(function(e){var r=e.bg_colors,o=void 0===r?[]:r,i=e.borders,c=void 0===i?[]:i,s=e.text_styles,u=void 0===s?[]:s,d=u.length>0?u[0]:{},p=d.color,f=d.font_face,h=[];o.length&&(h=o.map(function(e){var t=e.value,n=e.type,r=void 0===n?"color":n,a=e.gradient,o=Object(l.c)(t);return"color"===r?o:w(a)})),h=g(h);var m=[];c.length&&(m=c.map(function(e){var t=e.color;return Object(l.c)(t)})),m=g(m);var v=p&&Object(l.b)(Object(l.e)(p),"rgba");!t.includes(v)&&t.push(v),!n.includes(f)&&n.push(f),t=!(t=!t.includes(h)&&a()(t).concat(a()(h))).includes(m)&&a()(t).concat(a()(m))}),{screenColor:s()(i()(t)).slice(0,14)||[],globalText:i()(n)}},g=function(e){var t;return(t=[]).concat.apply(t,a()(e))},y=function(e){var t,n,r,a,o,i,c,s,d,p=e.textStyles,f=e.borders,h=e.background,m=e.shadows,v=e.innerShadows,g=(e.colorUnit,e.unit),y=e.ratio;if(p.length){var w=p[0],E=w.color,S=w.font_size,C=w.font_face;t=E&&Object(l.c)(E),n=u(S,y,g),r=C}if(f.length){var x=f[0],_=x.position,k=void 0===_?"inside":_,M=x.color,T=x.thickness;a=u(T,y,g),i=k,M&&(o=Object(l.c)(M))}return h.length&&(c=Object(l.c)(h[0].value)),m.length&&(s=b(m,g,y)),v.length&&(d=b(v,g,y,!0),s="".concat(s,", ").concat(d)),{fontFamily:r,fontSize:n,color:t,borderWidth:a,borderColor:o,borderPosition:i,backgroundColor:c,boxShadow:s}},b=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.length;return e.reduce(function(e,o,i){var c=o.color,s=o.offset_x,d=void 0===s?0:s,p=o.offset_y,f=void 0===p?0:p,h=o.blur_radius,m=void 0===h?0:h,v=o.spread,g=void 0===v?0:v,y=u(d,n,t),b=u(f,n,t),w=u(m,n,t);g=u(g,n,t),c=Object(l.c)(c);var E=i<a-1?", ":"",S=r?"inset ":"";return e.concat("".concat(S).concat(y," ").concat(b," ").concat(w," ").concat(g," ").concat(c).concat(E))},"")},w=function(e){return e&&e.color_stops?e.color_stops.map(function(e){var t=e.color;return Object(l.c)(t)}):l.a},E=function(e){switch(e){case"swift":return"pt";case"android":return"dp";default:return"px"}}},qZTm:function(e,t,n){var r=n("kekF")(Object.keys,Object);e.exports=r},quyA:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},rEGp:function(e,t){e.exports=function(){return[]}},rWXM:function(e,t,n){"use strict";e.exports=function(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}},rXnp:function(e,t,n){},rbsZ:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return h}),n.d(t,"c",function(){return m});var r=n("q1tI"),a=n.n(r),o=n("17x9"),i=n.n(o),c=n("/Q2I"),s=n("0L8M"),l=(n("1mjR"),window),u=l.MB,d=l.I18N,p=function(){return location.assign("/pricing?next=".concat(location.href))},f=function(e){var t=e.reason,n=e.data,r=e.shouldShowConfirm,o=e.onClose;return a.a.createElement(c.a,{isOpen:!0,className:"renew-modal",title:d.renew_prompt.title,onConfirm:r?p:null,confirmText:r?d.renew_now:null,onClose:o},a.a.createElement("p",null,h(t,n)))};f.propTypes={reason:i.a.string,data:i.a.object,shouldShowConfirm:i.a.bool,onClose:i.a.func};var h=function(e,t){var n=t.role,r=t.plan,a=t.storage,o=void 0===a?"":a,i=t.format,c=void 0===i?"":i,s=t.collaborators,l=void 0===s?"":s;return(d.renew_prompt["".concat(n,"_plan")]+d.renew_prompt[e]+d.renew_prompt["".concat(n,"_upgrade")]).replace("{plan}",d[r||u.currentProject.owner_plan]).replace("{storage}",o).replace("{format}",c).replace("{collaborators}",l)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.ga&&window.ga("ec:setAction","checkout",{step:1,option:e}),window.ga&&window.ga("send","event","goal","弹出了续费提示"),Object(s.a)(f,{reason:e,data:t,shouldShowConfirm:"user"===t.role})}},rtgd:function(e,t,n){e.exports={"preview-toolbar":"_3kKqNauE-PaVHPIZg_7k-D"}},rwIS:function(e,t,n){e.exports={"guide-button":"_31FtTxh_wpy1_6DRt1eNdq"}},sEfC:function(e,t,n){var r=n("GoyQ"),a=n("QIyF"),o=n("tLB3"),i="Expected a function",c=Math.max,s=Math.min;e.exports=function(e,t,n){var l,u,d,p,f,h,m=0,v=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError(i);function b(t){var n=l,r=u;return l=u=void 0,m=t,p=e.apply(r,n)}function w(e){var n=e-h;return void 0===h||n>=t||n<0||g&&e-m>=d}function E(){var e=a();if(w(e))return S(e);f=setTimeout(E,function(e){var n=t-(e-h);return g?s(n,d-(e-m)):n}(e))}function S(e){return f=void 0,y&&l?b(e):(l=u=void 0,p)}function C(){var e=a(),n=w(e);if(l=arguments,u=this,h=e,n){if(void 0===f)return function(e){return m=e,f=setTimeout(E,t),v?b(e):p}(h);if(g)return f=setTimeout(E,t),b(h)}return void 0===f&&(f=setTimeout(E,t)),p}return t=o(t)||0,r(n)&&(v=!!n.leading,d=(g="maxWait"in n)?c(o(n.maxWait)||0,t):d,y="trailing"in n?!!n.trailing:y),C.cancel=function(){void 0!==f&&clearTimeout(f),m=0,l=h=u=f=void 0},C.flush=function(){return void 0===f?p:S(a())},C}},seXi:function(e,t,n){var r=n("qZTm"),a=1,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,c,s){var l=n&a,u=r(e),d=u.length;if(d!=r(t).length&&!l)return!1;for(var p=d;p--;){var f=u[p];if(!(l?f in t:o.call(t,f)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var m=!0;s.set(e,t),s.set(t,e);for(var v=l;++p<d;){var g=e[f=u[p]],y=t[f];if(i)var b=l?i(y,g,f,t,e,s):i(g,y,f,e,t,s);if(!(void 0===b?g===y||c(g,y,n,i,s):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var w=e.constructor,E=t.constructor;w!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof E&&E instanceof E)&&(m=!1)}return s.delete(e),s.delete(t),m}},sgoq:function(e,t,n){var r=n("asDA"),a=n("TKrE"),o=n("6nK8"),i=RegExp("['’]","g");e.exports=function(e){return function(t){return r(o(a(t).replace(i,"")),e,"")}}},"t5S/":function(e,t,n){var r=n("87hQ"),a=n("RNpe"),o=n("kUAk"),i=n("/MKq");function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e,t){try{var n=o[e](t),i=n.value}catch(e){return void a(e)}n.done?r(i):Promise.resolve(i).then(c,s)}function c(e){i("next",e)}function s(e){i("throw",e)}c()})}}var s=function(){var e=c(regeneratorRuntime.mark(function e(t){var n,r,a,o,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.element,r=t.width,a=t.height,o=t.skipHeavyRender,i=void 0!==o&&o,n){e.next=3;break}throw new Error("invalid element: ".concat(n));case 3:if(r=parseInt(r||n.style.width.endsWith("px")&&n.style.width||n.offsetWidth),a=parseInt(a||n.style.height.endsWith("px")&&n.style.height||n.offsetHeight),r&&a){e.next=7;break}throw new Error("can not get output size: width: ".concat(r,", height: ").concat(a));case 7:return c=(new window.XMLSerializer).serializeToString(n).split("\n"),e.abrupt("return",l({htmlSourceList:c,width:r,height:a,skipHeavyRender:i}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.createSnapshotFromElement=s;var l=function(){var e=c(regeneratorRuntime.mark(function e(t){var n,c,s,l,d,p,f,h,m,v,g,y,b,w,E,S,C,x,_,k,M,T,N,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.htmlSourceList,c=t.width,s=t.height,l=t.skipHeavyRender,d=void 0!==l&&l,Array.isArray(n)){e.next=3;break}throw new Error("invalid htmlSourceList: ".concat(n));case 3:if(c&&s){e.next=5;break}throw new Error("invalid size: width: ".concat(c,", height: ").concat(s));case 5:p=(0,o.createHTMLFragCollector)(),n.forEach(function(e){return p.collect(e,"")}),f=(0,o.createCSSFragCollector)(),h=Array.from(document.getElementsByTagName("link")).map(function(e){return"stylesheet"===e.rel&&e.href}).filter(function(e){return e}),m=!0,v=!1,g=void 0,e.prev=12,y=h[Symbol.iterator]();case 14:if(m=(b=y.next()).done){e.next=25;break}return w=b.value,e.t0=f,e.next=19,(0,r.fetchTextWithCache)(w);case 19:e.t1=e.sent,e.t2=w,e.t0.collect.call(e.t0,e.t1,e.t2);case 22:m=!0,e.next=14;break;case 25:e.next=31;break;case 27:e.prev=27,e.t3=e.catch(12),v=!0,g=e.t3;case 31:e.prev=31,e.prev=32,m||null==y.return||y.return();case 34:if(e.prev=34,!v){e.next=37;break}throw g;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return Array.from(document.getElementsByTagName("style")).map(function(e){return f.collect(e.innerHTML,"")}),N=function(){return{htmlString:E,cssString:S,domString:C,svgString:x,svgDataUrl:_,imageElement:k,canvasElement:M,pngDataUrl:T}},e.prev=41,e.t4=i.prepareHTMLString,e.next=45,(0,a.convertFragListWithUrlMap)(p.getOutput());case 45:return e.t5=e.sent,e.next=48,(0,e.t4)(e.t5);case 48:return E=e.sent,e.t6=i.prepareCSSString,e.next=52,(0,a.convertFragListWithUrlMap)(f.getOutput());case 52:return e.t7=e.sent,e.next=55,(0,e.t6)(e.t7);case 55:return S=e.sent,C="".concat(S,"\n").concat(E),e.next=59,(0,i.prepareSVGString)({domString:C,width:c,height:s});case 59:if(x=e.sent,_="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(x)),d){e.next=68;break}return e.next=64,u({svgDataUrl:_,width:c,height:s});case 64:O=e.sent,k=O.imageElement,M=O.canvasElement,T=O.pngDataUrl;case 68:e.next=73;break;case 70:e.prev=70,e.t8=e.catch(41);case 73:return e.abrupt("return",N());case 74:case"end":return e.stop()}},e,this,[[12,27,31,39],[32,,34,38],[41,70]])}));return function(t){return e.apply(this,arguments)}}();t.createSnapshotFromHTMLSourceList=l;var u=function(){var e=c(regeneratorRuntime.mark(function e(t){var n,r,a,o,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.svgDataUrl,r=t.width,a=t.height,e.next=3,(0,i.prepareImageElement)({svgDataUrl:n,width:r,height:a});case 3:return o=e.sent,e.next=6,(0,i.prepareCanvasElement)({imageElement:o,width:r,height:a});case 6:return c=e.sent,s=c.toDataURL(),e.abrupt("return",{imageElement:o,canvasElement:c,pngDataUrl:s});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();t.renderPngDataUrlFromSvgDataUrl=u},tLB3:function(e,t){e.exports=function(e){return e}},tiHd:function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d});var r=n("eTac"),a=n.n(r),o=n("8fIB"),i=n.n(o),c=n("MVZn"),s=n.n(c),l=function(e){return{getState:function(){return e},setState:function(t){return e=s()({},e,t)}}},u=function(){var e=null,t=null;return{promise:new i.a(function(n,r){e=n,t=r}),resolve:function(){e&&e.apply(void 0,arguments),e=null,t=null},reject:function(){t&&t.apply(void 0,arguments),e=null,t=null}}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){},t=new a.a,n=i.a.resolve("QUEUE_HEAD");return{pushTask:function(r){var a=u(),o=a.promise,c=a.resolve,s=a.reject;return n=n.then(function(){return i.a.resolve(r()).then(c,s).catch(e).then(function(){return t.delete(r)})}),t.add(r),o},resetTaskQueue:function(){t=new a.a,n=i.a.resolve("QUEUE_HEAD")},getTaskQueueSize:function(){return t.size}}}},tpxX:function(e,t,n){var r=n("jl5L")("round");e.exports=r},tw9P:function(e,t,n){"use strict";n.d(t,"i",function(){return C}),n.d(t,"g",function(){return x}),n.d(t,"b",function(){return _}),n.d(t,"d",function(){return M}),n.d(t,"f",function(){return T}),n.d(t,"e",function(){return N}),n.d(t,"h",function(){return O}),n.d(t,"a",function(){return j}),n.d(t,"j",function(){return I}),n.d(t,"c",function(){return L});var r=n("Ev6p"),a=n("q09E"),o=Object(r.u)("IO"),i="TAKE",c="PUT",s="ALL",l="RACE",u="CALL",d="CPS",p="FORK",f="JOIN",h="CANCEL",m="SELECT",v="ACTION_CHANNEL",g="CANCELLED",y="FLUSH",b="GET_CONTEXT",w="SET_CONTEXT",E="\n(HINT: if you are getting this errors in tests, consider using createMockTask from redux-saga/utils)",S=function(e,t){var n;return(n={})[o]=!0,n[e]=t,n};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*";if(arguments.length&&Object(r.g)(arguments[0],r.n.notUndef,"take(patternOrChannel): patternOrChannel is undefined"),r.n.pattern(e))return S(i,{pattern:e});if(r.n.channel(e))return S(i,{channel:e});throw new Error("take(patternOrChannel): argument "+String(e)+" is not valid channel or a valid pattern")}C.maybe=function(){var e=C.apply(void 0,arguments);return e[i].maybe=!0,e};C.maybe;function x(e,t){return arguments.length>1?(Object(r.g)(e,r.n.notUndef,"put(channel, action): argument channel is undefined"),Object(r.g)(e,r.n.channel,"put(channel, action): argument "+e+" is not a valid channel"),Object(r.g)(t,r.n.notUndef,"put(channel, action): argument action is undefined")):(Object(r.g)(e,r.n.notUndef,"put(action): argument action is undefined"),t=e,e=null),S(c,{channel:e,action:t})}function _(e){return S(s,e)}function k(e,t,n){Object(r.g)(t,r.n.notUndef,e+": argument fn is undefined");var a=null;if(r.n.array(t)){var o=t;a=o[0],t=o[1]}else if(t.fn){var i=t;a=i.context,t=i.fn}return a&&r.n.string(t)&&r.n.func(a[t])&&(t=a[t]),Object(r.g)(t,r.n.func,e+": argument "+t+" is not a function"),{context:a,fn:t,args:n}}function M(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return S(u,k("call",e,n))}function T(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return S(p,k("fork",e,n))}function N(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length>1)return _(t.map(function(e){return N(e)}));var a=t[0];return 1===t.length&&(Object(r.g)(a,r.n.notUndef,"cancel(task): argument task is undefined"),Object(r.g)(a,r.n.task,"cancel(task): argument "+a+" is not a valid Task object "+E)),S(h,a||r.d)}function O(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return 0===arguments.length?e=r.l:(Object(r.g)(e,r.n.notUndef,"select(selector,[...]): argument selector is undefined"),Object(r.g)(e,r.n.func,"select(selector,[...]): argument "+e+" is not a function")),S(m,{selector:e,args:n})}function j(e,t){return Object(r.g)(e,r.n.notUndef,"actionChannel(pattern,...): argument pattern is undefined"),arguments.length>1&&(Object(r.g)(t,r.n.notUndef,"actionChannel(pattern, buffer): argument buffer is undefined"),Object(r.g)(t,r.n.buffer,"actionChannel(pattern, buffer): argument "+t+" is not a valid buffer")),S(v,{pattern:e,buffer:t})}function I(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return T.apply(void 0,[a.a,e,t].concat(r))}x.resolve=function(){var e=x.apply(void 0,arguments);return e[c].resolve=!0,e},x.sync=Object(r.k)(x.resolve,Object(r.w)("put.sync","put.resolve"));var R=function(e){return function(t){return t&&t[o]&&t[e]}},L={take:R(i),put:R(c),all:R(s),race:R(l),call:R(u),cps:R(d),fork:R(p),join:R(f),cancel:R(h),select:R(m),actionChannel:R(v),cancelled:R(g),flush:R(y),getContext:R(b),setContext:R(w)}},u6S6:function(e,t,n){var r=n("6acW"),a=n("sgoq")(function(e,t,n){return t=t.toLowerCase(),e+(n?r(t):t)});e.exports=a},uavl:function(e,t,n){"use strict";var r=n("MVZn"),a=n.n(r),o=n("PJYZ"),i=n.n(o),c=n("lSNA"),s=n.n(c),l=n("lwsE"),u=n.n(l),d=n("7W2i"),p=n.n(d),f=n("W8MJ"),h=n.n(f),m=n("a1gu"),v=n.n(m),g=n("Nsbk"),y=n.n(g),b=n("17x9"),w=n.n(b),E=n("q1tI"),S=n.n(E),C='<svg xmlns="http://www.w3.org/2000/svg" width="17" height="12"><path d="M1.25 6.5h1a1 1 0 0 1 1 1V10a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V7.5a1 1 0 0 1 1-1zM5.75 5h1a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1zm4.5-2h1a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm4.5-2h1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z" fill-rule="evenodd"/></svg>',x='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="12"><path d="M8.007 2.787a8.64 8.64 0 0 1 5.953 2.379c.12.118.314.116.433-.004l1.156-1.166a.322.322 0 0 0-.003-.456 10.897 10.897 0 0 0-15.08 0 .322.322 0 0 0-.003.456L1.62 5.162c.119.12.312.122.433.004a8.641 8.641 0 0 1 5.954-2.379zm0 3.796c1.217 0 2.391.452 3.294 1.27a.31.31 0 0 0 .433-.006l1.155-1.167a.322.322 0 0 0-.005-.459 7.16 7.16 0 0 0-9.752 0 .322.322 0 0 0-.005.46l1.155 1.166a.31.31 0 0 0 .433.006 4.907 4.907 0 0 1 3.292-1.27zm2.219 2.784a.314.314 0 0 0-.01-.457 3.422 3.422 0 0 0-4.42 0 .314.314 0 0 0-.009.457l1.998 2.016a.312.312 0 0 0 .443 0l1.998-2.016z" fill-rule="nonzero"/></svg>',_='<svg xmlns="http://www.w3.org/2000/svg" width="25" height="12"><path d="M2.667 1.333C1.747 1.333 1 2.08 1 3v6c0 .92.746 1.667 1.667 1.667h16.666C20.253 10.667 21 9.92 21 9V3c0-.92-.746-1.667-1.667-1.667H2.667zm0-1h16.666A2.667 2.667 0 0 1 22 3v6a2.667 2.667 0 0 1-2.667 2.667H2.667A2.667 2.667 0 0 1 0 9V3A2.667 2.667 0 0 1 2.667.333z" opacity=".35"/><path d="M23 4v4a2.17 2.17 0 0 0 0-4" opacity=".4"/><rect x="2" y="2.333" width="18" height="7.333" rx="1.333"/></svg>',k=/^(fa|md|mb|ci)-/;function M(e){var t=k.test(e.icon),n=(e.icon||"").replace(k,""),r=t?e.icon.split("-")[0]:"fa",a="".concat("mb"===r?"icon":r,"-").concat(n),o="".concat(r," ").concat(a),i={fontSize:"".concat(e.iS(),"px")};return S.a.createElement("span",{className:"icon ".concat(o),style:i},"md"===r?n:null)}function T(e,t){switch(e.name){case"text_field":case"nav_bar":case"navigation_bar":return S.a.createElement(O,{widget:e});case"mtext_input":return S.a.createElement(j,{widget:e});case"mtextarea":return S.a.createElement(I,{widget:e});case"mcheckbox2":return S.a.createElement(R,{widget:e});case"mfile_input":return S.a.createElement(L,{widget:e});case"mradiobutton":return S.a.createElement(D,{widget:e});case"mselect":return S.a.createElement(A,{widget:e});case"button":return S.a.createElement(P,{widget:e});case"hr":return S.a.createElement(B,{widget:e});case"ve":return S.a.createElement(U,{widget:e});case"triangleb":return S.a.createElement(F,{widget:e});case"triangletl":return S.a.createElement(z,{widget:e});case"lr":case"tab_bar":case"rectangle":return S.a.createElement(W,{widget:e});case"image_view":return S.a.createElement(V,{widget:e});case"webpage":return S.a.createElement(q,{widget:e,isPreview:t});case"video_view":return S.a.createElement(H,{widget:e});case"keyboard":return S.a.createElement(X,{widget:e});case"iphone_keyboard":return S.a.createElement(Z,{widget:e});case"ipad_keyboard":return S.a.createElement(G,{widget:e});case"android_keyboard":return S.a.createElement(K,{widget:e});case"map_view":return S.a.createElement(Y,{widget:e});case"search_bar":return S.a.createElement(J,{widget:e});case"status_bar":return S.a.createElement(Q,{widget:e});case"ios_status_bar":return S.a.createElement($,{widget:e});case"iphone_x_status_bar":return S.a.createElement(ee,{widget:e});case"android_status_bar":return S.a.createElement(te,{widget:e});case"switch":case"ios_switch":return S.a.createElement(ne,{widget:e});case"android_switch":return S.a.createElement(re,{widget:e});case"ios_check":return S.a.createElement(ae,{widget:e});case"android_check":return S.a.createElement(oe,{widget:e});case"android_radio":return S.a.createElement(ie,{widget:e});case"tab_item":return S.a.createElement(ce,{widget:e});case"pg":return S.a.createElement(se,{widget:e});case"icon_button":return S.a.createElement(le,{widget:e});case"label":return S.a.createElement(ue,{widget:e});case"circle_rect":case"rounded_rect":case"text_view":return S.a.createElement(de,{widget:e});case"sticky":return S.a.createElement(pe,{widget:e});case"mtooltip":return S.a.createElement(fe,{widget:e});default:return null}}n.d(t,"a",function(){return T});var N=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){return null}}]),p()(t,e),t}(E.PureComponent);N.propTypes={widget:w.a.object};var O=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("span",{className:"text"},e.text)}}]),p()(t,e),t}(N),j=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("input",{type:e.input_type,placeholder:e.text})}}]),p()(t,e),t}(N),I=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t=Math.round(e.padding*e.s()/100),n=Math.round(t-(e.lh-e.fs)/2);n<0&&(n=0);var r={padding:"".concat(n,"px ").concat(t,"px")};return S.a.createElement("textarea",{style:r,placeholder:e.text})}}]),p()(t,e),t}(N),R=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("input",{type:"checkbox",checked:e.checked})}}]),p()(t,e),t}(N),L=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){return S.a.createElement("input",{type:"file"})}}]),p()(t,e),t}(N),D=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("input",{type:"radio",name:e.gid,checked:e.checked})}}]),p()(t,e),t}(N),A=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("select",null,e.text.split(/\n/).map(function(e,t){return S.a.createElement("option",{key:e+t},e)}))}}]),p()(t,e),t}(N),P=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("div",{className:"button-wrapper"},e.icon?M(e):null,S.a.createElement("span",{className:"text"},e.text))}}]),p()(t,e),t}(N),B=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.h()-10*e.s()/100;return t<1&&(t=1),S.a.createElement("span",{style:{borderTopWidth:t}})}}]),p()(t,e),t}(N),U=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.w()-10*e.s()/100;return t<1&&(t=1),S.a.createElement("span",{style:{borderLeftWidth:t}})}}]),p()(t,e),t}(N),F=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t="M "+[[e.width/2,0],[e.width,e.height],[0,e.height]].map(function(e){return e.join(" ")}).join(" L ")+" Z";return S.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},S.a.createElement("path",{d:t}))}}]),p()(t,e),t}(N),z=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t="M "+[[0,0],[e.width,0],[0,e.height]].map(function(e){return e.join(" ")}).join(" L ")+" Z";return S.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},S.a.createElement("path",{d:t}))}}]),p()(t,e),t}(N),W=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){return S.a.createElement("span",null)}}]),p()(t,e),t}(N),q=function(e){function t(){var e,n,r;u()(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return v()(r,(n=r=v()(this,(e=y()(t)).call.apply(e,[this].concat(o))),s()(i()(i()(r)),"setElemRef",function(e){return r.$elem=e}),n))}return h()(t,[{key:"componentDidUpdate",value:function(e,t){this.props.isPreview&&this.props.widget.text!==e.widget.text&&this.updateIframeURL()}},{key:"updateIframeURL",value:function(){var e=this.props.widget.text.replace(/&amp;/g,"&");this.$elem.setAttribute("src",e)}},{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("div",{className:"webpage-wrapper"},S.a.createElement("span",{className:"text"},e.text),S.a.createElement("p",{className:"notice"},I18N.https_only),S.a.createElement("iframe",{ref:this.setElemRef,className:"iframe"}))}}]),p()(t,e),t}(N),H=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){return S.a.createElement("span",null,S.a.createElement("i",{className:"fa fa-play-circle-o"}))}}]),p()(t,e),t}(N),V=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t="";if(e.image)if(["a","i"].includes(e.image[0])&&-1===e.image.indexOf("images")){var n=Asset.find(e.image);n&&(n.raw||n.image)&&(t="".concat(n.image||n.raw))}else t=e.image;var r={display:t?"none":"flex",backgroundColor:e.bg},a={display:t?"block":"none",height:e.p?"auto":"100%",filter:e.filter.trim()?e.filter.trim():""};return S.a.createElement("div",{className:"image-wrapper"},S.a.createElement("span",{style:r},S.a.createElement("i",{className:"icon-widget-img"})),S.a.createElement("div",{className:"wrapper"},S.a.createElement("img",{src:t,draggable:!1,style:a})))}}]),p()(t,e),t}(N),X=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t=MB.project().device,n=e.numeric?"n":"r",r=e.cs().orientation,a="/images/keyboards/".concat(t,"_").concat(n,"_").concat(r,".png");return S.a.createElement("img",{src:a,className:"keyboard-img",alt:"keyboard",draggable:!1})}}]),p()(t,e),t}(N),Z=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.numeric?"n":"r",n=e.cs().orientation,r="/images/keyboards/iphone_".concat(t,"_").concat(n,".png");return S.a.createElement("img",{src:r,className:"keyboard-img",alt:"keyboard",draggable:!1})}}]),p()(t,e),t}(N),G=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.numeric?"n":"r",n=e.cs().orientation,r="/images/keyboards/ipad_".concat(t,"_").concat(n,".png");return S.a.createElement("img",{src:r,className:"keyboard-img",alt:"keyboard",draggable:!1})}}]),p()(t,e),t}(N),K=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.numeric?"n":"r",n=e.cs().orientation,r="/images/keyboards/android_".concat(t,"_").concat(n,".png");return S.a.createElement("img",{src:r,className:"keyboard-img",alt:"keyboard",draggable:!1})}}]),p()(t,e),t}(N),Y=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){return S.a.createElement("div",{className:"image"},S.a.createElement("img",{draggable:!1,src:MB.staticMap()}))}}]),p()(t,e),t}(N),J=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("div",null,S.a.createElement("div",{className:"text_edit"},S.a.createElement("input",{type:"text",placeholder:e.text})),S.a.createElement("i",{className:"fa fa-search"}))}}]),p()(t,e),t}(N),Q=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.tc;return S.a.createElement("div",null,S.a.createElement("div",{className:"signal",style:{color:t}},S.a.createElement("div",{className:"ball"}),S.a.createElement("div",{className:"ball"}),S.a.createElement("div",{className:"ball"}),S.a.createElement("div",{className:"ball"}),S.a.createElement("div",{className:"ball"})),S.a.createElement("div",{className:"carrier"},S.a.createElement("span",{className:"text",dangerouslySetInnerHTML:{__html:e.text}})),S.a.createElement("div",{className:"time"},"12:00",S.a.createElement("span",{className:"meridian"}," AM")),S.a.createElement("div",{className:"wifi md"},"wifi"),S.a.createElement("div",{className:"battery"},S.a.createElement("div",{className:"body",style:{borderColor:t}},S.a.createElement("div",{className:"inner",style:{backgroundColor:t}})),S.a.createElement("div",{className:"head",style:{backgroundColor:t}})))}}]),p()(t,e),t}(N),$=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget.tc;return S.a.createElement("div",{className:"iOS-StatusBar",style:{color:e}},S.a.createElement("div",{className:"StatusBarSignal",dangerouslySetInnerHTML:{__html:C}}),S.a.createElement("div",{className:"StatusBarWifi",dangerouslySetInnerHTML:{__html:x}}),S.a.createElement("div",{className:"StatusBarTime"},"12:00"),S.a.createElement("div",{className:"StatusBarBattery",dangerouslySetInnerHTML:{__html:_}}))}}]),p()(t,e),t}(N),ee=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget.tc;return S.a.createElement("div",{className:"iPhoneX-StatusBar",style:{color:e}},S.a.createElement("div",{className:"StatusBarTime"},"12:00"),S.a.createElement("div",{className:"StatusBarSignal",dangerouslySetInnerHTML:{__html:C}}),S.a.createElement("div",{className:"StatusBarWifi",dangerouslySetInnerHTML:{__html:x}}),S.a.createElement("div",{className:"StatusBarBattery",dangerouslySetInnerHTML:{__html:_}}))}}]),p()(t,e),t}(N),te=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget.tc;return S.a.createElement("div",{className:"Android-StatusBar",style:{color:e}},S.a.createElement("div",{className:"StatusBarWifi icon md"},"signal_wifi_4_bar"),S.a.createElement("div",{className:"StatusBarSignal icon md"},"signal_cellular_4_bar"),S.a.createElement("div",{className:"StatusBarBattery icon md"},"battery_full"),S.a.createElement("div",{className:"StatusBarTime"},"12:00"))}}]),p()(t,e),t}(N),ne=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("label",{className:"iOS-Switch"},S.a.createElement("input",{key:e.screenstate_cid+e.checked,type:"checkbox",defaultChecked:e.checked}),S.a.createElement("span",{className:"CheckState"}))}}]),p()(t,e),t}(N),re=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("label",{className:"Android-Switch"},S.a.createElement("input",{key:e.screenstate_cid+e.checked,type:"checkbox",defaultChecked:e.checked}),S.a.createElement("span",{className:"CheckState"}))}}]),p()(t,e),t}(N),ae=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("label",{className:"iOS-Check"},S.a.createElement("input",{key:e.screenstate_cid+e.checked,type:"checkbox",defaultChecked:e.checked}),S.a.createElement("span",{className:"CheckState"},S.a.createElement("svg",{width:"13",height:"8",viewBox:"0 0 13 8"},S.a.createElement("path",{d:"M1 4.5L4.5 8l8-8"}))))}}]),p()(t,e),t}(N),oe=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("label",{className:"Android-Check"},S.a.createElement("input",{key:e.screenstate_cid+e.checked,type:"checkbox",defaultChecked:e.checked}),S.a.createElement("span",{className:"CheckState"},S.a.createElement("svg",{width:"14",height:"10",viewBox:"0 0 14 10"},S.a.createElement("path",{d:"M5 10L0 5.192l1.4-1.346L5 7.308 12.6 0 14 1.346"}))))}}]),p()(t,e),t}(N),ie=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("label",{className:"Android-Radio"},S.a.createElement("input",{key:e.screenstate_cid+e.checked,type:"radio",name:e.gid,defaultChecked:e.checked}),S.a.createElement("span",{className:"CheckState"}))}}]),p()(t,e),t}(N),ce=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget;return S.a.createElement("div",{className:"wrapper"},M(e),S.a.createElement("span",{className:"text"},e.text))}}]),p()(t,e),t}(N),se=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t=Link.find(e.link_cids),n=t?t.gesture:"tap";return S.a.createElement("i",{className:"icon-gesture-".concat(n)})}}]),p()(t,e),t}(N),le=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){return M(this.props.widget)}}]),p()(t,e),t}(N),ue=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget.text.replace(/<\/?p>/g,"");return S.a.createElement("p",{dangerouslySetInnerHTML:{__html:e}})}}]),p()(t,e),t}(N),de=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t={padding:e.paddingS()};return S.a.createElement("div",{className:"text",style:t,dangerouslySetInnerHTML:{__html:MB.v.multiline(e.text)}})}}]),p()(t,e),t}(N),pe=function(e){function t(){var e,n,r;u()(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return v()(r,(n=r=v()(this,(e=y()(t)).call.apply(e,[this].concat(o))),s()(i()(i()(r)),"handleDown",function(e){if(!MB.f.inPreview&&!MB.f.inSharing){e.stopPropagation(),MB.f.isDragging=!0;var t=r.props.widget,n=e.clientX,a=e.clientY,o=t.slt,i=t.slw,c=function(e){var c=e.clientX-n,s=e.clientY-a,l=c/MB.scale()*100,u=s/MB.scale()*100;t.slt=o+u+6,t.l()>160?t.slw=i-l:t.slw=i+l,r.forceUpdate()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",function e(){MB.f.isDragging=!1,t.lsave(),MB.action("update:widgets",{widgets:[t]}),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",e)})}}),n))}return h()(t,[{key:"render",value:function(){var e=this.props.widget,t=e.l()<160,n=e.bg,r=e.slt;e.slt<20?r=20:e.slt>e.height-20&&(r=e.height-20);var a=(e.slt-r)*e.s()/100,o={top:e.slt<=e.top-20?a:"",height:Math.abs(a)},i={top:a},c={top:r*e.s()/100,width:e.slw*e.s()/100,borderColor:n},s={left:t?"100%":"",right:t?"":"100%",backgroundColor:n},l={backgroundImage:"linear-gradient(135deg, ".concat(n," 25%, transparent 25%, transparent 100%), linear-gradient(45deg, transparent 75%, ").concat(n," 75%, ").concat(n," 100%)")};return S.a.createElement("div",null,S.a.createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:MB.v.multiline(e.text)}}),S.a.createElement("div",{className:"sideline",style:c},S.a.createElement("div",{className:"box",style:o}),S.a.createElement("div",{className:"line",style:i},S.a.createElement("div",{className:"arrow",style:s,onMouseDown:this.handleDown}))),S.a.createElement("div",{className:"sawtooth",style:l}))}}]),p()(t,e),t}(N),fe=function(e){function t(){return u()(this,t),v()(this,y()(t).apply(this,arguments))}return h()(t,[{key:"render",value:function(){var e,t,n=this.props.widget,r={top:"borderBottomColor",bottom:"borderTopColor",left:"borderRightColor",right:"borderLeftColor"}[n.tt_placement],o="top"==n.tt_placement||"bottom"==n.tt_placement,i={borderWidth:n.arrowSize(),left:o?n.ttOffset():"",top:o?"":n.ttOffset()},c=a()({},i,(e={},s()(e,n.tt_placement,0-n.arrowSize()),s()(e,r,n.bc||"#aaa"),e)),l=a()({},i,(t={},s()(t,n.tt_placement,0-n.arrowSize()+n.bS()),s()(t,r,n.bg||"white"),t)),u={padding:n.paddingS(),marginTop:n.text&&"middle"===n.va?0-n.textHeight()/2:""};return S.a.createElement("div",null,S.a.createElement("div",{className:"arrow1 arrow ".concat(n.tt_placement),style:c}),S.a.createElement("div",{className:"arrow2 arrow ".concat(n.tt_placement),style:l}),S.a.createElement("div",{className:"text",style:u,dangerouslySetInnerHTML:{__html:MB.v.multiline(n.text)}}))}}]),p()(t,e),t}(N)},udQi:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return l});var r=[],a=0;function o(e){try{c(),e()}finally{s()}}function i(e){r.push(e),a||(c(),l())}function c(){a++}function s(){a--}function l(){s();for(var e=void 0;!a&&void 0!==(e=r.shift());)o(e)}},ujtX:function(e,t,n){},upRB:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return i});var r=n("peh1"),a=(n("1iCU"),function(e){return e.container.common.scale}),o=Object(r.createSelector)([function(e){return e.model.projects},function(e){return e.model.current.projectCid}],function(e,t){return e.find(function(e){return e.cid===t})}),i=Object(r.createSelector)([function(e){return e.model.screens},function(e){return e.model.current.screenCid}],function(e,t){return e.find(function(e){return e.cid===t})})},"ut/Y":function(e,t,n){var r=n("ZCpW"),a=n("GDhZ"),o=n("zZ0H"),i=n("Z0cm"),c=n("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?a(e[0],e[1]):r(e):c(e)}},v8PR:function(e,t,n){},vpYg:function(e,t,n){"use strict";var r=["onAbort","onAnimationEnd","onAnimationIteration","onAnimationStart","onBlur","onCanPlay","onCanPlayThrough","onClick","onContextMenu","onCopy","onCut","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onFocus","onInput","onInvalid","onKeyDown","onKeyPress","onKeyUp","onLoad","onLoadedData","onLoadedMetadata","onLoadStart","onMouseDown","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onPaste","onPause","onPlay","onPlaying","onProgress","onRateChange","onReset","onScroll","onSeeked","onSeeking","onStalled","onSubmit","onSuspend","onTimeUpdate","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onTransitionEnd","onVolumeChange","onWaiting","onWheel"],a=["onAfterPrint","onBeforePrint","onBeforeUnload","onDeviceLight","onDeviceMotion","onDeviceOrientation","onDeviceProximity","onHashChange","onLanguageChange","onPopState","onRejectionHandled","onResize","onSelect","onStorage","onUnhandledRejection","onUnload","onUserProximity"],o=["onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp"];e.exports={allEvents:r.concat(a).concat(o),documentEvents:r.concat(o),windowEvents:a}},wCGR:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n("pVnL"),a=n.n(r),o=n("q1tI"),i=n.n(o),c=n("17x9"),s=n.n(c),l=n("Z0cm"),u=n.n(l),d={app:["项目","app"],team:["团队","team"],teamMember:["团队成员","team member"]},p={delete:["删除","delete"],leave:["退出","leave"],move:["移动","move"],duplicate:["复制","duplicate"]},f={actionConfirmation:[["您确定要","[VERB]","[NOUN]","[UGN]","吗？"],["Are you sure you want to ","[VERB]"," ","[NOUN]"," ","[UGN]"]],nounMap:d,verbMap:p},h=window.MBLocale,m=["zh-CN","en"].indexOf(h),v=function(e){return function(t,n){return function(e){return/^\[[A-Z_]+\]/.test(e)}(t)?(s=(c={pos:t,variableMap:e}).pos,l=c.variableMap,u=l.verb,f=l.noun,h=l.ugn,r="[VERB]"===s?p[u][m]:"[NOUN]"===s?d[f][m]:"[UGN]"===s?h:null,a=n,Object(o.isValidElement)(r)?i.a.cloneElement(r,{key:a}):r):t;var r,a,c,s,l,u,f,h}};function g(e){var t=e.name,n=e.variableMap,r=void 0===n?{}:n,a=f[t][m];return u()(a)?a.map(v(r)):a}function y(e){var t=e.variableMap,n=void 0===t?{}:t;return i.a.createElement(g,a()({name:"actionConfirmation"},{variableMap:n}))}g.propTypes={name:s.a.string.isRequired,variableMap:s.a.object},y.propTypes={variableMap:s.a.object}},"wF/u":function(e,t,n){var r=n("e5cp"),a=n("ExA7");e.exports=function e(t,n,o,i,c){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!=t&&n!=n:r(t,n,o,i,e,c))}},wJg7:function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var a=typeof e;return!!(t=null==t?n:t)&&("number"==a||"symbol"!=a&&r.test(e))&&e>-1&&e%1==0&&e<t}},wfO3:function(e,t,n){},wig9:function(e,t){e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r=0,a=[];++t<n;){var o=e[t];o&&(a[r++]=o)}return a}},wy8a:function(e,t,n){var r=n("KxBF");e.exports=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:r(e,t,n)}},xn7q:function(e,t,n){e.exports={previewPanelLayer:"_1440VIJ3r2SoiW8WAZ21xI",layerInfo:"_1auiNpZenxIHtuOt85xZWs"}},yLV6:function(e,t,n){var r;!function(a,o,i,c){"use strict";var s,l=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),d="function",p=Math.round,f=Math.abs,h=Date.now;function m(e,t,n){return setTimeout(S(e,n),t)}function v(e,t,n){return!!Array.isArray(e)&&(g(e,n[t],n),!0)}function g(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==c)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function y(e,t,n){var r="DEPRECATED METHOD: "+t+"\n"+n+" AT \n";return function(){var t=new Error("get-stack-trace"),n=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=a.console&&(a.console.warn||a.console.log);return o&&o.call(a.console,r,n),e.apply(this,arguments)}}s="function"!=typeof Object.assign?function(e){if(e===c||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==c&&null!==r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t}:Object.assign;var b=y(function(e,t,n){for(var r=Object.keys(t),a=0;a<r.length;)(!n||n&&e[r[a]]===c)&&(e[r[a]]=t[r[a]]),a++;return e},"extend","Use `assign`."),w=y(function(e,t){return b(e,t,!0)},"merge","Use `assign`.");function E(e,t,n){var r,a=t.prototype;(r=e.prototype=Object.create(a)).constructor=e,r._super=a,n&&s(r,n)}function S(e,t){return function(){return e.apply(t,arguments)}}function C(e,t){return typeof e==d?e.apply(t&&t[0]||c,t):e}function x(e,t){return e===c?t:e}function _(e,t,n){g(N(t),function(t){e.addEventListener(t,n,!1)})}function k(e,t,n){g(N(t),function(t){e.removeEventListener(t,n,!1)})}function M(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function T(e,t){return e.indexOf(t)>-1}function N(e){return e.trim().split(/\s+/g)}function O(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function j(e){return Array.prototype.slice.call(e,0)}function I(e,t,n){for(var r=[],a=[],o=0;o<e.length;){var i=t?e[o][t]:e[o];O(a,i)<0&&r.push(e[o]),a[o]=i,o++}return n&&(r=t?r.sort(function(e,n){return e[t]>n[t]}):r.sort()),r}function R(e,t){for(var n,r,a=t[0].toUpperCase()+t.slice(1),o=0;o<l.length;){if((r=(n=l[o])?n+a:t)in e)return r;o++}return c}var L=1;function D(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||a}var A="ontouchstart"in a,P=R(a,"PointerEvent")!==c,B=A&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),U=25,F=1,z=2,W=4,q=8,H=1,V=2,X=4,Z=8,G=16,K=V|X,Y=Z|G,J=K|Y,Q=["x","y"],$=["clientX","clientY"];function ee(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){C(e.options.enable,[e])&&n.handler(t)},this.init()}function te(e,t,n){var r=n.pointers.length,a=n.changedPointers.length,o=t&F&&r-a==0,i=t&(W|q)&&r-a==0;n.isFirst=!!o,n.isFinal=!!i,o&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,r=t.pointers,a=r.length;n.firstInput||(n.firstInput=ne(t));a>1&&!n.firstMultiple?n.firstMultiple=ne(t):1===a&&(n.firstMultiple=!1);var o=n.firstInput,i=n.firstMultiple,s=i?i.center:o.center,l=t.center=re(r);t.timeStamp=h(),t.deltaTime=t.timeStamp-o.timeStamp,t.angle=ce(s,l),t.distance=ie(s,l),function(e,t){var n=t.center,r=e.offsetDelta||{},a=e.prevDelta||{},o=e.prevInput||{};t.eventType!==F&&o.eventType!==W||(a=e.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y});t.deltaX=a.x+(n.x-r.x),t.deltaY=a.y+(n.y-r.y)}(n,t),t.offsetDirection=oe(t.deltaX,t.deltaY);var u=ae(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=f(u.x)>f(u.y)?u.x:u.y,t.scale=i?(d=i.pointers,p=r,ie(p[0],p[1],$)/ie(d[0],d[1],$)):1,t.rotation=i?function(e,t){return ce(t[1],t[0],$)+ce(e[1],e[0],$)}(i.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,r,a,o,i=e.lastInterval||t,s=t.timeStamp-i.timeStamp;if(t.eventType!=q&&(s>U||i.velocity===c)){var l=t.deltaX-i.deltaX,u=t.deltaY-i.deltaY,d=ae(s,l,u);r=d.x,a=d.y,n=f(d.x)>f(d.y)?d.x:d.y,o=oe(l,u),e.lastInterval=t}else n=i.velocity,r=i.velocityX,a=i.velocityY,o=i.direction;t.velocity=n,t.velocityX=r,t.velocityY=a,t.direction=o}(n,t);var d,p;var m=e.element;M(t.srcEvent.target,m)&&(m=t.srcEvent.target);t.target=m}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function ne(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:p(e.pointers[n].clientX),clientY:p(e.pointers[n].clientY)},n++;return{timeStamp:h(),pointers:t,center:re(t),deltaX:e.deltaX,deltaY:e.deltaY}}function re(e){var t=e.length;if(1===t)return{x:p(e[0].clientX),y:p(e[0].clientY)};for(var n=0,r=0,a=0;a<t;)n+=e[a].clientX,r+=e[a].clientY,a++;return{x:p(n/t),y:p(r/t)}}function ae(e,t,n){return{x:t/e||0,y:n/e||0}}function oe(e,t){return e===t?H:f(e)>=f(t)?e<0?V:X:t<0?Z:G}function ie(e,t,n){n||(n=Q);var r=t[n[0]]-e[n[0]],a=t[n[1]]-e[n[1]];return Math.sqrt(r*r+a*a)}function ce(e,t,n){n||(n=Q);var r=t[n[0]]-e[n[0]],a=t[n[1]]-e[n[1]];return 180*Math.atan2(a,r)/Math.PI}ee.prototype={handler:function(){},init:function(){this.evEl&&_(this.element,this.evEl,this.domHandler),this.evTarget&&_(this.target,this.evTarget,this.domHandler),this.evWin&&_(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(D(this.element),this.evWin,this.domHandler)}};var se={mousedown:F,mousemove:z,mouseup:W},le="mousedown",ue="mousemove mouseup";function de(){this.evEl=le,this.evWin=ue,this.pressed=!1,ee.apply(this,arguments)}E(de,ee,{handler:function(e){var t=se[e.type];t&F&&0===e.button&&(this.pressed=!0),t&z&&1!==e.which&&(t=W),this.pressed&&(t&W&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var pe={pointerdown:F,pointermove:z,pointerup:W,pointercancel:q,pointerout:q},fe={2:"touch",3:"pen",4:"mouse",5:"kinect"},he="pointerdown",me="pointermove pointerup pointercancel";function ve(){this.evEl=he,this.evWin=me,ee.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}a.MSPointerEvent&&!a.PointerEvent&&(he="MSPointerDown",me="MSPointerMove MSPointerUp MSPointerCancel"),E(ve,ee,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),a=pe[r],o=fe[e.pointerType]||e.pointerType,i="touch"==o,c=O(t,e.pointerId,"pointerId");a&F&&(0===e.button||i)?c<0&&(t.push(e),c=t.length-1):a&(W|q)&&(n=!0),c<0||(t[c]=e,this.callback(this.manager,a,{pointers:t,changedPointers:[e],pointerType:o,srcEvent:e}),n&&t.splice(c,1))}});var ge={touchstart:F,touchmove:z,touchend:W,touchcancel:q},ye="touchstart",be="touchstart touchmove touchend touchcancel";function we(){this.evTarget=ye,this.evWin=be,this.started=!1,ee.apply(this,arguments)}E(we,ee,{handler:function(e){var t=ge[e.type];if(t===F&&(this.started=!0),this.started){var n=function(e,t){var n=j(e.touches),r=j(e.changedTouches);t&(W|q)&&(n=I(n.concat(r),"identifier",!0));return[n,r]}.call(this,e,t);t&(W|q)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}}});var Ee={touchstart:F,touchmove:z,touchend:W,touchcancel:q},Se="touchstart touchmove touchend touchcancel";function Ce(){this.evTarget=Se,this.targetIds={},ee.apply(this,arguments)}E(Ce,ee,{handler:function(e){var t=Ee[e.type],n=function(e,t){var n=j(e.touches),r=this.targetIds;if(t&(F|z)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var a,o,i=j(e.changedTouches),c=[],s=this.target;if(o=n.filter(function(e){return M(e.target,s)}),t===F)for(a=0;a<o.length;)r[o[a].identifier]=!0,a++;a=0;for(;a<i.length;)r[i[a].identifier]&&c.push(i[a]),t&(W|q)&&delete r[i[a].identifier],a++;if(!c.length)return;return[I(o.concat(c),"identifier",!0),c]}.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:"touch",srcEvent:e})}});var xe=2500,_e=25;function ke(){ee.apply(this,arguments);var e=S(this.handler,this);this.touch=new Ce(this.manager,e),this.mouse=new de(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function Me(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)},xe)}}E(ke,ee,{handler:function(e,t,n){var r="touch"==n.pointerType,a="mouse"==n.pointerType;if(!(a&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)(function(e,t){e&F?(this.primaryTouch=t.changedPointers[0].identifier,Me.call(this,t)):e&(W|q)&&Me.call(this,t)}).call(this,t,n);else if(a&&function(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var a=this.lastTouches[r],o=Math.abs(t-a.x),i=Math.abs(n-a.y);if(o<=_e&&i<=_e)return!0}return!1}.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Te=R(u.style,"touchAction"),Ne=Te!==c,Oe="auto",je="manipulation",Ie="none",Re="pan-x",Le="pan-y",De=function(){if(!Ne)return!1;var e={},t=a.CSS&&a.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){e[n]=!t||a.CSS.supports("touch-action",n)}),e}();function Ae(e,t){this.manager=e,this.set(t)}Ae.prototype={set:function(e){"compute"==e&&(e=this.compute()),Ne&&this.manager.element.style&&De[e]&&(this.manager.element.style[Te]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return g(this.manager.recognizers,function(t){C(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),function(e){if(T(e,Ie))return Ie;var t=T(e,Re),n=T(e,Le);if(t&&n)return Ie;if(t||n)return t?Re:Le;if(T(e,je))return je;return Oe}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,a=T(r,Ie)&&!De[Ie],o=T(r,Le)&&!De[Le],i=T(r,Re)&&!De[Re];if(a){var c=1===e.pointers.length,s=e.distance<2,l=e.deltaTime<250;if(c&&s&&l)return}if(!i||!o)return a||o&&n&K||i&&n&Y?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Pe=1,Be=2,Ue=4,Fe=8,ze=Fe,We=16;function qe(e){this.options=s({},this.defaults,e||{}),this.id=L++,this.manager=null,this.options.enable=x(this.options.enable,!0),this.state=Pe,this.simultaneous={},this.requireFail=[]}function He(e){return e&We?"cancel":e&Fe?"end":e&Ue?"move":e&Be?"start":""}function Ve(e){return e==G?"down":e==Z?"up":e==V?"left":e==X?"right":""}function Xe(e,t){var n=t.manager;return n?n.get(e):e}function Ze(){qe.apply(this,arguments)}function Ge(){Ze.apply(this,arguments),this.pX=null,this.pY=null}function Ke(){Ze.apply(this,arguments)}function Ye(){qe.apply(this,arguments),this._timer=null,this._input=null}function Je(){Ze.apply(this,arguments)}function Qe(){Ze.apply(this,arguments)}function $e(){qe.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function et(e,t){return(t=t||{}).recognizers=x(t.recognizers,et.defaults.preset),new tt(e,t)}qe.prototype={defaults:{},set:function(e){return s(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(v(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Xe(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return v(e,"dropRecognizeWith",this)?this:(e=Xe(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(v(e,"requireFailure",this))return this;var t=this.requireFail;return-1===O(t,e=Xe(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(v(e,"dropRequireFailure",this))return this;e=Xe(e,this);var t=O(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<Fe&&r(t.options.event+He(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=Fe&&r(t.options.event+He(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|Pe)))return!1;e++}return!0},recognize:function(e){var t=s({},e);if(!C(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(ze|We|32)&&(this.state=Pe),this.state=this.process(t),this.state&(Be|Ue|Fe|We)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},E(Ze,qe,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(Be|Ue),a=this.attrTest(e);return r&&(n&q||!a)?t|We:r||a?n&W?t|Fe:t&Be?t|Ue:Be:32}}),E(Ge,Ze,{defaults:{event:"pan",threshold:10,pointers:1,direction:J},getTouchAction:function(){var e=this.options.direction,t=[];return e&K&&t.push(Le),e&Y&&t.push(Re),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,a=e.direction,o=e.deltaX,i=e.deltaY;return a&t.direction||(t.direction&K?(a=0===o?H:o<0?V:X,n=o!=this.pX,r=Math.abs(e.deltaX)):(a=0===i?H:i<0?Z:G,n=i!=this.pY,r=Math.abs(e.deltaY))),e.direction=a,n&&r>t.threshold&&a&t.direction},attrTest:function(e){return Ze.prototype.attrTest.call(this,e)&&(this.state&Be||!(this.state&Be)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ve(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),E(Ke,Ze,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Be)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),E(Ye,qe,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Oe]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(W|q)&&!a)this.reset();else if(e.eventType&F)this.reset(),this._timer=m(function(){this.state=ze,this.tryEmit()},t.time,this);else if(e.eventType&W)return ze;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ze&&(e&&e.eventType&W?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=h(),this.manager.emit(this.options.event,this._input)))}}),E(Je,Ze,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ie]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Be)}}),E(Qe,Ze,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:K|Y,pointers:1},getTouchAction:function(){return Ge.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(K|Y)?t=e.overallVelocity:n&K?t=e.overallVelocityX:n&Y&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&f(t)>this.options.velocity&&e.eventType&W},emit:function(e){var t=Ve(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),E($e,qe,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[je]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&F&&0===this.count)return this.failTimeout();if(r&&a&&n){if(e.eventType!=W)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,i=!this.pCenter||ie(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,i&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=m(function(){this.state=ze,this.tryEmit()},t.interval,this),Be):ze}return 32},failTimeout:function(){return this._timer=m(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ze&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),et.VERSION="2.0.7",et.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[Je,{enable:!1}],[Ke,{enable:!1},["rotate"]],[Qe,{direction:K}],[Ge,{direction:K},["swipe"]],[$e],[$e,{event:"doubletap",taps:2},["tap"]],[Ye]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function tt(e,t){var n;this.options=s({},et.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(P?ve:B?Ce:A?ke:de))(n,te),this.touchAction=new Ae(this,this.options.touchAction),nt(this,!0),g(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function nt(e,t){var n,r=e.element;r.style&&(g(e.options.cssProps,function(a,o){n=R(r.style,o),t?(e.oldCssProps[n]=r.style[n],r.style[n]=a):r.style[n]=e.oldCssProps[n]||""}),t||(e.oldCssProps={}))}tt.prototype={set:function(e){return s(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,a=t.curRecognizer;(!a||a&&a.state&ze)&&(a=t.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===t.stopped||a&&n!=a&&!n.canRecognizeWith(a)?n.reset():n.recognize(e),!a&&n.state&(Be|Ue|Fe)&&(a=t.curRecognizer=n),o++}},get:function(e){if(e instanceof qe)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(v(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(v(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=O(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==c&&t!==c){var n=this.handlers;return g(N(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==c){var n=this.handlers;return g(N(e),function(e){t?n[e]&&n[e].splice(O(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&function(e,t){var n=o.createEvent("Event");n.initEvent(e,!0,!0),n.gesture=t,t.target.dispatchEvent(n)}(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&nt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(et,{INPUT_START:F,INPUT_MOVE:z,INPUT_END:W,INPUT_CANCEL:q,STATE_POSSIBLE:Pe,STATE_BEGAN:Be,STATE_CHANGED:Ue,STATE_ENDED:Fe,STATE_RECOGNIZED:ze,STATE_CANCELLED:We,STATE_FAILED:32,DIRECTION_NONE:H,DIRECTION_LEFT:V,DIRECTION_RIGHT:X,DIRECTION_UP:Z,DIRECTION_DOWN:G,DIRECTION_HORIZONTAL:K,DIRECTION_VERTICAL:Y,DIRECTION_ALL:J,Manager:tt,Input:ee,TouchAction:Ae,TouchInput:Ce,MouseInput:de,PointerEventInput:ve,TouchMouseInput:ke,SingleTouchInput:we,Recognizer:qe,AttrRecognizer:Ze,Tap:$e,Pan:Ge,Swipe:Qe,Pinch:Ke,Rotate:Je,Press:Ye,on:_,off:k,each:g,merge:w,extend:b,assign:s,inherit:E,bindFn:S,prefixed:R}),(void 0!==a?a:"undefined"!=typeof self?self:{}).Hammer=et,(r=function(){return et}.call(t,n,t,e))===c||(e.exports=r)}(window,document)},yTJ9:function(e,t){e.exports=function(e){return e instanceof Date?o(e):"string"==typeof e?o(a(e)):"number"==typeof e?o(new Date(e)):void 0};var n={allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[],wordSeparator:" "}},r=n.strings;function a(e){if(e){var t=e.trim();return t=(t=(t=(t=t.replace(/\.\d\d\d+/,"")).replace(/-/,"/").replace(/-/,"/")).replace(/T/," ").replace(/Z/," UTC")).replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(t)}}function o(e){return r.inWords(function(e){return(new Date).getTime()-e.getTime()}(e))}e.exports.settings=n,r.inWords=function(e){var t=r.prefixAgo,a=r.suffixAgo;n.allowFuture&&e<0&&(t=r.prefixFromNow,a=r.suffixFromNow);var o=Math.abs(e)/1e3,i=o/60,c=i/60,s=c/24,l=s/365;function u(t,n){var a="function"==typeof t?t(n,e):t,o=r.numbers&&r.numbers[n]||n;return a.replace(/%d/i,o)}var d=o<45&&u(r.seconds,Math.round(o))||o<90&&u(r.minute,1)||i<45&&u(r.minutes,Math.round(i))||i<90&&u(r.hour,1)||c<24&&u(r.hours,Math.round(c))||c<48&&u(r.day,1)||s<30&&u(r.days,Math.floor(s))||s<60&&u(r.month,1)||s<365&&u(r.months,Math.floor(s/30))||l<2&&u(r.year,1)||u(r.years,Math.floor(l)),p=r.wordSeparator||"";return void 0===r.wordSeparator&&(p=" "),[t,d,a].join(p).toString().trim()},r.parse=a},zAG7:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z0-9-]{2,63}$/i},zZYZ:function(e,t,n){},zkrS:function(e,t,n){"use strict";var r=n("yTJ9"),a=n.n(r),o=n("knB1"),i=n("QkVN"),c=n.n(i),s=window,l=s.confirm,u=s.alert,d=s.MB,p=s.MBLocale,f=s.I18N,h=s.Team,m=s.Project,v=s.Combo,g=s.Template,y=s.Screen,b=s.Screenstate,w=s.Widget,E=s.Widgetstate,S=s.Panel,C=s.Panelstate,x=s.Link,_=s.Collaborator,k=s.Comment,M=s.CommentThread,T=s.Asset,N=s.$;"zh-CN"===p&&c()(a.a.settings.strings,o.a);var O=window,j={MBLocale:p,parseTimeAgo:function(e){return a()(e)}},I={Team:h,Project:m,Combo:v,Template:g,Screen:y,Screenstate:b,Widget:w,Widgetstate:E,Panel:S,Panelstate:C,Link:x,Collaborator:_,Comment:k,CommentThread:M,Asset:T,requestCid:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+Math.uuid(10,16)+Date.now()},queueSave:function(){return N("body").trigger("queue:save")}};t.a={Global:O,Storage:d.localStorageDelegate,confirm:function(){return l.apply(void 0,arguments)},alert:function(){return u.apply(void 0,arguments)},MB:d,I18N:f,L10N:j,SpineModel:I}}}]);
//# sourceMappingURL=lib-preview-28a2686275ceb9820361.js.map